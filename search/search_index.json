{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"EdgeX Foundry \u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc \u00b6 EdgeX Foundry \u306e\u975e\u516c\u5f0f\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u30ac\u30a4\u30c9\u3067\u3059\u3002\u81ea\u5206\u306e\u30da\u30fc\u30b9\u3067\u9032\u3081\u3089\u308c\u308b\u30bb\u30eb\u30d5\u30da\u30fc\u30b9\u30c9\u30e9\u30dc\u5f62\u5f0f\u3067\u3059\u3002 \u3053\u306e\u30ac\u30a4\u30c9\u306b\u3064\u3044\u3066 \u00b6 \u3053\u306e\u30ac\u30a4\u30c9\u306f \u975e\u516c\u5f0f \u3067\u3059\u3002 \u81ea\u5206\u306e\u30da\u30fc\u30b9\u3067\u9032\u3081\u3089\u308c\u308b\u30bb\u30eb\u30d5\u30da\u30fc\u30b9\u30c9\u30e9\u30dc\u5f62\u5f0f\u306e\u305f\u3081\u3001\u6642\u9593\u3084\u5834\u6240\u3092\u554f\u308f\u305a\u53d6\u308a\u7d44\u3093\u3067\u3044\u305f\u3060\u3051\u307e\u3059\u304c\u3001\u4e3b\u3068\u3057\u3066 EdgeX Foundry Tokyo \u306e\u30a4\u30d9\u30f3\u30c8\u5411\u3051\u306b\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002 \u5fc5\u8981\u306a\u3082\u306e \u00b6 \u5b9f\u969b\u306b\u74b0\u5883\u3092\u4f5c\u308a\u306a\u304c\u3089\u9032\u3081\u308b\u305f\u3081\u3001 Docker \u304c\u52d5\u4f5c\u3059\u308b Ubuntu Desktop\uff08\u307e\u305f\u306f Ubuntu Server\uff09\u74b0\u5883 \u304c\u5fc5\u8981\u3067\u3059\u3002\u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001Raspberry Pi \u306a\u3069\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002 \u30ac\u30a4\u30c9\u3067\u524d\u63d0\u3068\u3057\u3066\u3044\u308b\u74b0\u5883\u306e\u8a73\u7d30\u306f\u3001\u5404\u30ac\u30a4\u30c9\u306e\u5192\u982d\u3067\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\u3002 \u514d\u8cac\u4e8b\u9805 \u00b6 \u3053\u306e\u30ac\u30a4\u30c9\u306f \u975e\u516c\u5f0f \u3067\u3059\u3002 \u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001EdgeX Foundry \u3092\u8da3\u5473\u3067\u89e6\u3063\u3066 \u7d39\u4ecb\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3092\u66f8\u304f\u306a\u3069\u3057\u3066\u3044\u308b\u500b\u4eba\u304c\u3001\u8da3\u5473\u306e\u7bc4\u56f2\u5185\u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u672c\u696d\u3068\u306f\u7121\u95a2\u4fc2\u3067\u3042\u308a\u3001\u4e8b\u696d\u3084\u55b6\u5229\u76ee\u7684\u306e\u6d3b\u52d5\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 EdgeX Foundry \u958b\u767a\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u627f\u8a8d\u3084\u30ec\u30d3\u30e5\u306a\u3069\u306f\u53d7\u3051\u3066\u3044\u307e\u305b\u3093\u3002 \u5185\u5bb9\u306f\u500b\u4eba\u306e\u898b\u89e3\u3067\u3042\u308a\u3001\u6240\u5c5e\u3059\u308b\u7d44\u7e54\u306e\u516c\u5f0f\u898b\u89e3\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u6b63\u3057\u3044\u60c5\u5831\u3092\u8a18\u8f09\u3059\u308b\u3088\u3046\u52aa\u3081\u3066\u3044\u307e\u3059\u304c\u3001\u5fc5\u305a\u3057\u3082\u6b63\u78ba\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u672c\u30ac\u30a4\u30c9\u306b\u63b2\u8f09\u3055\u308c\u305f\u5185\u5bb9\u306b\u3088\u3063\u3066\u751f\u3058\u305f\u640d\u5bb3\u306a\u3069\u306e\u4e00\u5207\u306e\u8cac\u4efb\u3092\u8ca0\u3044\u307e\u305b\u3093\u3002 \u66f8\u3044\u305f\u3072\u3068 \u00b6 Twitter GitHub \u30d6\u30ed\u30b0 \u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u30ac\u30a4\u30c9 \u00b6 \u30ac\u30a4\u30c9\u672c\u7de8\u3067\u3059\u3002 Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051 \u00b6 Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 Ubuntu \u4e0a\u306e Docker \u74b0\u5883\u3092\u524d\u63d0\u306b\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304b\u3089\u8d77\u52d5\u78ba\u8a8d\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u3068\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u307e\u3067\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002 \u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u3092\u59cb\u3081\u308b Geneva \u30ea\u30ea\u30fc\u30b9\u5411\u3051 \u00b6 Geneva \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 \u4f5c\u6210\u4e88\u5b9a\u306f\u4e0d\u660e\u3067\u3059\u3002","title":"\u3053\u306e\u30ac\u30a4\u30c9\u306b\u3064\u3044\u3066"},{"location":"#edgex-foundry","text":"EdgeX Foundry \u306e\u975e\u516c\u5f0f\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u30ac\u30a4\u30c9\u3067\u3059\u3002\u81ea\u5206\u306e\u30da\u30fc\u30b9\u3067\u9032\u3081\u3089\u308c\u308b\u30bb\u30eb\u30d5\u30da\u30fc\u30b9\u30c9\u30e9\u30dc\u5f62\u5f0f\u3067\u3059\u3002","title":"EdgeX Foundry \u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc"},{"location":"#_1","text":"\u3053\u306e\u30ac\u30a4\u30c9\u306f \u975e\u516c\u5f0f \u3067\u3059\u3002 \u81ea\u5206\u306e\u30da\u30fc\u30b9\u3067\u9032\u3081\u3089\u308c\u308b\u30bb\u30eb\u30d5\u30da\u30fc\u30b9\u30c9\u30e9\u30dc\u5f62\u5f0f\u306e\u305f\u3081\u3001\u6642\u9593\u3084\u5834\u6240\u3092\u554f\u308f\u305a\u53d6\u308a\u7d44\u3093\u3067\u3044\u305f\u3060\u3051\u307e\u3059\u304c\u3001\u4e3b\u3068\u3057\u3066 EdgeX Foundry Tokyo \u306e\u30a4\u30d9\u30f3\u30c8\u5411\u3051\u306b\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002","title":"\u3053\u306e\u30ac\u30a4\u30c9\u306b\u3064\u3044\u3066"},{"location":"#_2","text":"\u5b9f\u969b\u306b\u74b0\u5883\u3092\u4f5c\u308a\u306a\u304c\u3089\u9032\u3081\u308b\u305f\u3081\u3001 Docker \u304c\u52d5\u4f5c\u3059\u308b Ubuntu Desktop\uff08\u307e\u305f\u306f Ubuntu Server\uff09\u74b0\u5883 \u304c\u5fc5\u8981\u3067\u3059\u3002\u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001Raspberry Pi \u306a\u3069\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002 \u30ac\u30a4\u30c9\u3067\u524d\u63d0\u3068\u3057\u3066\u3044\u308b\u74b0\u5883\u306e\u8a73\u7d30\u306f\u3001\u5404\u30ac\u30a4\u30c9\u306e\u5192\u982d\u3067\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\u3002","title":"\u5fc5\u8981\u306a\u3082\u306e"},{"location":"#_3","text":"\u3053\u306e\u30ac\u30a4\u30c9\u306f \u975e\u516c\u5f0f \u3067\u3059\u3002 \u3053\u306e\u30ac\u30a4\u30c9\u306f\u3001EdgeX Foundry \u3092\u8da3\u5473\u3067\u89e6\u3063\u3066 \u7d39\u4ecb\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3092\u66f8\u304f\u306a\u3069\u3057\u3066\u3044\u308b\u500b\u4eba\u304c\u3001\u8da3\u5473\u306e\u7bc4\u56f2\u5185\u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u672c\u696d\u3068\u306f\u7121\u95a2\u4fc2\u3067\u3042\u308a\u3001\u4e8b\u696d\u3084\u55b6\u5229\u76ee\u7684\u306e\u6d3b\u52d5\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 EdgeX Foundry \u958b\u767a\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u627f\u8a8d\u3084\u30ec\u30d3\u30e5\u306a\u3069\u306f\u53d7\u3051\u3066\u3044\u307e\u305b\u3093\u3002 \u5185\u5bb9\u306f\u500b\u4eba\u306e\u898b\u89e3\u3067\u3042\u308a\u3001\u6240\u5c5e\u3059\u308b\u7d44\u7e54\u306e\u516c\u5f0f\u898b\u89e3\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u6b63\u3057\u3044\u60c5\u5831\u3092\u8a18\u8f09\u3059\u308b\u3088\u3046\u52aa\u3081\u3066\u3044\u307e\u3059\u304c\u3001\u5fc5\u305a\u3057\u3082\u6b63\u78ba\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u672c\u30ac\u30a4\u30c9\u306b\u63b2\u8f09\u3055\u308c\u305f\u5185\u5bb9\u306b\u3088\u3063\u3066\u751f\u3058\u305f\u640d\u5bb3\u306a\u3069\u306e\u4e00\u5207\u306e\u8cac\u4efb\u3092\u8ca0\u3044\u307e\u305b\u3093\u3002","title":"\u514d\u8cac\u4e8b\u9805"},{"location":"#_4","text":"Twitter GitHub \u30d6\u30ed\u30b0","title":"\u66f8\u3044\u305f\u3072\u3068"},{"location":"#_5","text":"\u30ac\u30a4\u30c9\u672c\u7de8\u3067\u3059\u3002","title":"\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u30ac\u30a4\u30c9"},{"location":"#fuji","text":"Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 Ubuntu \u4e0a\u306e Docker \u74b0\u5883\u3092\u524d\u63d0\u306b\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304b\u3089\u8d77\u52d5\u78ba\u8a8d\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u3068\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u307e\u3067\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002 \u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc\u3092\u59cb\u3081\u308b","title":"Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051"},{"location":"#geneva","text":"Geneva \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 \u4f5c\u6210\u4e88\u5b9a\u306f\u4e0d\u660e\u3067\u3059\u3002","title":"Geneva \u30ea\u30ea\u30fc\u30b9\u5411\u3051"},{"location":"fuji/","text":"\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc for Fuji release \u00b6 Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 Ubuntu \u4e0a\u306e Docker \u74b0\u5883\u3092\u524d\u63d0\u306b\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304b\u3089\u8d77\u52d5\u78ba\u8a8d\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u3068\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u307e\u3067\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002 Fuji \u30ea\u30ea\u30fc\u30b9\u306e\u6271\u3044 2020 \u5e74 4 \u6708\u306b\u3082\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Geneva \u306e\u30ea\u30ea\u30fc\u30b9\u304c\u4e88\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002Fuji \u304b\u3089\u306e\u5909\u66f4\u70b9\u306f\u975e\u5e38\u306b\u591a\u3044\u3067\u3059\u304c\u3001\u5168\u4f53\u306e\u601d\u60f3\u3084\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u306f\u305d\u3053\u307e\u3067\u30c9\u30e9\u30b9\u30c6\u30a3\u30c3\u30af\u306a\u5909\u9769\u306f\u5165\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002 Fuji \u30ea\u30ea\u30fc\u30b9\u306b\u89e6\u308c\u3066\u304a\u3051\u3070\u3001Geneva \u30ea\u30ea\u30fc\u30b9\u306e\u7fd2\u5f97\u3082\u3057\u3084\u3059\u304f\u306a\u308b\u306f\u305a\u3067\u3059\u3002 \u5fc5\u8981\u306a\u3082\u306e \u00b6 \u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u74b0\u5883\u81ea\u4f53\u306e\u69cb\u7bc9\u306f\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u53d6\u308a\u6271\u308f\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u3092\u53c2\u8003\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002 Ubuntu Desktop 18.04 LTS Ubuntu Installation Guide \u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001Raspberry Pi \u306a\u3069\u3067\u76f4\u63a5\u52d5\u4f5c\u3055\u305b\u305f\u74b0\u5883\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u307e\u305f\u3001\u3053\u306e Ubuntu \u74b0\u5883\u306b\u306f\u3001\u4ee5\u4e0b\u3092\u5c0e\u5165\u6e08\u307f\u3067\u3042\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002 Docker xx.xx Get Docker Engine - Community for Ubuntu Docker Compose xx.xx Install Docker Compose \u3053\u306e Ubuntu \u74b0\u5883\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30a4\u30f3\u30bf\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068 git \u30b3\u30de\u30f3\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3053\u3068 \u307e\u305f\u3001\u30e9\u30dc\u306b\u306f Web GUI \u3084 REST API \u306e\u64cd\u4f5c\u306a\u3069\u3092\u542b\u3080\u306e\u3067\u3001\u3053\u306e Ubuntu \u74b0\u5883\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u7aef\u672b\u3067\u4ee5\u4e0b\u304c\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u306b\u3057\u3066\u304a\u304f\u3068\u30b9\u30e0\u30fc\u30ba\u3067\u3059\u3002 Web \u30d6\u30e9\u30a6\u30b6 Google Chrome \u306a\u3069 Postman Postman | The Collaboration Platform for API Development Note \u30e9\u30dc\u306f\u57fa\u672c\u7684\u306b\u306f Docker \u30b3\u30f3\u30c6\u30ca\u3067\u5b8c\u7d50\u3059\u308b\u306e\u3067\u3001Windows \u3067\u3082\u307b\u3068\u3093\u3069\u540c\u69d8\u306b\u9032\u3081\u3089\u308c\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30b7\u30a7\u30eb\u74b0\u5883\u306e\u5dee\u7570\u306a\u3069\u3082\u3042\u308b\u305f\u3081\u3001\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u306f\u5fc5\u8981\u3067\u3059\u3002 \u53c2\u8003\u30ea\u30f3\u30af \u00b6 \u30e9\u30dc\u3092\u9032\u3081\u308b\u3046\u3048\u3067\u5fc5\u8981\u306a\u6700\u4f4e\u9650\u306e\u60c5\u5831\u306f\u30ac\u30a4\u30c9\u5185\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u8ffd\u52a0\u306e\u60c5\u5831\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u306a\u3069\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002 EdgeX Foundry \u306e Fuji \u30ea\u30ea\u30fc\u30b9\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 GitHub ( edgexfoundry ) GitHub ( edgexfoundry-holding ) Edge Xpert\uff08\u5546\u7528\u7248 EdgeX Foundry\uff09\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3053\u306e\u30ac\u30a4\u30c9\u3092\u66f8\u3044\u305f\u3072\u3068\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea\u7fa4","title":"Lab 0 - \u306f\u3058\u3081\u306b"},{"location":"fuji/#for-fuji-release","text":"Fuji \u30ea\u30ea\u30fc\u30b9\u5411\u3051\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u30ac\u30a4\u30c9\u3067\u3059\u3002 Ubuntu \u4e0a\u306e Docker \u74b0\u5883\u3092\u524d\u63d0\u306b\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304b\u3089\u8d77\u52d5\u78ba\u8a8d\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u3068\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u307e\u3067\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002 Fuji \u30ea\u30ea\u30fc\u30b9\u306e\u6271\u3044 2020 \u5e74 4 \u6708\u306b\u3082\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Geneva \u306e\u30ea\u30ea\u30fc\u30b9\u304c\u4e88\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002Fuji \u304b\u3089\u306e\u5909\u66f4\u70b9\u306f\u975e\u5e38\u306b\u591a\u3044\u3067\u3059\u304c\u3001\u5168\u4f53\u306e\u601d\u60f3\u3084\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u306f\u305d\u3053\u307e\u3067\u30c9\u30e9\u30b9\u30c6\u30a3\u30c3\u30af\u306a\u5909\u9769\u306f\u5165\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002 Fuji \u30ea\u30ea\u30fc\u30b9\u306b\u89e6\u308c\u3066\u304a\u3051\u3070\u3001Geneva \u30ea\u30ea\u30fc\u30b9\u306e\u7fd2\u5f97\u3082\u3057\u3084\u3059\u304f\u306a\u308b\u306f\u305a\u3067\u3059\u3002","title":"\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc for Fuji release"},{"location":"fuji/#_1","text":"\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u74b0\u5883\u81ea\u4f53\u306e\u69cb\u7bc9\u306f\u3053\u306e\u30ac\u30a4\u30c9\u3067\u306f\u53d6\u308a\u6271\u308f\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u3092\u53c2\u8003\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002 Ubuntu Desktop 18.04 LTS Ubuntu Installation Guide \u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3057\u3001Raspberry Pi \u306a\u3069\u3067\u76f4\u63a5\u52d5\u4f5c\u3055\u305b\u305f\u74b0\u5883\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u307e\u305f\u3001\u3053\u306e Ubuntu \u74b0\u5883\u306b\u306f\u3001\u4ee5\u4e0b\u3092\u5c0e\u5165\u6e08\u307f\u3067\u3042\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002 Docker xx.xx Get Docker Engine - Community for Ubuntu Docker Compose xx.xx Install Docker Compose \u3053\u306e Ubuntu \u74b0\u5883\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30a4\u30f3\u30bf\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068 git \u30b3\u30de\u30f3\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3053\u3068 \u307e\u305f\u3001\u30e9\u30dc\u306b\u306f Web GUI \u3084 REST API \u306e\u64cd\u4f5c\u306a\u3069\u3092\u542b\u3080\u306e\u3067\u3001\u3053\u306e Ubuntu \u74b0\u5883\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u7aef\u672b\u3067\u4ee5\u4e0b\u304c\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u306b\u3057\u3066\u304a\u304f\u3068\u30b9\u30e0\u30fc\u30ba\u3067\u3059\u3002 Web \u30d6\u30e9\u30a6\u30b6 Google Chrome \u306a\u3069 Postman Postman | The Collaboration Platform for API Development Note \u30e9\u30dc\u306f\u57fa\u672c\u7684\u306b\u306f Docker \u30b3\u30f3\u30c6\u30ca\u3067\u5b8c\u7d50\u3059\u308b\u306e\u3067\u3001Windows \u3067\u3082\u307b\u3068\u3093\u3069\u540c\u69d8\u306b\u9032\u3081\u3089\u308c\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30b7\u30a7\u30eb\u74b0\u5883\u306e\u5dee\u7570\u306a\u3069\u3082\u3042\u308b\u305f\u3081\u3001\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u306f\u5fc5\u8981\u3067\u3059\u3002","title":"\u5fc5\u8981\u306a\u3082\u306e"},{"location":"fuji/#_2","text":"\u30e9\u30dc\u3092\u9032\u3081\u308b\u3046\u3048\u3067\u5fc5\u8981\u306a\u6700\u4f4e\u9650\u306e\u60c5\u5831\u306f\u30ac\u30a4\u30c9\u5185\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u8ffd\u52a0\u306e\u60c5\u5831\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u306a\u3069\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002 EdgeX Foundry \u306e Fuji \u30ea\u30ea\u30fc\u30b9\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 GitHub ( edgexfoundry ) GitHub ( edgexfoundry-holding ) Edge Xpert\uff08\u5546\u7528\u7248 EdgeX Foundry\uff09\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3053\u306e\u30ac\u30a4\u30c9\u3092\u66f8\u3044\u305f\u3072\u3068\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea\u7fa4","title":"\u53c2\u8003\u30ea\u30f3\u30af"},{"location":"fuji/lab1-overview/","text":"Lab 1 - \u6982\u8981 \u00b6 EdgeX Foundry \u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6982\u89b3\u3057\u307e\u3059\u3002 EdgeX Foundry \u3068\u306f \u00b6 \u516c\u5f0f\u30b5\u30a4\u30c8 \u306b\u3088\u308c\u3070\u3001 The World\u2019s First Plug and Play Ecosystem-Enabled Open Platform for the IoT Edge. A highly flexible and scalable open software framework that facilitates interoperability between devices and applications at the IoT Edge, along with a consistent foundation for security and manageability regardless of use case. \u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3072\u3068\u307e\u305a\u306f\u3001 \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067 IoT \u306e\u30a8\u30c3\u30b8\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u73fe\u3059\u308b \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308b \u3068\u601d\u3063\u3066\u5411\u304d\u5408\u3048\u3070\u3001\u5927\u5916\u308c\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002 EdgeX Foundry \u306f Linux Foundation \u304c\u7acb\u3061\u4e0a\u3052\u305f LF Edge \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3072\u3068\u3064\u3067\u3001LF Edge \u306b\u306f \u73fe\u6642\u70b9\u3067 80 \u793e\u4ee5\u4e0a\u304c\u30e1\u30f3\u30d0\u3068\u3057\u3066\u63b2\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002 EdgeX Foundry \u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u00b6 \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6982\u8981\u306f \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u304b\u3089\u3082\u8aad\u307f\u89e3\u3051\u307e\u3059\u3002 \u898b\u3066\u3044\u304f\u3068\u3001EdgeX Foundry \u304c\u591a\u6570\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u96c6\u5408\u4f53\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 \u4ee5\u4e0b\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u753b\u50cf\u3092\u5f15\u7528\u3057\u307e\u3059\u3002 \u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u306b\u304b\u304b\u308f\u308b\u90e8\u5206\u3067\u306f\u3001\u56f3\u306e\u4e2d\u592e\u90e8\u5206\u306e\u901a\u308a\u3001\u5168\u4f53\u3067\u5927\u304d\u304f 4 \u3064\u306e\u5c64\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30ec\u30a4\u30e4\u3054\u3068\u306b\u5f79\u5272\u3092\u3056\u3063\u304f\u308a\u62bc\u3055\u3048\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002 \u5b9f\u30c7\u30d0\u30a4\u30b9\u306b\u8fd1\u3044\u5074\uff08\u30b5\u30a6\u30b9\u30b5\u30a4\u30c9\uff09\u304b\u3089\u3001\u5927\u307e\u304b\u306b\u306f\u3001 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64 \u5b9f\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u9001\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u547d\u4ee4\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3092\u64cd\u4f5c\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3059\u308b \u30b5\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\uff08\u306e\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306a\u3069\uff09\u304b\u3089\u547d\u4ee4\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3059\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b EdgeX Foundry \u5185\u306e\u30b5\u30fc\u30d3\u30b9\u7fa4\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u7ba1\u7406\u3059\u308b \u30b5\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64 \u3044\u308f\u3086\u308b\u5206\u6790\u6a5f\u80fd\uff08\u4eca\u306e\u3068\u3053\u308d\u306f\u7c21\u5358\u306a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\uff09\u3092\u63d0\u4f9b\u3059\u308b \u30a2\u30e9\u30fc\u30c8\u3084\u30ed\u30ae\u30f3\u30b0\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6e08\u307f\u306e\u30c7\u30fc\u30bf\u306e\u524a\u9664\u3092\u884c\u3046 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64 EdgeX Foundry \u306e\u5916\u306b\u30c7\u30fc\u30bf\u3092\u9001\u51fa\u3059\u308b \u306a\u5177\u5408\u3067\u3059\u3002 \u5b9f\u88c5\u306f\u3001Fuji \u30ea\u30ea\u30fc\u30b9\u3067\u306f\u4e00\u90e8 Java \u3082\u6b8b\u3063\u3066\u3044\u307e\u3059\u304c\u3001Go \u8a00\u8a9e\u3068 C \u8a00\u8a9e\u304c\u4e3b\u306e\u3088\u3046\u3067\u3059\u3002\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u8981\u4ef6\u306f\u53b3\u3057\u304f\u306a\u304f\u3001Raspberry Pi 4 \u306e\u3088\u3046\u306a\u5c0f\u3055\u306a\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b\u307b\u304b\u3001Docker Compose \u3067\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u305f\u308a\u3001Ubuntu \u3067\u306f Snap \u306b\u3088\u308b\u5c0e\u5165\u3082\u53ef\u80fd\u3067\u3059\u3002 \u307e\u305f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067\u3042\u308a\u3001\u958b\u767a\u306f GitHub \u4e0a\u3067\u76db\u3093\u306b\u884c\u308f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u8208\u5473\u304c\u3042\u308c\u3070\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3082\u53ef\u80fd\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u3084\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u5b9f\u88c5\u306e\u305f\u3081\u306b\u306f SDK \u3082\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u958b\u767a\u306b\u53c2\u52a0\u3082\u3067\u304d\u307e\u3059\u3002 \u53c2\u8003\u30ea\u30f3\u30af \u00b6 GitHub ( edgexfoundry ) \u30e1\u30a4\u30f3\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7fa4\u3067\u3059 GitHub ( edgexfoundry-holding ) GA \u3055\u308c\u3066\u3044\u306a\u3044\u958b\u767a\u4e2d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7fa4\u3067\u3059 \u3053\u306e\u914d\u4e0b\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001\u516c\u5f0f\u306b\u306f\u30b5\u30dd\u30fc\u30c8\u304c\u63d0\u4f9b\u3055\u308c\u307e\u305b\u3093 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u7528\u306e SDK \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u7528\u306e SDK","title":"Lab 1 - \u6982\u8981"},{"location":"fuji/lab1-overview/#lab-1-","text":"EdgeX Foundry \u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6982\u89b3\u3057\u307e\u3059\u3002","title":"Lab 1 - \u6982\u8981"},{"location":"fuji/lab1-overview/#edgex-foundry","text":"\u516c\u5f0f\u30b5\u30a4\u30c8 \u306b\u3088\u308c\u3070\u3001 The World\u2019s First Plug and Play Ecosystem-Enabled Open Platform for the IoT Edge. A highly flexible and scalable open software framework that facilitates interoperability between devices and applications at the IoT Edge, along with a consistent foundation for security and manageability regardless of use case. \u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3072\u3068\u307e\u305a\u306f\u3001 \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067 IoT \u306e\u30a8\u30c3\u30b8\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u73fe\u3059\u308b \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308b \u3068\u601d\u3063\u3066\u5411\u304d\u5408\u3048\u3070\u3001\u5927\u5916\u308c\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002 EdgeX Foundry \u306f Linux Foundation \u304c\u7acb\u3061\u4e0a\u3052\u305f LF Edge \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3072\u3068\u3064\u3067\u3001LF Edge \u306b\u306f \u73fe\u6642\u70b9\u3067 80 \u793e\u4ee5\u4e0a\u304c\u30e1\u30f3\u30d0\u3068\u3057\u3066\u63b2\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002","title":"EdgeX Foundry \u3068\u306f"},{"location":"fuji/lab1-overview/#edgex-foundry_1","text":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6982\u8981\u306f \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u304b\u3089\u3082\u8aad\u307f\u89e3\u3051\u307e\u3059\u3002 \u898b\u3066\u3044\u304f\u3068\u3001EdgeX Foundry \u304c\u591a\u6570\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u96c6\u5408\u4f53\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 \u4ee5\u4e0b\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u753b\u50cf\u3092\u5f15\u7528\u3057\u307e\u3059\u3002 \u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u306b\u304b\u304b\u308f\u308b\u90e8\u5206\u3067\u306f\u3001\u56f3\u306e\u4e2d\u592e\u90e8\u5206\u306e\u901a\u308a\u3001\u5168\u4f53\u3067\u5927\u304d\u304f 4 \u3064\u306e\u5c64\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30ec\u30a4\u30e4\u3054\u3068\u306b\u5f79\u5272\u3092\u3056\u3063\u304f\u308a\u62bc\u3055\u3048\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3057\u3087\u3046\u3002 \u5b9f\u30c7\u30d0\u30a4\u30b9\u306b\u8fd1\u3044\u5074\uff08\u30b5\u30a6\u30b9\u30b5\u30a4\u30c9\uff09\u304b\u3089\u3001\u5927\u307e\u304b\u306b\u306f\u3001 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64 \u5b9f\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u9001\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u547d\u4ee4\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3092\u64cd\u4f5c\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u306e\u30c7\u30fc\u30bf\u3092\u84c4\u7a4d\u3059\u308b \u30b5\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\uff08\u306e\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306a\u3069\uff09\u304b\u3089\u547d\u4ee4\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3059\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b EdgeX Foundry \u5185\u306e\u30b5\u30fc\u30d3\u30b9\u7fa4\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u7ba1\u7406\u3059\u308b \u30b5\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64 \u3044\u308f\u3086\u308b\u5206\u6790\u6a5f\u80fd\uff08\u4eca\u306e\u3068\u3053\u308d\u306f\u7c21\u5358\u306a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\uff09\u3092\u63d0\u4f9b\u3059\u308b \u30a2\u30e9\u30fc\u30c8\u3084\u30ed\u30ae\u30f3\u30b0\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6e08\u307f\u306e\u30c7\u30fc\u30bf\u306e\u524a\u9664\u3092\u884c\u3046 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64 EdgeX Foundry \u306e\u5916\u306b\u30c7\u30fc\u30bf\u3092\u9001\u51fa\u3059\u308b \u306a\u5177\u5408\u3067\u3059\u3002 \u5b9f\u88c5\u306f\u3001Fuji \u30ea\u30ea\u30fc\u30b9\u3067\u306f\u4e00\u90e8 Java \u3082\u6b8b\u3063\u3066\u3044\u307e\u3059\u304c\u3001Go \u8a00\u8a9e\u3068 C \u8a00\u8a9e\u304c\u4e3b\u306e\u3088\u3046\u3067\u3059\u3002\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u8981\u4ef6\u306f\u53b3\u3057\u304f\u306a\u304f\u3001Raspberry Pi 4 \u306e\u3088\u3046\u306a\u5c0f\u3055\u306a\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b\u307b\u304b\u3001Docker Compose \u3067\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u305f\u308a\u3001Ubuntu \u3067\u306f Snap \u306b\u3088\u308b\u5c0e\u5165\u3082\u53ef\u80fd\u3067\u3059\u3002 \u307e\u305f\u3001\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3067\u3042\u308a\u3001\u958b\u767a\u306f GitHub \u4e0a\u3067\u76db\u3093\u306b\u884c\u308f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u8208\u5473\u304c\u3042\u308c\u3070\u30b3\u30f3\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3082\u53ef\u80fd\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5c64\u3084\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u5c64\u306e\u5b9f\u88c5\u306e\u305f\u3081\u306b\u306f SDK \u3082\u63d0\u4f9b\u3055\u308c\u3066\u304a\u308a\u3001\u958b\u767a\u306b\u53c2\u52a0\u3082\u3067\u304d\u307e\u3059\u3002","title":"EdgeX Foundry \u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"},{"location":"fuji/lab1-overview/#_1","text":"GitHub ( edgexfoundry ) \u30e1\u30a4\u30f3\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7fa4\u3067\u3059 GitHub ( edgexfoundry-holding ) GA \u3055\u308c\u3066\u3044\u306a\u3044\u958b\u767a\u4e2d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7fa4\u3067\u3059 \u3053\u306e\u914d\u4e0b\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001\u516c\u5f0f\u306b\u306f\u30b5\u30dd\u30fc\u30c8\u304c\u63d0\u4f9b\u3055\u308c\u307e\u305b\u3093 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u7528\u306e SDK \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u7528\u306e SDK","title":"\u53c2\u8003\u30ea\u30f3\u30af"},{"location":"fuji/lab2-gettingstarted/","text":"Lab 2 - \u5c0e\u5165\u3068\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d \u00b6 \u3053\u306e\u30e9\u30dc\u3067\u306f\u3001EdgeX Foundry \u3092\u52d5\u4f5c\u3055\u305b\u3001\u30c6\u30b9\u30c8\u7528\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u304c\u84c4\u7a4d\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f \u00b6 GitHub \u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\u30af\u30ed\u30fc\u30f3\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002 1 git clone https://github.com/kurokobo/edgex-lab-handson.git \u3053\u306e\u30e9\u30dc\u3067\u306f\u3001 lab02 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u307e\u3059\u3002 1 cd lab02 EdgeX Foundry \u306e\u8d77\u52d5 \u00b6 \u5fc5\u8981\u306a\u69cb\u6210\u306f\u3001\u3059\u3079\u3066 docker-compose.yml \u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u307e\u305a\u306f\u3001\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3092 Docker Hub \u304b\u3089\u30d7\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ docker-compose pull Pulling volume ... done Pulling consul ... done Pulling config-seed ... done Pulling mongo ... done Pulling logging ... done Pulling system ... done Pulling notifications ... done Pulling metadata ... done Pulling data ... done Pulling command ... done Pulling scheduler ... done Pulling app-service-rules ... done Pulling rulesengine ... done Pulling export-client ... done Pulling export-distro ... done Pulling device-virtual ... done Pulling ui ... done Pulling portainer ... done \u30d7\u30eb\u3067\u304d\u305f\u3089\u3001\u30c7\u30bf\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker-compose up -d Creating network \"lab01_edgex-network\" with driver \"bridge\" Creating network \"lab01_default\" with the default driver Creating edgex-files ... done Creating lab01_portainer_1 ... done Creating edgex-core-consul ... done Creating edgex-mongo ... done Creating edgex-config-seed ... done Creating edgex-support-logging ... done Creating edgex-core-metadata ... done Creating edgex-sys-mgmt-agent ... done Creating edgex-support-notifications ... done Creating edgex-core-data ... done Creating edgex-support-scheduler ... done Creating edgex-core-command ... done Creating edgex-app-service-configurable-rules ... done Creating edgex-export-client ... done Creating edgex-ui-go ... done Creating edgex-device-virtual ... done Creating edgex-export-distro ... done Creating edgex-support-rulesengine ... done docker-compose up -d \u304c\u30a8\u30e9\u30fc\u306a\u304f\u5b8c\u4e86\u3057\u305f\u3089\u3001 docker-compose ps \u3067 edgex-config-seed \u4ee5\u5916\u306e Status \u304c Up \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker-compose ps Name Command State Ports ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- edgex-app-service-configurable-rules /app-service-configurable ... Up 48095 /tcp, 0 .0.0.0:48100->48100/tcp edgex-config-seed /edgex/cmd/config-seed/con ... Exit 0 edgex-core-command /core-command --registry - ... Up 0 .0.0.0:48082->48082/tcp edgex-core-consul docker-entrypoint.sh agent ... Up 8300 /tcp, 8301 /tcp, 8301 /udp, 8302 /tcp, 8302 /udp, 0 .0.0.0:8400->8400/tcp, 0 .0.0.0:8500->8500/tcp, 8600 /tcp, 8600 /udp edgex-core-data /core-data --registry --pr ... Up 0 .0.0.0:48080->48080/tcp, 0 .0.0.0:5563->5563/tcp edgex-core-metadata /core-metadata --registry ... Up 0 .0.0.0:48081->48081/tcp, 48082 /tcp edgex-device-virtual /device-virtual --profile = ... Up 0 .0.0.0:49990->49990/tcp edgex-export-client /export-client --registry ... Up 0 .0.0.0:48071->48071/tcp edgex-export-distro /export-distro --registry ... Up 0 .0.0.0:48070->48070/tcp, 0 .0.0.0:5566->5566/tcp edgex-files /bin/sh -c /usr/bin/tail - ... Up edgex-mongo /edgex-mongo/bin/edgex-mon ... Up 0 .0.0.0:27017->27017/tcp edgex-support-logging /support-logging --registr ... Up 0 .0.0.0:48061->48061/tcp edgex-support-notifications /support-notifications --r ... Up 0 .0.0.0:48060->48060/tcp edgex-support-rulesengine /bin/sh -c java -jar -Djav ... Up 0 .0.0.0:48075->48075/tcp edgex-support-scheduler /support-scheduler --regis ... Up 0 .0.0.0:48085->48085/tcp edgex-sys-mgmt-agent /sys-mgmt-agent --registry ... Up 0 .0.0.0:48090->48090/tcp edgex-ui-go ./edgex-ui-server Up 0 .0.0.0:4000->4000/tcp lab01_portainer_1 /portainer -H unix:///var/ ... Up 0 .0.0.0:9000->9000/tcp \u69cb\u6210\u306e\u78ba\u8a8d \u00b6 \u3053\u306e\u6bb5\u968e\u3067\u3001\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u4e00\u901a\u308a\u306e\u30e2\u30ce\u306f\u3059\u3067\u306b\u7a3c\u50cd\u3057\u3066\u3044\u307e\u3059\u3002 EdgeX Foundry \u3067\u5236\u5fa1\u3057\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u3053\u306e\u6642\u70b9\u3067\u306f\u7269\u7406\u7684\u306b\u306f\u5b58\u5728\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u7528\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u304c\u521d\u671f\u72b6\u614b\u3067\u3044\u304f\u3064\u304b\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u56f3\u4e2d\u306b\u8d64\u67a0\u3067\u793a\u3057\u305f\u3082\u306e\u3067\u3001 \u30c7\u30d0\u30a4\u30b9 \u30e9\u30f3\u30c0\u30e0\u306a\u5024\u3092\u751f\u6210\u3057\u7d9a\u3051\u308b\u3060\u3051\u306e\u30c7\u30d0\u30a4\u30b9 \u3072\u3068\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u304c\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3064 \u3053\u3053\u3067\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3068\u3084\u308a\u53d6\u308a\u3067\u304d\u308b\u60c5\u5831\u306e\u7a2e\u985e\u306e\u3053\u3068 \u4f8b\u3048\u3070\u3001\u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u3072\u3068\u3064 Random-Float-Device \u3067\u3042\u308c\u3070\u3001Float32 \u3068 Float64 \u3068\u3044\u3046\u4e8c\u7a2e\u985e\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u5225\u3005\u306b\u5236\u5fa1\u3067\u304d\u308b \u3053\u308c\u306f\u5177\u4f53\u7684\u306b\u306f\u3001\u4f8b\u3048\u3070\u300e\u7a7a\u8abf\u30bb\u30f3\u30b5\u300f\u3068\u3044\u3046\u4e00\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u304c\u300e\u6e29\u5ea6\u300f\u3068\u300e\u6e7f\u5ea6\u300f\u306e\u4e8c\u3064\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u72b6\u614b \u5916\u90e8\u304b\u3089\u3001\u6307\u5b9a\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3092\u8aad\u307f\u53d6\u308c\u308b \u5916\u90e8\u304b\u3089\u3001\u6307\u5b9a\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u5024\u306e\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u8a2d\u5b9a\u3067\u304d\u308b \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 \u524d\u8ff0\u306e\u30c7\u30d0\u30a4\u30b9\u7fa4\uff084 \u3064\uff09\u3092\u7ba1\u7406\u3059\u308b\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9 \u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306b\u4e00\u5b9a\u306e\u9593\u9694\u3067\u6240\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5024\u3092\u53d6\u5f97\u3057\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u84c4\u7a4d\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e GET \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5024\u3092\u53d6\u5f97\u3057\u3066\u8fd4\u3059 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e POST \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u5024\u306e\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u5909\u66f4\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u9001\u3089\u308c\u305f\u5024\u3092\u84c4\u7a4d\u3059\u308b \uff08GUI \u3084 API \u3092\u901a\u3058\u3066\u4f9d\u983c\u3055\u308c\u305f\uff09\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b GET \u3084 POST \u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b\u6307\u793a\u3059\u308b \u306e\u3088\u3046\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3059\u306a\u308f\u3061\u3001\u6700\u7d42\u7684\u306b\u884c\u3044\u305f\u3044\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30bb\u30f3\u30b7\u30f3\u30b0\u3068\u305d\u306e\u5024\u306e\u84c4\u7a4d\u3001\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u304c\u3001\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3067\u306f\u306a\u3044\u3082\u306e\u306e\u3001\u4eee\u60f3\u7684\u306a\u30c7\u30d0\u30a4\u30b9\u3068\u3057\u3066\u3059\u3067\u306b\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u5b9f\u4e16\u754c\u3067\u3044\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u306f\u4f55\u3089\u304b\u306e\u88c5\u7f6e\uff08\u30b9\u30a4\u30c3\u30c1\u3068\u304b\u30bb\u30f3\u30b5\u3068\u304b\u30ab\u30e1\u30e9\u3068\u304b\u3044\u308d\u3044\u308d\uff09\u3067\u3042\u308a\u3001\u5916\u90e8\u304b\u3089\u306f\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306b\u3055\u307e\u3056\u307e\u306a\u624b\u9806\u3067\u60c5\u5831\u3092\u53d6\u5f97\u3057\u305f\u308a\u5236\u5fa1\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u305d\u3046\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u5dee\u7570\u3092\u62bd\u8c61\u5316\u3057\u305f\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u3068\u3057\u3066\u632f\u821e\u3044\u3001\u30c7\u30d0\u30a4\u30b9\u7a2e\u5225\u3054\u3068\u306b\u5358\u4e00\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u308f\u3051\u3067\u3059\u3002 \u64cd\u4f5c\u624b\u6bb5 \u00b6 \u64cd\u4f5c\u306f GUI\u3001CLI\u3001REST API \u306e\u4e09\u7a2e\u985e\u3067\u884c\u3048\u307e\u3059\u3002 \u3068\u3044\u3063\u3066\u3082\u3001\u65e5\u5e38\u7684\u306b\u4f55\u3089\u304b\u306e\u64cd\u4f5c\u3092\u3059\u3079\u304d\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u6700\u521d\u306e\u69cb\u7bc9\u6642\u70b9\u3067\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332\u3060\u3063\u305f\u308a\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a\u3060\u3063\u305f\u308a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u69cb\u6210\u3060\u3063\u305f\u308a\u3092\u3057\u3066\u3057\u307e\u3063\u305f\u3042\u3068\u306f\u3001\u3042\u3068\u306f\u7c9b\u3005\u3068\u904b\u7528\u3057\u7d9a\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u3001GUI \u304c\u30ea\u30c3\u30c1\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u305d\u3046\u3044\u3046\u5229\u7528\u5b9f\u614b\u3092\u8003\u3048\u308c\u3070\u305d\u3046\u3044\u3046\u3082\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u539f\u5247\u3001\u3059\u3079\u3066\u306e\u64cd\u4f5c\u304c REST API \u3092\u4ecb\u3057\u3066\u884c\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u57fa\u672c\u7684\u306b\u306f Postman \u306a\u3069\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066 API \u3092\u53e9\u304f\u3082\u306e\u3060\u3068\u601d\u3063\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002 GUI \u3067\u306e\u64cd\u4f5c \u00b6 edgex-ui-go \u304c\u6a19\u6e96\u306e Web GUI \u3067\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u3067 4000 \u756a\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6 admin \uff08\u30d1\u30b9\u30ef\u30fc\u30c9\u3082 admin\uff09\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002 Docker \u30db\u30b9\u30c8\u306e IP \u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u3001 http://<IP \u30a2\u30c9\u30ec\u30b9>:4000/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002 \u3053\u306e GUI \u3092\u901a\u3058\u3066\u3082\u308d\u3082\u308d\u3092\u64cd\u4f5c\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u307e\u305a\u306f\u3053\u306e GUI \u3067\u64cd\u4f5c\u3059\u308b\u5bfe\u8c61\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002[ Gateway ] \u306e [ Add ] \u30dc\u30bf\u30f3\u3067\u3001Docker \u30db\u30b9\u30c8\u306e IP \u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3057\u307e\u3059\u3002 \u767b\u9332\u3057\u305f\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067 [Device Service] \u306b\u9077\u79fb\u3059\u308b\u3068\u3001\u5148\u8ff0\u306e device-virtual \u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u304c\u898b\u3048\u308b\u306f\u305a\u3067\u3059\u3002 \u3055\u3089\u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 device-virtual \u306e [ Devices ] \u30a2\u30a4\u30b3\u30f3\u3092\u5c55\u958b\u3059\u308b\u3068\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u7d4c\u7531\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u3001\u5148\u306e\u56f3\u3067\u8d64\u67a0\u3067\u793a\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u7fa4\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u3055\u3089\u306b\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306e [ Commands ] \u3092\u5c55\u958b\u3059\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u306e\u53d6\u5f97\u3084\u3001\u5236\u5fa1\u547d\u4ee4\u306e\u5b9f\u884c\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u5225\u306e GUI \u5225\u306e GUI \u304c\u6b32\u3057\u3044\u5834\u5408\u3001 edgex-ui-closure \u3068\u3044\u3046\u3001EdgeX Foundry \u306e\u5546\u7528\u7248\u3067\u3042\u308b Edge Xpert \u306e GUI \u306e\u30d9\u30fc\u30b9\u306b\u306a\u3063\u305f\u3082\u306e\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002 \u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3067\u3082\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002 CLI \u3067\u306e\u64cd\u4f5c \u00b6 CLI \u3068\u3057\u3066\u3001\u73fe\u6642\u70b9\u3067\u306f\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a\u30ea\u30ea\u30fc\u30b9\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001 edgex-cli \u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002Go \u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u3066\u3001\u5229\u7528\u3059\u308b\u306b\u306f\u81ea\u5206\u3067 make \u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u672c\u30e9\u30dc\u3067\u306f\u7701\u7565\u3057\u307e\u3059\u304c\u3001 \u30ea\u30dd\u30b8\u30c8\u30ea \u306b\u5c0e\u5165\u624b\u9806\u304c\u3042\u308a\u3001\u307e\u305f \u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3067\u306f\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u306e\u4f7f\u7528\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002 API \u3067\u306e\u64cd\u4f5c \u00b6 GUI \u3082 CLI \u3082\u7d50\u5c40\u306f REST API \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u6574\u5f62\u3057\u3066\u8868\u793a\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u3053\u308c\u304c\u3044\u3061\u3070\u3093\u751f\u3005\u3057\u304f\u89e6\u308c\u308b\u624b\u6bb5\u3067\u3059\u3002\u3053\u308c\u3067\u3067\u304d\u306a\u3044\u64cd\u4f5c\u306f\u57fa\u672c\u7684\u306b\u306f\u306a\u3044\u306f\u305a\u306a\u306e\u3067\u3001\u3067\u304d\u306a\u304b\u3063\u305f\u3089\u3042\u304d\u3089\u3081\u307e\u3057\u3087\u3046\u2026\u2026\u3002 \u305f\u3060\u306e REST API \u306a\u306e\u3067\u3001\u7d30\u304b\u304f\u306f \u516c\u5f0f\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 \u3092\u53c2\u7167\u3057\u3066\u3082\u3089\u3048\u308c\u3070\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3084\u30c7\u30d0\u30a4\u30b9\u306e\u4e00\u89a7\u306f\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b GET \u3092\u6295\u3052\u308b\u3068 JSON \u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u4e00\u89a7 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a73\u7d30 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice/name/<\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u540d> \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u540d\u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f name \u306e\u5024 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice/<\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 ID> \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 ID \u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f id \u306e\u5024 \u30c7\u30d0\u30a4\u30b9\u306e\u4e00\u89a7 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device \u30c7\u30d0\u30a4\u30b9\u306e\u8a73\u7d30 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device/name/<\u30c7\u30d0\u30a4\u30b9\u540d> \u30c7\u30d0\u30a4\u30b9\u540d\u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f name \u306e\u5024 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device/<\u30c7\u30d0\u30a4\u30b9 ID> \u30c7\u30d0\u30a4\u30b9 ID \u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f id \u306e\u5024 \u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d \u00b6 \u5148\u8ff0\u306e\u901a\u308a\u3001\u672b\u7aef\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3067\u751f\u6210\u3055\u308c\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u5024\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 virtual-device \u3092\u901a\u3058\u3066\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u84c4\u7a4d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u969b\u306b\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u84c4\u7a4d\u3055\u308c\u305f\u5024\u3092\u8997\u304d\u306b\u884c\u304d\u307e\u3059\u3002 \u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u69cb\u9020 \u00b6 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u4e00\u3064\u4ee5\u4e0a\u306e Reading \u3092\u542b\u3080 Event \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 POST \u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308a\u307e\u3059\u3002 Reading \u5358\u4e00\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5358\u4e00\u306e\u30ea\u30bd\u30fc\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u5024\u306e\u60c5\u5831 Event \u3042\u308b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u4e00\u56de\u306e\u51e6\u7406\u3067\u5358\u4e00\u306e\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u4e00\u3064\u4ee5\u4e0a\u306e Reading \u306e\u96c6\u5408 \u4f8b\u3048\u3070\u300e\u6e29\u5ea6\u3068\u6e7f\u5ea6\u306f\u30bb\u30c3\u30c8\u3067 GET \u3059\u308b\u300f\u3088\u3046\u306a\u69cb\u6210\u3092\u7d44\u3093\u3060\u5834\u5408\u306f\u3001\u3072\u3068\u3064\u306e Event \u306b\u4e8c\u3064\u306e Reading \u304c\u542b\u307e\u308c\u308b API \u3067\u306e\u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d \u00b6 Event \u3092\u53d6\u5f97\u3059\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u3001URL \u306b\u30c7\u30d0\u30a4\u30b9\u540d\u3084\u53d6\u5f97\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u6570\u3092\u6307\u5b9a\u3057\u3066 GET \u3059\u308b\u3068\u3001 Reading \u3092\u542b\u3080\u60c5\u5831\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\u4eca\u56de\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3067\u306f\u3001\u3072\u3068\u3064\u306e Event \u306b\u306f\u3072\u3068\u3064\u306e Reading \u304c\u542b\u307e\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 $ curl -s http://localhost:48080/api/v1/event/device/Random-Float-Device/2 | jq [ { \"id\" : \"4949fc7f-069b-49b1-bc52-f905c5109692\" , \"device\" : \"Random-Float-Device\" , \"created\" : 1579419158139 , \"modified\" : 1579419158139 , \"origin\" : 1579419158137800200 , \"readings\" : [ { \"id\" : \"6dcac272-28ad-4755-972f-ad58b02aa000\" , \"created\" : 1579419158138 , \"origin\" : 1579419158124917000 , \"modified\" : 1579419158138 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float32\" , \"value\" : \"fvU+Nw==\" } ] } , { \"id\" : \"f4f62305-ce8c-4f19-960b-ba2977ab0b2b\" , \"device\" : \"Random-Float-Device\" , \"created\" : 1579419157643 , \"modified\" : 1579419157643 , \"origin\" : 1579419157642273800 , \"readings\" : [ { \"id\" : \"227aa868-6dbe-4e53-af27-c773075eac85\" , \"created\" : 1579419157642 , \"origin\" : 1579419157630999000 , \"modified\" : 1579419157642 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"1.258607e+308\" } ] } ] \u7279\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u60c5\u5831\u306b\u7d5e\u308a\u305f\u3044\u5834\u5408\u306f\u3001 Reading \u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3057\u3066 GET \u3057\u307e\u3059 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ curl -s http://localhost:48080/api/v1/reading/name/Float64/2 | jq [ { \"id\" : \"e1e950c0-7533-4664-a606-91c97e8dbb85\" , \"created\" : 1579419397777 , \"origin\" : 1579419397752820200 , \"modified\" : 1579419397777 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"8.073392e+305\" } , { \"id\" : \"2b30bdf3-cb3e-4bac-bd20-87653e9259f2\" , \"created\" : 1579419367748 , \"origin\" : 1579419367735956200 , \"modified\" : 1579419367748 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"-3.105079e+307\" } ] \u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u6570\u5024\u306e\u30c7\u30b3\u30fc\u30c9 \u00b6 \u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u305f\u969b\u3001 Float32 \u306e\u5024\u304c /oyN8A== \u306e\u3088\u3046\u306b\u6587\u5b57\u5217\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5185\u90e8\u7684\u306b\u306f\u3053\u306e\u578b\u306e\u6570\u5024\uff08\u3092\u8868\u3059\u30d0\u30a4\u30c8\u5217\uff09\u3092 Base64 \u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002 \u6570\u5024\u3092\u4fdd\u6301\u3059\u308b\u969b\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u6709\u7121\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3068\u304d\u306b\u4f5c\u6210\u3059\u308b\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u4e8b\u524d\u69cb\u6210\u6e08\u307f\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u306b\u5f93\u3063\u3066\u3053\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u6570\u5024\u306f\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u6570\u5024\u306b\u623b\u305b\u307e\u3059\u3002\u3082\u3063\u3068\u3044\u3044\u3084\u308a\u65b9\u304c\u3042\u308a\u305d\u3046\u306a\u6c17\u306f\u3057\u307e\u3059\u304c\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067 \u9069\u5f53\u306a\u30c7\u30b3\u30fc\u30c0\u3092\u4f5c\u308a\u307e\u3057\u305f \u3002Go \u304c\u52d5\u304f\u74b0\u5883\uff08CLI \u3067\u306e\u64cd\u4f5c\u3067\u4f7f\u3063\u305f\u30b3\u30f3\u30c6\u30ca\u5185\u306a\u3069\uff09\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002 1 2 3 4 $ git clone https://github.com/kurokobo/edgex-decode-base64.git $ cd edgex-decode-base64/ $ go run main.go /eOKAw == 8 .163255e-37 \u751f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u63a2\u7d22 \u00b6 \u3068\u3053\u308d\u3067\u3001API \u3067\u751f\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u308b\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3089\u306e\u30c7\u30fc\u30bf\u306f MongoDB \u306b\u4fdd\u7ba1\u3055\u308c\u3066\u3044\u307e\u3059\u3002MongoDB \u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u5916\u90e8\u304b\u3089 MongoDB Compass \u306a\u3069\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5834\u5408\u306f\u3001\u30dd\u30fc\u30c8 27017 \u306b\u30e6\u30fc\u30b6\u540d core \u3001\u30d1\u30b9\u30ef\u30fc\u30c9 password \u3067\u8a8d\u8a3c\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u30b7\u30a7\u30eb\u306b\u5165\u3063\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002 edgex-mongo \u304c\u3001MongoDB \u306e\u5b9f\u4f53\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u3059\u3002\u3053\u308c\u306e\u30b7\u30a7\u30eb\u3092\u53d6\u3063\u3066\u3001MongoDB \u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u5165\u308a\u307e\u3059\u3002\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $ docker exec -it edgex-mongo bash # mongo MongoDB shell version v4.2.0 ... > show databases admin 0 .000GB application-service 0 .000GB config 0 .000GB coredata 0 .011GB exportclient 0 .000GB local 0 .000GB logging 0 .006GB metadata 0 .000GB notifications 0 .000GB scheduler 0 .000GB Event \u3068 Reading \u306e\u5024\u306f\u3001 coredata \u5185\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u4fdd\u6301\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 > use coredata switched to db coredata > show collections event reading valueDescriptor \u3042\u3068\u306f MongoDB \u306e\u304a\u4f5c\u6cd5\u306b\u5f93\u3063\u3066 find() \u306a\u3069\u3092\u53e9\u304f\u306e\u307f\u3067\u3059\u3002\u904a\u3093\u3060\u3089 exit \u3067\u629c\u3051\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 > db . reading . find (). limit ( 5 ) { \"_id\" : ObjectId ( \"5e2471bb0e360800014be635\" ), \"created\" : NumberLong ( \"1579446715833\" ), \"modified\" : NumberLong ( \"1579446715833\" ), \"origin\" : NumberLong ( \"1579446715806322700\" ), \"uuid\" : \"e0af3c99-be57-4cec-a59a-2af2da976d41\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Boolean-Device\" , \"name\" : \"Bool\" , \"value\" : \"true\" } { \"_id\" : ObjectId ( \"5e2471bb0e360800014be637\" ), \"created\" : NumberLong ( \"1579446715857\" ), \"modified\" : NumberLong ( \"1579446715857\" ), \"origin\" : NumberLong ( \"1579446715831613700\" ), \"uuid\" : \"c336b11e-8e91-4007-bd3f-1ee63d80e45b\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Boolean-Device\" , \"name\" : \"Bool\" , \"value\" : \"false\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be639\" ), \"created\" : NumberLong ( \"1579446720829\" ), \"modified\" : NumberLong ( \"1579446720829\" ), \"origin\" : NumberLong ( \"1579446720815333700\" ), \"uuid\" : \"2ae4befc-1fee-48ab-b621-b4d56747a446\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int16\" , \"value\" : \"9761\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be63b\" ), \"created\" : NumberLong ( \"1579446720843\" ), \"modified\" : NumberLong ( \"1579446720843\" ), \"origin\" : NumberLong ( \"1579446720830168500\" ), \"uuid\" : \"317ea1f1-0c36-4e6d-a489-b48711ff5dd6\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int64\" , \"value\" : \"-9069744988884413669\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be63d\" ), \"created\" : NumberLong ( \"1579446720857\" ), \"modified\" : NumberLong ( \"1579446720857\" ), \"origin\" : NumberLong ( \"1579446720841898700\" ), \"uuid\" : \"5be3634e-b171-4849-9bac-f13de720c11e\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int32\" , \"value\" : \"-913901160\" } > exit # exit \u74b0\u5883\u306e\u505c\u6b62 \u00b6 \u5f8c\u7d9a\u306e\u30e9\u30dc\u3067\u306f\u3001\u73fe\u5728\u5229\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u306f\u5225\u306e docker-compose.yml \u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002 \u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3068\u3001\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u305f\u6c38\u7d9a\u30dc\u30ea\u30e5\u30fc\u30e0\u9818\u57df\u3092\u524a\u9664\u3057\u307e\u3059\u3002 1 2 3 4 $ docker-compose down --volumes Stopping edgex-device-virtual ... done ... Removing image portainer/portainer \u30d7\u30eb\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u5f8c\u7d9a\u306e\u30e9\u30dc\u3067\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001 --rmi all \u306f\u6307\u5b9a\u3057\u307e\u305b\u3093\u3002 \u307e\u3068\u3081 \u00b6 EdgeX Foundry \u3092\u8d77\u52d5\u3055\u305b\u3066\u3001\u4eee\u60f3\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u305f\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3084\u84c4\u7a4d\u3063\u3077\u308a\u304c\u3001GUI \u3084 CLI\u3001API \u306a\u3069\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002","title":"Lab 2 - \u5c0e\u5165\u3068\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d"},{"location":"fuji/lab2-gettingstarted/#lab-2-","text":"\u3053\u306e\u30e9\u30dc\u3067\u306f\u3001EdgeX Foundry \u3092\u52d5\u4f5c\u3055\u305b\u3001\u30c6\u30b9\u30c8\u7528\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u304c\u84c4\u7a4d\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002","title":"Lab 2 - \u5c0e\u5165\u3068\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d"},{"location":"fuji/lab2-gettingstarted/#_1","text":"GitHub \u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\u30af\u30ed\u30fc\u30f3\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002 1 git clone https://github.com/kurokobo/edgex-lab-handson.git \u3053\u306e\u30e9\u30dc\u3067\u306f\u3001 lab02 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u307e\u3059\u3002 1 cd lab02","title":"\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f"},{"location":"fuji/lab2-gettingstarted/#edgex-foundry","text":"\u5fc5\u8981\u306a\u69cb\u6210\u306f\u3001\u3059\u3079\u3066 docker-compose.yml \u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u307e\u305a\u306f\u3001\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3092 Docker Hub \u304b\u3089\u30d7\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ docker-compose pull Pulling volume ... done Pulling consul ... done Pulling config-seed ... done Pulling mongo ... done Pulling logging ... done Pulling system ... done Pulling notifications ... done Pulling metadata ... done Pulling data ... done Pulling command ... done Pulling scheduler ... done Pulling app-service-rules ... done Pulling rulesengine ... done Pulling export-client ... done Pulling export-distro ... done Pulling device-virtual ... done Pulling ui ... done Pulling portainer ... done \u30d7\u30eb\u3067\u304d\u305f\u3089\u3001\u30c7\u30bf\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker-compose up -d Creating network \"lab01_edgex-network\" with driver \"bridge\" Creating network \"lab01_default\" with the default driver Creating edgex-files ... done Creating lab01_portainer_1 ... done Creating edgex-core-consul ... done Creating edgex-mongo ... done Creating edgex-config-seed ... done Creating edgex-support-logging ... done Creating edgex-core-metadata ... done Creating edgex-sys-mgmt-agent ... done Creating edgex-support-notifications ... done Creating edgex-core-data ... done Creating edgex-support-scheduler ... done Creating edgex-core-command ... done Creating edgex-app-service-configurable-rules ... done Creating edgex-export-client ... done Creating edgex-ui-go ... done Creating edgex-device-virtual ... done Creating edgex-export-distro ... done Creating edgex-support-rulesengine ... done docker-compose up -d \u304c\u30a8\u30e9\u30fc\u306a\u304f\u5b8c\u4e86\u3057\u305f\u3089\u3001 docker-compose ps \u3067 edgex-config-seed \u4ee5\u5916\u306e Status \u304c Up \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ docker-compose ps Name Command State Ports ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- edgex-app-service-configurable-rules /app-service-configurable ... Up 48095 /tcp, 0 .0.0.0:48100->48100/tcp edgex-config-seed /edgex/cmd/config-seed/con ... Exit 0 edgex-core-command /core-command --registry - ... Up 0 .0.0.0:48082->48082/tcp edgex-core-consul docker-entrypoint.sh agent ... Up 8300 /tcp, 8301 /tcp, 8301 /udp, 8302 /tcp, 8302 /udp, 0 .0.0.0:8400->8400/tcp, 0 .0.0.0:8500->8500/tcp, 8600 /tcp, 8600 /udp edgex-core-data /core-data --registry --pr ... Up 0 .0.0.0:48080->48080/tcp, 0 .0.0.0:5563->5563/tcp edgex-core-metadata /core-metadata --registry ... Up 0 .0.0.0:48081->48081/tcp, 48082 /tcp edgex-device-virtual /device-virtual --profile = ... Up 0 .0.0.0:49990->49990/tcp edgex-export-client /export-client --registry ... Up 0 .0.0.0:48071->48071/tcp edgex-export-distro /export-distro --registry ... Up 0 .0.0.0:48070->48070/tcp, 0 .0.0.0:5566->5566/tcp edgex-files /bin/sh -c /usr/bin/tail - ... Up edgex-mongo /edgex-mongo/bin/edgex-mon ... Up 0 .0.0.0:27017->27017/tcp edgex-support-logging /support-logging --registr ... Up 0 .0.0.0:48061->48061/tcp edgex-support-notifications /support-notifications --r ... Up 0 .0.0.0:48060->48060/tcp edgex-support-rulesengine /bin/sh -c java -jar -Djav ... Up 0 .0.0.0:48075->48075/tcp edgex-support-scheduler /support-scheduler --regis ... Up 0 .0.0.0:48085->48085/tcp edgex-sys-mgmt-agent /sys-mgmt-agent --registry ... Up 0 .0.0.0:48090->48090/tcp edgex-ui-go ./edgex-ui-server Up 0 .0.0.0:4000->4000/tcp lab01_portainer_1 /portainer -H unix:///var/ ... Up 0 .0.0.0:9000->9000/tcp","title":"EdgeX Foundry \u306e\u8d77\u52d5"},{"location":"fuji/lab2-gettingstarted/#_2","text":"\u3053\u306e\u6bb5\u968e\u3067\u3001\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u4e00\u901a\u308a\u306e\u30e2\u30ce\u306f\u3059\u3067\u306b\u7a3c\u50cd\u3057\u3066\u3044\u307e\u3059\u3002 EdgeX Foundry \u3067\u5236\u5fa1\u3057\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u3053\u306e\u6642\u70b9\u3067\u306f\u7269\u7406\u7684\u306b\u306f\u5b58\u5728\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u7528\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u304c\u521d\u671f\u72b6\u614b\u3067\u3044\u304f\u3064\u304b\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u56f3\u4e2d\u306b\u8d64\u67a0\u3067\u793a\u3057\u305f\u3082\u306e\u3067\u3001 \u30c7\u30d0\u30a4\u30b9 \u30e9\u30f3\u30c0\u30e0\u306a\u5024\u3092\u751f\u6210\u3057\u7d9a\u3051\u308b\u3060\u3051\u306e\u30c7\u30d0\u30a4\u30b9 \u3072\u3068\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u304c\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3064 \u3053\u3053\u3067\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3068\u3084\u308a\u53d6\u308a\u3067\u304d\u308b\u60c5\u5831\u306e\u7a2e\u985e\u306e\u3053\u3068 \u4f8b\u3048\u3070\u3001\u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u3072\u3068\u3064 Random-Float-Device \u3067\u3042\u308c\u3070\u3001Float32 \u3068 Float64 \u3068\u3044\u3046\u4e8c\u7a2e\u985e\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u5225\u3005\u306b\u5236\u5fa1\u3067\u304d\u308b \u3053\u308c\u306f\u5177\u4f53\u7684\u306b\u306f\u3001\u4f8b\u3048\u3070\u300e\u7a7a\u8abf\u30bb\u30f3\u30b5\u300f\u3068\u3044\u3046\u4e00\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u304c\u300e\u6e29\u5ea6\u300f\u3068\u300e\u6e7f\u5ea6\u300f\u306e\u4e8c\u3064\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u72b6\u614b \u5916\u90e8\u304b\u3089\u3001\u6307\u5b9a\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3092\u8aad\u307f\u53d6\u308c\u308b \u5916\u90e8\u304b\u3089\u3001\u6307\u5b9a\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u5024\u306e\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u8a2d\u5b9a\u3067\u304d\u308b \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 \u524d\u8ff0\u306e\u30c7\u30d0\u30a4\u30b9\u7fa4\uff084 \u3064\uff09\u3092\u7ba1\u7406\u3059\u308b\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9 \u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306b\u4e00\u5b9a\u306e\u9593\u9694\u3067\u6240\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5024\u3092\u53d6\u5f97\u3057\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u84c4\u7a4d\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e GET \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5024\u3092\u53d6\u5f97\u3057\u3066\u8fd4\u3059 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u3042\u308b\u30ea\u30bd\u30fc\u30b9\u3078\u306e POST \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u6570\u5024\u306e\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u5909\u66f4\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u9001\u3089\u308c\u305f\u5024\u3092\u84c4\u7a4d\u3059\u308b \uff08GUI \u3084 API \u3092\u901a\u3058\u3066\u4f9d\u983c\u3055\u308c\u305f\uff09\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b GET \u3084 POST \u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b\u6307\u793a\u3059\u308b \u306e\u3088\u3046\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3059\u306a\u308f\u3061\u3001\u6700\u7d42\u7684\u306b\u884c\u3044\u305f\u3044\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30bb\u30f3\u30b7\u30f3\u30b0\u3068\u305d\u306e\u5024\u306e\u84c4\u7a4d\u3001\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u304c\u3001\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3067\u306f\u306a\u3044\u3082\u306e\u306e\u3001\u4eee\u60f3\u7684\u306a\u30c7\u30d0\u30a4\u30b9\u3068\u3057\u3066\u3059\u3067\u306b\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u5b9f\u4e16\u754c\u3067\u3044\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u306f\u4f55\u3089\u304b\u306e\u88c5\u7f6e\uff08\u30b9\u30a4\u30c3\u30c1\u3068\u304b\u30bb\u30f3\u30b5\u3068\u304b\u30ab\u30e1\u30e9\u3068\u304b\u3044\u308d\u3044\u308d\uff09\u3067\u3042\u308a\u3001\u5916\u90e8\u304b\u3089\u306f\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306b\u3055\u307e\u3056\u307e\u306a\u624b\u9806\u3067\u60c5\u5831\u3092\u53d6\u5f97\u3057\u305f\u308a\u5236\u5fa1\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u305d\u3046\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u5dee\u7570\u3092\u62bd\u8c61\u5316\u3057\u305f\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u3068\u3057\u3066\u632f\u821e\u3044\u3001\u30c7\u30d0\u30a4\u30b9\u7a2e\u5225\u3054\u3068\u306b\u5358\u4e00\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u308f\u3051\u3067\u3059\u3002","title":"\u69cb\u6210\u306e\u78ba\u8a8d"},{"location":"fuji/lab2-gettingstarted/#_3","text":"\u64cd\u4f5c\u306f GUI\u3001CLI\u3001REST API \u306e\u4e09\u7a2e\u985e\u3067\u884c\u3048\u307e\u3059\u3002 \u3068\u3044\u3063\u3066\u3082\u3001\u65e5\u5e38\u7684\u306b\u4f55\u3089\u304b\u306e\u64cd\u4f5c\u3092\u3059\u3079\u304d\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u6700\u521d\u306e\u69cb\u7bc9\u6642\u70b9\u3067\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332\u3060\u3063\u305f\u308a\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a\u3060\u3063\u305f\u308a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u69cb\u6210\u3060\u3063\u305f\u308a\u3092\u3057\u3066\u3057\u307e\u3063\u305f\u3042\u3068\u306f\u3001\u3042\u3068\u306f\u7c9b\u3005\u3068\u904b\u7528\u3057\u7d9a\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u3001GUI \u304c\u30ea\u30c3\u30c1\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u305d\u3046\u3044\u3046\u5229\u7528\u5b9f\u614b\u3092\u8003\u3048\u308c\u3070\u305d\u3046\u3044\u3046\u3082\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u539f\u5247\u3001\u3059\u3079\u3066\u306e\u64cd\u4f5c\u304c REST API \u3092\u4ecb\u3057\u3066\u884c\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u57fa\u672c\u7684\u306b\u306f Postman \u306a\u3069\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066 API \u3092\u53e9\u304f\u3082\u306e\u3060\u3068\u601d\u3063\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002","title":"\u64cd\u4f5c\u624b\u6bb5"},{"location":"fuji/lab2-gettingstarted/#gui","text":"edgex-ui-go \u304c\u6a19\u6e96\u306e Web GUI \u3067\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u3067 4000 \u756a\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6 admin \uff08\u30d1\u30b9\u30ef\u30fc\u30c9\u3082 admin\uff09\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002 Docker \u30db\u30b9\u30c8\u306e IP \u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u3001 http://<IP \u30a2\u30c9\u30ec\u30b9>:4000/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002 \u3053\u306e GUI \u3092\u901a\u3058\u3066\u3082\u308d\u3082\u308d\u3092\u64cd\u4f5c\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u307e\u305a\u306f\u3053\u306e GUI \u3067\u64cd\u4f5c\u3059\u308b\u5bfe\u8c61\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002[ Gateway ] \u306e [ Add ] \u30dc\u30bf\u30f3\u3067\u3001Docker \u30db\u30b9\u30c8\u306e IP \u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3057\u307e\u3059\u3002 \u767b\u9332\u3057\u305f\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067 [Device Service] \u306b\u9077\u79fb\u3059\u308b\u3068\u3001\u5148\u8ff0\u306e device-virtual \u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u304c\u898b\u3048\u308b\u306f\u305a\u3067\u3059\u3002 \u3055\u3089\u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 device-virtual \u306e [ Devices ] \u30a2\u30a4\u30b3\u30f3\u3092\u5c55\u958b\u3059\u308b\u3068\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u7d4c\u7531\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u3001\u5148\u306e\u56f3\u3067\u8d64\u67a0\u3067\u793a\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u7fa4\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u3055\u3089\u306b\u30c7\u30d0\u30a4\u30b9\u3054\u3068\u306e [ Commands ] \u3092\u5c55\u958b\u3059\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u306e\u53d6\u5f97\u3084\u3001\u5236\u5fa1\u547d\u4ee4\u306e\u5b9f\u884c\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u5225\u306e GUI \u5225\u306e GUI \u304c\u6b32\u3057\u3044\u5834\u5408\u3001 edgex-ui-closure \u3068\u3044\u3046\u3001EdgeX Foundry \u306e\u5546\u7528\u7248\u3067\u3042\u308b Edge Xpert \u306e GUI \u306e\u30d9\u30fc\u30b9\u306b\u306a\u3063\u305f\u3082\u306e\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002 \u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3067\u3082\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002","title":"GUI \u3067\u306e\u64cd\u4f5c"},{"location":"fuji/lab2-gettingstarted/#cli","text":"CLI \u3068\u3057\u3066\u3001\u73fe\u6642\u70b9\u3067\u306f\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a\u30ea\u30ea\u30fc\u30b9\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001 edgex-cli \u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u3002Go \u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u3066\u3001\u5229\u7528\u3059\u308b\u306b\u306f\u81ea\u5206\u3067 make \u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u672c\u30e9\u30dc\u3067\u306f\u7701\u7565\u3057\u307e\u3059\u304c\u3001 \u30ea\u30dd\u30b8\u30c8\u30ea \u306b\u5c0e\u5165\u624b\u9806\u304c\u3042\u308a\u3001\u307e\u305f \u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea \u3067\u306f\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u306e\u4f7f\u7528\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002","title":"CLI \u3067\u306e\u64cd\u4f5c"},{"location":"fuji/lab2-gettingstarted/#api","text":"GUI \u3082 CLI \u3082\u7d50\u5c40\u306f REST API \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u6574\u5f62\u3057\u3066\u8868\u793a\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u3053\u308c\u304c\u3044\u3061\u3070\u3093\u751f\u3005\u3057\u304f\u89e6\u308c\u308b\u624b\u6bb5\u3067\u3059\u3002\u3053\u308c\u3067\u3067\u304d\u306a\u3044\u64cd\u4f5c\u306f\u57fa\u672c\u7684\u306b\u306f\u306a\u3044\u306f\u305a\u306a\u306e\u3067\u3001\u3067\u304d\u306a\u304b\u3063\u305f\u3089\u3042\u304d\u3089\u3081\u307e\u3057\u3087\u3046\u2026\u2026\u3002 \u305f\u3060\u306e REST API \u306a\u306e\u3067\u3001\u7d30\u304b\u304f\u306f \u516c\u5f0f\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 \u3092\u53c2\u7167\u3057\u3066\u3082\u3089\u3048\u308c\u3070\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3084\u30c7\u30d0\u30a4\u30b9\u306e\u4e00\u89a7\u306f\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b GET \u3092\u6295\u3052\u308b\u3068 JSON \u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u4e00\u89a7 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a73\u7d30 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice/name/<\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u540d> \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u540d\u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f name \u306e\u5024 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/deviceservice/<\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 ID> \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 ID \u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f id \u306e\u5024 \u30c7\u30d0\u30a4\u30b9\u306e\u4e00\u89a7 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device \u30c7\u30d0\u30a4\u30b9\u306e\u8a73\u7d30 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device/name/<\u30c7\u30d0\u30a4\u30b9\u540d> \u30c7\u30d0\u30a4\u30b9\u540d\u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f name \u306e\u5024 http://<IP \u30a2\u30c9\u30ec\u30b9>:48081/api/v1/device/<\u30c7\u30d0\u30a4\u30b9 ID> \u30c7\u30d0\u30a4\u30b9 ID \u306f\u4e00\u89a7\u3067\u53d6\u5f97\u3067\u304d\u305f id \u306e\u5024","title":"API \u3067\u306e\u64cd\u4f5c"},{"location":"fuji/lab2-gettingstarted/#_4","text":"\u5148\u8ff0\u306e\u901a\u308a\u3001\u672b\u7aef\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3067\u751f\u6210\u3055\u308c\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u5024\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 virtual-device \u3092\u901a\u3058\u3066\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u84c4\u7a4d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u969b\u306b\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u84c4\u7a4d\u3055\u308c\u305f\u5024\u3092\u8997\u304d\u306b\u884c\u304d\u307e\u3059\u3002","title":"\u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d"},{"location":"fuji/lab2-gettingstarted/#_5","text":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u4e00\u3064\u4ee5\u4e0a\u306e Reading \u3092\u542b\u3080 Event \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 POST \u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308a\u307e\u3059\u3002 Reading \u5358\u4e00\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5358\u4e00\u306e\u30ea\u30bd\u30fc\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u5024\u306e\u60c5\u5831 Event \u3042\u308b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u4e00\u56de\u306e\u51e6\u7406\u3067\u5358\u4e00\u306e\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u4e00\u3064\u4ee5\u4e0a\u306e Reading \u306e\u96c6\u5408 \u4f8b\u3048\u3070\u300e\u6e29\u5ea6\u3068\u6e7f\u5ea6\u306f\u30bb\u30c3\u30c8\u3067 GET \u3059\u308b\u300f\u3088\u3046\u306a\u69cb\u6210\u3092\u7d44\u3093\u3060\u5834\u5408\u306f\u3001\u3072\u3068\u3064\u306e Event \u306b\u4e8c\u3064\u306e Reading \u304c\u542b\u307e\u308c\u308b","title":"\u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u69cb\u9020"},{"location":"fuji/lab2-gettingstarted/#api_1","text":"Event \u3092\u53d6\u5f97\u3059\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u3001URL \u306b\u30c7\u30d0\u30a4\u30b9\u540d\u3084\u53d6\u5f97\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u6570\u3092\u6307\u5b9a\u3057\u3066 GET \u3059\u308b\u3068\u3001 Reading \u3092\u542b\u3080\u60c5\u5831\u304c\u5f97\u3089\u308c\u307e\u3059\u3002\u4eca\u56de\u306e\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3067\u306f\u3001\u3072\u3068\u3064\u306e Event \u306b\u306f\u3072\u3068\u3064\u306e Reading \u304c\u542b\u307e\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 $ curl -s http://localhost:48080/api/v1/event/device/Random-Float-Device/2 | jq [ { \"id\" : \"4949fc7f-069b-49b1-bc52-f905c5109692\" , \"device\" : \"Random-Float-Device\" , \"created\" : 1579419158139 , \"modified\" : 1579419158139 , \"origin\" : 1579419158137800200 , \"readings\" : [ { \"id\" : \"6dcac272-28ad-4755-972f-ad58b02aa000\" , \"created\" : 1579419158138 , \"origin\" : 1579419158124917000 , \"modified\" : 1579419158138 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float32\" , \"value\" : \"fvU+Nw==\" } ] } , { \"id\" : \"f4f62305-ce8c-4f19-960b-ba2977ab0b2b\" , \"device\" : \"Random-Float-Device\" , \"created\" : 1579419157643 , \"modified\" : 1579419157643 , \"origin\" : 1579419157642273800 , \"readings\" : [ { \"id\" : \"227aa868-6dbe-4e53-af27-c773075eac85\" , \"created\" : 1579419157642 , \"origin\" : 1579419157630999000 , \"modified\" : 1579419157642 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"1.258607e+308\" } ] } ] \u7279\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u60c5\u5831\u306b\u7d5e\u308a\u305f\u3044\u5834\u5408\u306f\u3001 Reading \u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3057\u3066 GET \u3057\u307e\u3059 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ curl -s http://localhost:48080/api/v1/reading/name/Float64/2 | jq [ { \"id\" : \"e1e950c0-7533-4664-a606-91c97e8dbb85\" , \"created\" : 1579419397777 , \"origin\" : 1579419397752820200 , \"modified\" : 1579419397777 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"8.073392e+305\" } , { \"id\" : \"2b30bdf3-cb3e-4bac-bd20-87653e9259f2\" , \"created\" : 1579419367748 , \"origin\" : 1579419367735956200 , \"modified\" : 1579419367748 , \"device\" : \"Random-Float-Device\" , \"name\" : \"Float64\" , \"value\" : \"-3.105079e+307\" } ]","title":"API \u3067\u306e\u84c4\u7a4d\u30c7\u30fc\u30bf\u306e\u78ba\u8a8d"},{"location":"fuji/lab2-gettingstarted/#_6","text":"\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u305f\u969b\u3001 Float32 \u306e\u5024\u304c /oyN8A== \u306e\u3088\u3046\u306b\u6587\u5b57\u5217\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u5185\u90e8\u7684\u306b\u306f\u3053\u306e\u578b\u306e\u6570\u5024\uff08\u3092\u8868\u3059\u30d0\u30a4\u30c8\u5217\uff09\u3092 Base64 \u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059\u3002 \u6570\u5024\u3092\u4fdd\u6301\u3059\u308b\u969b\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u6709\u7121\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3068\u304d\u306b\u4f5c\u6210\u3059\u308b\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u4e8b\u524d\u69cb\u6210\u6e08\u307f\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u306b\u5f93\u3063\u3066\u3053\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u6570\u5024\u306f\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u6570\u5024\u306b\u623b\u305b\u307e\u3059\u3002\u3082\u3063\u3068\u3044\u3044\u3084\u308a\u65b9\u304c\u3042\u308a\u305d\u3046\u306a\u6c17\u306f\u3057\u307e\u3059\u304c\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067 \u9069\u5f53\u306a\u30c7\u30b3\u30fc\u30c0\u3092\u4f5c\u308a\u307e\u3057\u305f \u3002Go \u304c\u52d5\u304f\u74b0\u5883\uff08CLI \u3067\u306e\u64cd\u4f5c\u3067\u4f7f\u3063\u305f\u30b3\u30f3\u30c6\u30ca\u5185\u306a\u3069\uff09\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002 1 2 3 4 $ git clone https://github.com/kurokobo/edgex-decode-base64.git $ cd edgex-decode-base64/ $ go run main.go /eOKAw == 8 .163255e-37","title":"\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u6570\u5024\u306e\u30c7\u30b3\u30fc\u30c9"},{"location":"fuji/lab2-gettingstarted/#_7","text":"\u3068\u3053\u308d\u3067\u3001API \u3067\u751f\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u308b\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3089\u306e\u30c7\u30fc\u30bf\u306f MongoDB \u306b\u4fdd\u7ba1\u3055\u308c\u3066\u3044\u307e\u3059\u3002MongoDB \u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u5916\u90e8\u304b\u3089 MongoDB Compass \u306a\u3069\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5834\u5408\u306f\u3001\u30dd\u30fc\u30c8 27017 \u306b\u30e6\u30fc\u30b6\u540d core \u3001\u30d1\u30b9\u30ef\u30fc\u30c9 password \u3067\u8a8d\u8a3c\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u30b7\u30a7\u30eb\u306b\u5165\u3063\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002 edgex-mongo \u304c\u3001MongoDB \u306e\u5b9f\u4f53\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u3059\u3002\u3053\u308c\u306e\u30b7\u30a7\u30eb\u3092\u53d6\u3063\u3066\u3001MongoDB \u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u5165\u308a\u307e\u3059\u3002\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $ docker exec -it edgex-mongo bash # mongo MongoDB shell version v4.2.0 ... > show databases admin 0 .000GB application-service 0 .000GB config 0 .000GB coredata 0 .011GB exportclient 0 .000GB local 0 .000GB logging 0 .006GB metadata 0 .000GB notifications 0 .000GB scheduler 0 .000GB Event \u3068 Reading \u306e\u5024\u306f\u3001 coredata \u5185\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u4fdd\u6301\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 > use coredata switched to db coredata > show collections event reading valueDescriptor \u3042\u3068\u306f MongoDB \u306e\u304a\u4f5c\u6cd5\u306b\u5f93\u3063\u3066 find() \u306a\u3069\u3092\u53e9\u304f\u306e\u307f\u3067\u3059\u3002\u904a\u3093\u3060\u3089 exit \u3067\u629c\u3051\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 > db . reading . find (). limit ( 5 ) { \"_id\" : ObjectId ( \"5e2471bb0e360800014be635\" ), \"created\" : NumberLong ( \"1579446715833\" ), \"modified\" : NumberLong ( \"1579446715833\" ), \"origin\" : NumberLong ( \"1579446715806322700\" ), \"uuid\" : \"e0af3c99-be57-4cec-a59a-2af2da976d41\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Boolean-Device\" , \"name\" : \"Bool\" , \"value\" : \"true\" } { \"_id\" : ObjectId ( \"5e2471bb0e360800014be637\" ), \"created\" : NumberLong ( \"1579446715857\" ), \"modified\" : NumberLong ( \"1579446715857\" ), \"origin\" : NumberLong ( \"1579446715831613700\" ), \"uuid\" : \"c336b11e-8e91-4007-bd3f-1ee63d80e45b\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Boolean-Device\" , \"name\" : \"Bool\" , \"value\" : \"false\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be639\" ), \"created\" : NumberLong ( \"1579446720829\" ), \"modified\" : NumberLong ( \"1579446720829\" ), \"origin\" : NumberLong ( \"1579446720815333700\" ), \"uuid\" : \"2ae4befc-1fee-48ab-b621-b4d56747a446\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int16\" , \"value\" : \"9761\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be63b\" ), \"created\" : NumberLong ( \"1579446720843\" ), \"modified\" : NumberLong ( \"1579446720843\" ), \"origin\" : NumberLong ( \"1579446720830168500\" ), \"uuid\" : \"317ea1f1-0c36-4e6d-a489-b48711ff5dd6\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int64\" , \"value\" : \"-9069744988884413669\" } { \"_id\" : ObjectId ( \"5e2471c00e360800014be63d\" ), \"created\" : NumberLong ( \"1579446720857\" ), \"modified\" : NumberLong ( \"1579446720857\" ), \"origin\" : NumberLong ( \"1579446720841898700\" ), \"uuid\" : \"5be3634e-b171-4849-9bac-f13de720c11e\" , \"pushed\" : NumberLong ( 0 ), \"device\" : \"Random-Integer-Device\" , \"name\" : \"Int32\" , \"value\" : \"-913901160\" } > exit # exit","title":"\u751f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u63a2\u7d22"},{"location":"fuji/lab2-gettingstarted/#_8","text":"\u5f8c\u7d9a\u306e\u30e9\u30dc\u3067\u306f\u3001\u73fe\u5728\u5229\u7528\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u306f\u5225\u306e docker-compose.yml \u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002 \u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3068\u3001\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u305f\u6c38\u7d9a\u30dc\u30ea\u30e5\u30fc\u30e0\u9818\u57df\u3092\u524a\u9664\u3057\u307e\u3059\u3002 1 2 3 4 $ docker-compose down --volumes Stopping edgex-device-virtual ... done ... Removing image portainer/portainer \u30d7\u30eb\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u306f\u5f8c\u7d9a\u306e\u30e9\u30dc\u3067\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001 --rmi all \u306f\u6307\u5b9a\u3057\u307e\u305b\u3093\u3002","title":"\u74b0\u5883\u306e\u505c\u6b62"},{"location":"fuji/lab2-gettingstarted/#_9","text":"EdgeX Foundry \u3092\u8d77\u52d5\u3055\u305b\u3066\u3001\u4eee\u60f3\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5229\u7528\u3057\u305f\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3084\u84c4\u7a4d\u3063\u3077\u308a\u304c\u3001GUI \u3084 CLI\u3001API \u306a\u3069\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002","title":"\u307e\u3068\u3081"},{"location":"fuji/lab3-device-service-mqtt/","text":"Lab 3 - \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\uff08MQTT\uff09 \u00b6 \u524d\u306e\u30e9\u30dc\u3067\u5229\u7528\u3057\u305f\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u53d6\u308a\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306a\u3069\u3092\u30c6\u30b9\u30c8\u3059\u308b\u76ee\u7684\u3067\u306f\u305f\u3044\u3078\u3093\u4fbf\u5229\u3067\u3059\u304c\u3001\u73fe\u5b9f\u4e16\u754c\u3068\u306e\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u306f\u3067\u304d\u307e\u305b\u3093\u3002 \u305d\u3053\u3067\u4eca\u56de\u306f\u3001MQTT \u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u306b\u3082\u3064\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u3092\u7528\u610f\u3057\u3001\u4e0b\u56f3\u306e\u3088\u3046\u306b EdgeX Foundry \u304c\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u3068\u5b9f\u969b\u306b\uff08MQTT \u30d6\u30ed\u30fc\u30ab\u3092\u4ecb\u3057\u3066\uff09\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u72b6\u614b\u3092\u69cb\u6210\u3057\u307e\u3059\u3002 \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f \u00b6 \u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 git clone https://github.com/kurokobo/edgex-lab-handson.git \u3053\u306e\u30e9\u30dc\u3067\u306f\u3001 lab03 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u307e\u3059\u3002 1 cd lab03 \u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8\u3068\u52d5\u4f5c\u78ba\u8a8d \u00b6 \u307e\u305a\u306f\u3001\u4eca\u56de\u65b0\u3057\u304f EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u304d\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8\u3092\u6574\u7406\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u5b9f\u969b\u306b\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u52d5\u4f5c\u3055\u305b\u3001\u4ed5\u69d8\u901a\u308a\u306b\u52d5\u304f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8 \u00b6 \u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u8003\u3048\u307e\u3059\u3002 \u4e8c\u7a2e\u985e\u306e\u30bb\u30f3\u30b5\u3092\u6301\u3064 randfloat32 randfloat64 \u4e8c\u7a2e\u985e\u306e\u6587\u5b57\u5217\u60c5\u5831\u3092\u6301\u3064 ping message \u30c8\u30d4\u30c3\u30af DataTopic \u306b\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u3092 15 \u79d2\u3054\u3068\u306b\u914d\u4fe1\u3059\u308b {\"name\":\"MQ_DEVICE\",\"cmd\":\"randfloat32\",\"randfloat32\":\"<\u5024>\"} \u306e\u5f62\u5f0f\u3067\u914d\u4fe1\u3059\u308b \u30c8\u30d4\u30c3\u30af CommandTopic \u3067\u30b3\u30de\u30f3\u30c9\u3092\u5f85\u3061\u53d7\u3051\u308b {\"name\":\"MQTT_DEVICE\",\"method\":\"<get \u307e\u305f\u306f set>\",\"cmd\":\"<\u30b3\u30de\u30f3\u30c9\u540d>\"} \u306e\u5f62\u5f0f\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u3001\u30b3\u30de\u30f3\u30c9\u5fdc\u3058\u3066\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3001\u7d50\u679c\u3092\u30c8\u30d4\u30c3\u30af ResponseTopic \u306b\u914d\u4fe1\u3059\u308b \u30b3\u30de\u30f3\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\u304c set \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b message \u3092\u66f8\u304d\u63db\u3048\u308b \u30b3\u30de\u30f3\u30c9\u304c ping \u3060\u3063\u305f\u5834\u5408\u306f\u3001 pong \u3092\u8fd4\u3059 \u30b3\u30de\u30f3\u30c9\u304c message \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b message \u3092\u8fd4\u3059 \u30b3\u30de\u30f3\u30c9\u304c randfloat32 \u307e\u305f\u306f randfloat64 \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u305d\u308c\u305e\u308c\u5bfe\u5fdc\u3059\u308b\u30bb\u30f3\u30b5\u306e\u5024\u3092\u8fd4\u3059 \u7d50\u679c\u306f {\"name\":\"MQ_DEVICE\",\"method\":\"<\u30e1\u30bd\u30c3\u30c9>\",\"cmd\":\"<\u30b3\u30de\u30f3\u30c9\u540d>\",\"<\u30b3\u30de\u30f3\u30c9\u540d>\":\"<\u5024>\"} \u306e\u5f62\u5f0f\u3067\u914d\u4fe1\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u5074\u304c\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u3092\u767a\u4fe1\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u3082\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u3067\u3059\u3002\u305f\u3060\u3057\u3088\u304f\u898b\u308b\u3068\u3001\u4e8c\u3064\u3042\u308b\u30bb\u30f3\u30b5\u306e\u3046\u3061 randfloat64 \u306f\u3001\u5024\u306e\u5b9a\u671f\u7684\u306a\u81ea\u52d5\u914d\u4fe1\u306f\u3042\u308a\u307e\u305b\u3093\uff08\u3053\u308c\u306f\u4f0f\u7dda\u3067\u3059\uff09\u3002 \u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306e\u8d77\u52d5 \u00b6 \u4eca\u56de\u306f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u3092\u6a21\u3057\u305f\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u307e\u3059\u3002MQTT \u3092\u6271\u3046\u306b\u306f\u30d6\u30ed\u30fc\u30ab\u304c\u4e0d\u53ef\u6b20\u306a\u306e\u3067\u3001\u307e\u305a\u306f\u3053\u308c\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 1 2 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto 6de5986ebb1b3715179253857952f143fbf19fa77e201980f8573d96558850fd \u7d9a\u3051\u3066\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u306e\u7528\u610f\u3067\u3059\u3002 Node.js \u3067 MQTT \u3092\u6271\u3048\u308b\u30b3\u30f3\u30c6\u30ca dersimn/mqtt-scripts \u3067\u3001\u6b21\u306e\u3088\u3046\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f mqtt-scripts \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 function getRandomFloat ( min , max ) { return Math . random () * ( max - min ) + min ; } const deviceName = \"MQ_DEVICE\" ; let message = \"test-message\" ; // 1. Publish random number every 15 seconds schedule ( '*/15 * * * * *' , () => { let body = { \"name\" : deviceName , \"cmd\" : \"randfloat32\" , \"randfloat32\" : getRandomFloat ( 25 , 29 ). toFixed ( 1 ) }; publish ( 'DataTopic' , JSON . stringify ( body )); }); // 2. Receive the reading request, then return the response // 3. Receive the put request, then change the device value subscribe ( \"CommandTopic\" , ( topic , val ) => { var data = val ; if ( data . method == \"set\" ) { message = data [ data . cmd ] } else { switch ( data . cmd ) { case \"ping\" : data . ping = \"pong\" ; break ; case \"message\" : data . message = message ; break ; case \"randfloat32\" : data . randfloat32 = getRandomFloat ( 25 , 29 ). toFixed ( 1 ); break ; case \"randfloat64\" : data . randfloat64 = getRandomFloat ( 10 , 1 ). toFixed ( 5 ); break ; } } publish ( \"ResponseTopic\" , JSON . stringify ( data )); }); \u3053\u308c\u3092\u8d77\u52d5\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u696d\u3057\u307e\u3059\u3002IP \u30a2\u30c9\u30ec\u30b9\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002 1 2 3 4 5 $ cd mqtt-scripts $ docker run -d --restart = always --name = mqtt-scripts -v \" $( pwd ) :/scripts\" dersimn/mqtt-scripts --url mqtt://<IP \u30a2\u30c9\u30ec\u30b9> --dir /scripts Unable to find image 'dersimn/mqtt-scripts:latest' locally ... 9d52b4956ebbec60dd0f93bdf9750ff915fefd8e8c58d3ce8bc7ba1429693d2b \u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306e\u52d5\u4f5c\u78ba\u8a8d \u00b6 \u30d6\u30ed\u30fc\u30ab\u306e\u5168\u30c8\u30d4\u30c3\u30af\u3092\u8cfc\u8aad\u3057\u307e\u3059\u300215 \u79d2\u3054\u3068\u306b DataTopic \u306b\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u304c\u5c4a\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.4\" } DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"28.6\" } \u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 CommandTopic \u306b\u30b3\u30de\u30f3\u30c9\u3092\u914d\u4fe1\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"ping\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"randfloat32\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"randfloat64\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"message\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"set\",\"cmd\":\"message\",\"message\":\"modified-message\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"message\"}' \u8cfc\u8aad\u3057\u3066\u3044\u308b\u5074\u3067\u306f\u3001\u30b3\u30de\u30f3\u30c9\u304c CommandTopic \u306b\u5c4a\u304d\u3001\u305d\u306e\u30b3\u30de\u30f3\u30c9\u306b\u5fdc\u3058\u305f\u5fdc\u7b54\u304c ResponseTopic \u306b\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001 message \u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u304c\u3001 set \u30e1\u30bd\u30c3\u30c9\u306e\u5b9f\u884c\u524d\u5f8c\u3067\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"ping\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"ping\" , \"ping\" : \"pong\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat32\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.6\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat64\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat64\" , \"randfloat64\" : \"8.39883\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" , \"message\" : \"test-message\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"set\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"set\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } \u3053\u3053\u307e\u3067\u3067\u3001\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u72b6\u614b\u304c\u4f5c\u308c\u307e\u3057\u305f\u3002\u3053\u3053\u307e\u3067\u306f EdgeX Foundry \u306f\u307e\u3063\u305f\u304f\u95a2\u4fc2\u306a\u304f\u3001\u305f\u3060\u5358\u306b\u524d\u8ff0\u306e\u4ed5\u69d8\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u8ad6\u7406\u7684\u306b\u4f5c\u3063\u305f\u3060\u3051\u3067\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210 \u00b6 \u3055\u3066\u3001\u3053\u3053\u304b\u3089\u304c\u672c\u984c\u3067\u3059\u3002\u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30d0\u30a4\u30b9\u3092 EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u304f\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u6982\u5ff5 \u00b6 \u73fe\u5b9f\u4e16\u754c\u306b\u5b58\u5728\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u30bb\u30f3\u30b5\u3084\u30b9\u30a4\u30c3\u30c1\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u7570\u306a\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u306b\u6301\u3064\u305f\u3081\u3001\u305d\u308c\u305e\u308c\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u65b9\u6cd5\u3067\u5024\u306e\u53d6\u5f97\u3084\u5236\u5fa1\u547d\u4ee4\u306e\u767a\u884c\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u5b9f\u614b\u3092\u8e0f\u307e\u3048\u3001EdgeX Foundry \u3067\u306f\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3068 EdgeX Foundry \u306e\u9593\u3092\u53d6\u308a\u6301\u3063\u3066\u304f\u308c\u308b\u5b58\u5728\u3068\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u3088\u3070\u308c\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u304a\u304a\u3080\u306d\u30c7\u30d0\u30a4\u30b9\u306e\u7a2e\u985e\u3054\u3068\u306b\u7528\u610f\u3059\u308b\u3082\u306e\u3068\u601d\u3048\u3070\u3088\u3055\u305d\u3046\u3067\u3001\u3064\u307e\u308a\u3001\u3072\u3068\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u3072\u3068\u3064\u4ee5\u4e0a\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5236\u5fa1\u3092\u4efb\u305b\u3089\u308c\u308b\u3088\u3046\u3067\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u3002 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u53d6\u5f97\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u5236\u5fa1\u547d\u4ee4\u306e\u767a\u884c\u3092\u884c\u3048\u308b REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u306e\u5236\u5fa1\u547d\u4ee4\u3092\u5b9f\u30c7\u30d0\u30a4\u30b9\u306b\u5408\u308f\u305b\u305f\u547d\u4ee4\u306b\u7ffb\u8a33\u3057\u3066\u5b9f\u884c\u3057\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u60c5\u5831\u3092\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5408\u308f\u305b\u305f\u60c5\u5831\u306b\u7ffb\u8a33\u3057\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5c4a\u3051\u308b \u4e8b\u524d\u306b\u5b9a\u3081\u3089\u308c\u305f\u5834\u5408\u306f\u3001\u5b9a\u671f\u7684\u306b\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u7279\u5b9a\u306e\u51e6\u7406\u3092\u884c\u3044\u3001\u7d50\u679c\u3092\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5c4a\u3051\u308b \u307e\u305f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u306e\u3082\u306e\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3061\u307e\u3059\u3002 MQTT \u3084 Modbus \u306a\u3069\u696d\u754c\u3067\u591a\u304f\u4f7f\u308f\u308c\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5408\u308f\u305b\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3059\u3067\u306b\u53c2\u8003\u5b9f\u88c5\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u8907\u96d1\u3067\u306a\u3044\u69cb\u6210\u306e\u5834\u5408\u306f\u5145\u5206\u306b\u6d41\u7528\u3067\u304d\u308b \u53c2\u8003\u5b9f\u88c5\u306e\u6d41\u7528\u3067\u306f\u4e0d\u8db3\u3059\u308b\u5834\u5408\u306f\u3001\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b SDK \u3092\u5229\u7528\u3057\u3066\u6c17\u8efd\u306b\u81ea\u88fd\u3067\u304d\u308b\uff08C \u8a00\u8a9e\u307e\u305f\u306f Go \u8a00\u8a9e\uff09 \u3059\u3079\u3066\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3053\u306e SDK \u3092\u7528\u3044\u3066\u5171\u901a\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u3082\u3068\u3067\u5b9f\u88c5\u3055\u308c\u308b\u305f\u3081\u3001\u64cd\u4f5c\u65b9\u6cd5\u3084\u8a2d\u5b9a\u65b9\u6cd5\u306f\u81ea\u305a\u3068\u5171\u901a\u5316\u3055\u308c\u3001\u76f8\u4e92\u904b\u7528\u6027\u306f\u9ad8\u307e\u308b EdgeX Foundry \u3092\u53d6\u308a\u5dfb\u304f\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u6210\u719f\u306b\u3088\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u30d9\u30f3\u30c0\u304c\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u7528\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u305f\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u7d44\u307f\u8fbc\u307e\u308c\u305f\u308a\u3001\u7b2c\u4e09\u8005\u306b\u3088\u308a\u958b\u767a\u3055\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5145\u5b9f\u3082\u671f\u5f85\u3067\u304d\u308b EdgeX Foundry \u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u7cfb\u306e\u88fd\u54c1\u306e\u5834\u5408\u3001\u88fd\u54c1\u306e\u767a\u5c55\u306b\u306f\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u6210\u719f\u304c\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002\u3053\u306e\u89b3\u70b9\u3067\u306f\u3001EdgeX Foundry \u306f\u3001\u5546\u7528\u74b0\u5883\u3078\u306e\u5229\u7528\u3092\u8b33\u3063\u305f\u30d0\u30fc\u30b8\u30e7\u30f3 1.0 \u306e\u30ea\u30ea\u30fc\u30b9\u304c 2019 \u5e74\u306e\u51ac\u3068\u3064\u3044\u3053\u306e\u524d\u306a\u306e\u3067\u3001\u307e\u3060\u307e\u3060\u3053\u308c\u304b\u3089\u3067\u3059\u306d\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u8981\u7d20 \u00b6 \u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e 3 \u3064\u306e\u8981\u7d20\u3092\u8003\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u306e\u3082\u306e \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u3068\u306e\u9593\u3092\u4ef2\u4ecb\u3059\u308b\u3001C \u8a00\u8a9e\u307e\u305f\u306f Go \u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u4eca\u56de\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b \u5f8c\u8ff0\u306e\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3093\u3067\u52d5\u4f5c\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08Device Profile\uff09 YAML \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9 \u7ba1\u7406\u5bfe\u8c61\u306e\u30c7\u30d0\u30a4\u30b9\u7a2e\u5225\u304c\u6301\u3064\u30ea\u30bd\u30fc\u30b9\u3084\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u6301\u3064\u5024\u306e\u610f\u5473\u3001\u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u884c\u3048\u308b\u64cd\u4f5c\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\uff08Drvice Service Configuration\uff09 configuration.toml \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u81ea\u8eab\u306e\u8a2d\u5b9a\u3084\u3001\u9023\u643a\u3059\u308b EdgeX Foundry \u306e\u4ed6\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u7d10\u3065\u3051\u3066\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u30c7\u30d0\u30a4\u30b9\u3084\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u81ea\u52d5\u5b9f\u884c\u51e6\u7406\u306a\u3069\u3082\u5b9a\u7fa9\u3059\u308b \u305d\u306e\u4ed6\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb \u00b6 \u4eca\u56de\u306f\u3001 mqtt \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e mqtt.test.device.profile.yml \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 name : \"Test.Device.MQTT.Profile\" manufacturer : \"Dell\" model : \"MQTT-2\" labels : - \"test\" description : \"Test device profile\" deviceResources : - name : randfloat32 description : \"device random number with Base64 encoding\" properties : value : { type : \"Float32\" , size : \"4\" , readWrite : \"R\" , defaultValue : \"0.00\" , minimum : \"100.00\" , maximum : \"0.00\" , floatEncoding : \"Base64\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : randfloat64 description : \"device random number with e notion\" properties : value : { type : \"Float64\" , size : \"4\" , readWrite : \"R\" , defaultValue : \"0.00\" , minimum : \"100.00\" , maximum : \"0.00\" , floatEncoding : \"eNotation\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : ping description : \"device awake\" properties : value : { type : \"String\" , size : \"0\" , readWrite : \"R\" , defaultValue : \"oops\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : message description : \"device notification message\" properties : value : { type : \"String\" , size : \"0\" , readWrite : \"W\" , scale : \"\" , offset : \"\" , base : \"\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } deviceCommands : - name : testrandfloat32 get : - { index : \"1\" , operation : \"get\" , deviceResource : \"randfloat32\" } - name : testrandfloat64 get : - { index : \"1\" , operation : \"get\" , deviceResource : \"randfloat64\" } - name : testping get : - { index : \"1\" , operation : \"get\" , deviceResource : \"ping\" } - name : testmessage get : - { index : \"1\" , operation : \"get\" , deviceResource : \"message\" } set : - { index : \"1\" , operation : \"set\" , deviceResource : \"message\" } coreCommands : - name : testrandfloat32 get : path : \"/api/v1/device/{deviceId}/testrandfloat32\" responses : - code : \"200\" description : \"get the random float32 value\" expectedValues : [ \"randfloat32\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testrandfloat64 get : path : \"/api/v1/device/{deviceId}/testrandfloat64\" responses : - code : \"200\" description : \"get the random float64 value\" expectedValues : [ \"randfloat64\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testping get : path : \"/api/v1/device/{deviceId}/testping\" responses : - code : \"200\" description : \"ping the device\" expectedValues : [ \"ping\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testmessage get : path : \"/api/v1/device/{deviceId}/testmessage\" responses : - code : \"200\" description : \"get the message\" expectedValues : [ \"message\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] put : path : \"/api/v1/device/{deviceId}/testmessage\" parameterNames : [ \"message\" ] responses : - code : \"204\" description : \"set the message.\" expectedValues : [] - code : \"500\" description : \"internal server error\" expectedValues : [] \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3068\u4e00\u5bfe\u4e00\u3067\u306f\u306a\u304f\u3001\u4f8b\u3048\u3070\u30c7\u30d0\u30a4\u30b9\u306e\u30e2\u30c7\u30eb\u3054\u3068\u306b\u3072\u3068\u3064\u7528\u610f\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059 \u3002 \u3053\u306e\u4f8b\u3067\u306f\u3001\u5192\u982d\u306e 6 \u884c\u3067\u30c7\u30d0\u30a4\u30b9\u306e\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u52d5\u4f5c\u3055\u305b\u305f\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u306f\u3001Dell \u88fd\u306e MQTT-2 \u3068\u3044\u3046\u30e2\u30c7\u30eb\u3067\u3042\u308b\u3001\u3068\u3044\u3046\u60f3\u5b9a\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u5f8c\u3001\u5927\u304d\u304f deviceResources\u3001deviceCommands\u3001coreCommands\u3001\u306e\u4e09\u3064\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u7d9a\u3044\u3066\u3044\u307e\u3059\u3002 deviceResources \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u304c\u6301\u3063\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3068\u3001\u305d\u308c\u304c\u6301\u3064\u5024\u306e\u610f\u5473\u3092\u6c7a\u3081\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u30ea\u30bd\u30fc\u30b9 randfloat64 \u304c\u3042\u308a\u3001\u305d\u308c\u306f 0.00 \u304b\u3089 100.00 \u306e\u7bc4\u56f2\u306e Float64 \u578b\u306e\u5024\u3092\u6301\u3064\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001message \u30ea\u30bd\u30fc\u30b9\u306f String \u578b\u306e\u5024\u3092\u6301\u3061\u3001\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u9055\u3063\u3066\u66f8\u304d\u63db\u3048\u304c\u53ef\u80fd\uff08W\uff09\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 deviceCommands \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\uff08get \u307e\u305f\u306f set\uff09\u3054\u3068\u306b\u53c2\u7167\u307e\u305f\u306f\u64cd\u4f5c\u3055\u308c\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u7d10\u4ed8\u3051\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001testrandfloat64 \u30b3\u30de\u30f3\u30c9\u306e get \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u5148\u306b deviecResources \u3067\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9 randfloat64 \u304b\u3089\u306e\u5024\u306e\u8aad\u307f\u53d6\u308a\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001testmessage \u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001set \u307e\u305f\u306f get \u30e1\u30bd\u30c3\u30c9\u306b\u3088\u308a\u3001\u30ea\u30bd\u30fc\u30b9 message \u306e\u5024\u306e\u53d6\u5f97\u3084\u5909\u66f4\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u3053\u3067\u306f\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3072\u3068\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7d10\u4ed8\u3051\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u4e00\u56de\u306e get \u64cd\u4f5c\u3067\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u3092\u540c\u6642\u306b\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3082\u69cb\u6210\u3067\u304d\u307e\u3059\u3002 Edge Xpert \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001\u305d\u306e\u3088\u3046\u306a\u4f8b\u304c\u89e3\u8aac\u3055\u308c \u3066\u3044\u307e\u3059\u3002 coreCommands \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u304c testrandfloat64 \u30b3\u30de\u30f3\u30c9\u306b GET \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u305d\u306e\u547d\u4ee4\u306f\u30d1\u30b9 /api/v1/device/{deviceId}/testrandfloat64 \u306b\u6e21\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30d1\u30b9\u306f\u3001\u5148\u306e deviceCommands \u3067\u5b9a\u7fa9\u3057\u305f testrandfloat64 \u30b3\u30de\u30f3\u30c9\u3092\u8868\u3059\u3082\u306e\u3067\u3059\u3002\u305d\u3057\u3066\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u7d50\u679c\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u30b3\u30fc\u30c9 200 \u304c\u8fd4\u3063\u3066\u304d\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\u306b\u542b\u307e\u308c\u308b\u5024\u3092 randfloat32 \u306e\u5024\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u3088\u3046\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001testmessage \u30b3\u30de\u30f3\u30c9\u306e\u307f\u3001\u307b\u304b\u306e\u30b3\u30de\u30f3\u30c9\u3068\u7570\u306a\u308a PUT \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u52d5\u4f5c\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a \u00b6 \u4eca\u56de\u306f\u3001configuration.toml \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u74b0\u5883\u4f9d\u5b58\u306e\u56fa\u5b9a\u5024\u3092\u542b\u307f\u307e\u3059\u3002\u81ea\u5206\u306e\u74b0\u5883\u3067\u8a66\u3059\u5834\u5408\u306f\u3001IP \u30a2\u30c9\u30ec\u30b9\u3092\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 $ cat mqtt/configuration.toml # configuration.toml [ Writable ] LogLevel = 'DEBUG' [ Service ] Host = \"edgex-device-mqtt\" Port = 49982 ConnectRetries = 3 Labels = [] OpenMsg = \"device mqtt started\" Timeout = 5000 EnableAsyncReadings = true AsyncBufferSize = 16 [ Registry ] Host = \"edgex-core-consul\" Port = 8500 CheckInterval = \"10s\" FailLimit = 3 FailWaitTime = 10 Type = \"consul\" [ Logging ] EnableRemote = false File = \"./device-mqtt.log\" [ Clients ] [ Clients.Data ] Name = \"edgex-core-data\" Protocol = \"http\" Host = \"edgex-core-data\" Port = 48080 Timeout = 50000 [ Clients.Metadata ] Name = \"edgex-core-metadata\" Protocol = \"http\" Host = \"edgex-core-metadata\" Port = 48081 Timeout = 50000 [ Clients.Logging ] Name = \"edgex-support-logging\" Protocol = \"http\" Host = \"edgex-support-logging\" Port = 48061 [ Device ] DataTransform = true InitCmd = \"\" InitCmdArgs = \"\" MaxCmdOps = 128 MaxCmdValueLen = 256 RemoveCmd = \"\" RemoveCmdArgs = \"\" ProfilesDir = \"/custom-config\" # Pre-define Devices [[ DeviceList ]] Name = \"MQ_DEVICE\" Profile = \"Test.Device.MQTT.Profile\" Description = \"General MQTT device\" Labels = [ \"MQTT\" ] [ DeviceList.Protocols ] [ DeviceList.Protocols.mqtt ] Schema = \"tcp\" Host = \"192.168.0.100\" Port = \"1883\" ClientId = \"CommandPublisher\" User = \"\" Password = \"\" Topic = \"CommandTopic\" [[ DeviceList.AutoEvents ]] Frequency = \"30s\" OnChange = false Resource = \"testrandfloat64\" # Driver configs [ Driver ] IncomingSchema = \"tcp\" IncomingHost = \"192.168.0.100\" IncomingPort = \"1883\" IncomingUser = \"\" IncomingPassword = \"\" IncomingQos = \"0\" IncomingKeepAlive = \"3600\" IncomingClientId = \"IncomingDataSubscriber\" IncomingTopic = \"DataTopic\" ResponseSchema = \"tcp\" ResponseHost = \"192.168.0.100\" ResponsePort = \"1883\" ResponseUser = \"\" ResponsePassword = \"\" ResponseQos = \"0\" ResponseKeepAlive = \"3600\" ResponseClientId = \"CommandResponseSubscriber\" ResponseTopic = \"ResponseTopic\" \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u305f\u308a\u3001\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u308a\u3057\u307e\u3059\u3002 \u524d\u534a\u90e8\u5206\u3067\u306f EdgeX Foundry \u5185\u306e\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u306a\u3069\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5b9a\u7fa9\u306f [[DeviceList]] \u306e\u90e8\u5206\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb Test.Device.MQTT.Profile \u306b\u7d10\u3065\u3051\u3066\u30c7\u30d0\u30a4\u30b9 MQ_DEVICE \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u5229\u7528\u3059\u308b MQTT \u30d6\u30ed\u30fc\u30ab\u3082\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 [[DeviceList.AutoEvents]] \u306e\u90e8\u5206\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u5074\u304b\u3089\u306f\u81ea\u52d5\u3067\u306f\u914d\u4fe1\u3055\u308c\u306a\u3044\u5024\u3067\u3042\u3063\u305f randfloat64 \u306e\u5024\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3059\u308b\u305f\u3081\u300130 \u79d2\u3054\u3068\u306b testrandfloat64 \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 [Driver] \u306e\u90e8\u5206\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u60c5\u5831\u3092\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b\u8cfc\u8aad\u3059\u308b MQTT \u30d6\u30ed\u30fc\u30ab\u3084\u30c8\u30d4\u30c3\u30af\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u306a\u304a\u3001\u4eca\u56de\u306f\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067\u5b9f\u30c7\u30d0\u30a4\u30b9\u306e\u5b9a\u7fa9\u3082\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30d0\u30a4\u30b9\u306f\u3042\u3068\u304b\u3089\u3082\u8ffd\u52a0\u304c\u53ef\u80fd\u3067\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3042\u304f\u307e\u3067 MQTT \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001\u5229\u7528\u3057\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u9055\u3048\u3070\u5f53\u7136\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u66f8\u304f\u3079\u304d\u5185\u5bb9\u3082\u5909\u308f\u308a\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3093\u3060 EdgeX Foundry \u306e\u8d77\u52d5 \u00b6 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u305f\u3089\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3080 EdgeX Foundry \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 \u4eca\u56de\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001 edgexfoundry/docker-device-mqtt-go \u30a4\u30e1\u30fc\u30b8\u304c\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3001\u4eca\u56de\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u308b mqtt \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u305f\u3046\u3048\u3067\u3001\u8d77\u52d5\u6642\u306b\u306f\u305d\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u3066 EdgeX Foundry \u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u304c\u767b\u9332\u3055\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 device-mqtt : image : edgexfoundry/docker-device-mqtt-go:1.1.1 ports : - \"49982:49982\" container_name : edgex-device-mqtt hostname : edgex-device-mqtt networks : - edgex-network volumes : - db-data:/data/db - log-data:/edgex/logs - consul-config:/consul/config - consul-data:/consul/data - ./mqtt:/custom-config depends_on : - data - command entrypoint : - /device-mqtt - --registry=consul://edgex-core-consul:8500 - --confdir=/custom-config \u3067\u306f\u3001\u5b9f\u969b\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u3066 EdgeX Foundry \u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 1 $ docker-compose up -d \u52d5\u4f5c\u78ba\u8a8d \u00b6 \u307e\u305a\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3084\u30c7\u30d0\u30a4\u30b9\u304c\u6b63\u5e38\u306b EdgeX Foundry \u306b\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3001\u305d\u306e\u5f8c\u3001\u5024\u306e\u53ce\u96c6\u3084\u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u767b\u9332\u72b6\u614b\u306e\u78ba\u8a8d \u00b6 \u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067 device-virtual \u306e\u5b58\u5728\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u6cd5 \u3067\u3001\u4eca\u56de\u306f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 edgex-device-mqtt \u3068\u30c7\u30d0\u30a4\u30b9 MQ_DEVICE \u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3001\u767b\u9332\u306f\u6210\u529f\u3057\u3066\u3044\u307e\u3059\u3002\u30e9\u30af\u306a\u306e\u306f UI \u304b CLI \u3067\u3059\u306d\u3002 \u307e\u305f\u3001\u3053\u308c\u307e\u3067\u7d39\u4ecb\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001EdgeX Foundry \u306f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u7fa4\u306e\u72b6\u614b\u7ba1\u7406\u306b HashiCorp \u306e Consul \u3092\u5229\u7528\u3057\u3066\u304a\u308a\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u72b6\u614b\u3084\u767b\u9332\u72b6\u614b\u306f\u3001\u3053\u306e Consul \u3092\u901a\u3058\u3066\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 Consul \u306e GUI \u306b\u306f\u3001http://192.168.0.100:8500/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002 Consul \u306e GUI \u3053\u3053\u3067\u3001 [Services] \u30bf\u30d6\u3067 edgex-device-mqtt \u304c\u7dd1\u8272\u3067\u3042\u308b [Key/Value] \u30bf\u30d6\u3067 edgex > devices > 1.0 \u306b edgex-device-mqtt \u304c\u3042\u308b [Key/Value] \u30bf\u30d6\u3067 edgex > devices > 1.0 > edgex-device-mqtt > DeviceList > 0 > Name \u304c MQ_DEVICE \u3067\u3042\u308b \u3042\u305f\u308a\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3001\u767b\u9332\u306f\u3067\u304d\u3066\u3044\u308b\u3068\u8003\u3048\u3066\u3088\u3044\u3067\u3057\u3087\u3046\u3002 \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u5024\u306e\u53ce\u96c6\u306e\u78ba\u8a8d \u00b6 \u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u3092 15 \u79d2\u3054\u3068\u306b\u81ea\u52d5\u7684\u306b MQTT \u30c8\u30d4\u30c3\u30af\u306b\u914d\u4fe1\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3053\u308c\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u69cb\u6210\u3057\u307e\u3057\u305f\u306e\u3067\u3001EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002 \u3053\u308c\u3082\u3001\u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u5024\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u6cd5 \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3082\u30e9\u30af\u306a\u306e\u306f GUI \u304b CLI \u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u3001API \u3067\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 $ curl -s http://localhost: 48080 /api/v 1 /reading/name/randfloat 32 / 3 | jq [ { \"id\" : \"23fdac76-0870-4b9d-b653-561d8a7c0423\" , \"created\" : 1579707885029 , \"origin\" : 1579707885005379300 , \"modified\" : 1579707885029 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"QdpmZg==\" }, { \"id\" : \"5c086b1d-6b38-48c0-9aef-9b800f9c72ab\" , \"created\" : 1579707870018 , \"origin\" : 1579707870004742000 , \"modified\" : 1579707870018 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"QeGZmg==\" }, { \"id\" : \"de67c865-0406-408d-b238-d33de1fe1032\" , \"created\" : 1579707855022 , \"origin\" : 1579707855011006200 , \"modified\" : 1579707855022 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"Qd2Zmg==\" } ] \u6642\u523b\u306f\u30a8\u30dd\u30c3\u30af\u30df\u30ea\u79d2\uff08origin \u306f\u30a8\u30dd\u30c3\u30af\u30ca\u30ce\u79d2\uff09\u306a\u306e\u3067\u3001\u5909\u63db\u3059\u308b\u3068 15 \u79d2\u304a\u304d\u3067\u3042\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 $ date -d \"@1579707885.029\" Wed 22 Jan 2020 03 :44:45 PM UTC $ date -d \"@1579707870.018\" Wed 22 Jan 2020 03 :44:30 PM UTC $ date -d \"@1579707855.022\" Wed 22 Jan 2020 03 :44:15 PM UTC \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u5b9f\u884c\u30a4\u30d9\u30f3\u30c8\u306e\u78ba\u8a8d \u00b6 randfloat64 \u306e\u5024\u306f\u3001\u81ea\u52d5\u3067\u306f\u914d\u4fe1\u3055\u308c\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\uff08configuration.toml\uff09\u306b [[DeviceList.AutoEvents]] \u3092\u5b9a\u7fa9\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5074\u304b\u3089 30 \u79d2\u3054\u3068\u306b\u81ea\u52d5\u3067\u53ce\u96c6\u3055\u305b\u3066\u3044\u307e\u3057\u305f\u3002 \u3053\u308c\u3082\u30c7\u30fc\u30bf\u306e\u84c4\u7a4d\u3092\u4efb\u610f\u306e\u65b9\u6cd5\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070 CLI \u3067\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 $ edgex-cli reading list MQ_DEVICE -l 10 | grep randfloat64 5df1da1a-91db-41cf-99fa-962e87077395 randfloat64 MQ_DEVICE 1579709342806935600 4 .924730e+00 15 seconds 15 seconds 50 years 7c33bb76-c9e9-4ef8-a410-80227e236d13 randfloat64 MQ_DEVICE 1579709312695223100 3 .734020e+00 45 seconds 45 seconds 50 years 053987f1-5a89-4cc2-a433-03432caa9039 randfloat64 MQ_DEVICE 1579709282611878800 9 .320210e+00 About a minute About a minute 50 years \u3053\u308c\u3082\u5909\u63db\u3059\u308b\u3068 30 \u79d2\u304a\u304d\u3067\u3042\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 $ date -d \"@1579709342.806935600\" Wed Jan 22 16 :09:02 UTC 2020 $ date -d \"@1579709312.695223100\" Wed Jan 22 16 :08:32 UTC 2020 $ date -d \"@1579709282.611878800\" Wed Jan 22 16 :08:02 UTC 2020 \u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u78ba\u8a8d \u00b6 \u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30ea\u30bd\u30fc\u30b9 message \u306e\u5024\u306f EdgeX Foundry \u304b\u3089\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306a\u4ed5\u69d8\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u3082\u305d\u308c\u306b\u5408\u308f\u305b\u3066 PUT \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6319\u52d5\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3057\u305f\u3002 \u3067\u306f\u3001\u3053\u306e\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3057\u305f\u5404\u30b3\u30de\u30f3\u30c9\u306f\u3001\u5185\u90e8\u3067\u306f REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5f85\u3061\u53d7\u3051\u3066\u3066\u304a\u308a\u3001\u305d\u3057\u3066\u3053\u306e URL \u306f\u3001API \u7d4c\u7531\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3092\u793a\u3059\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7d50\u679c\u306b\u542b\u307e\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE | jq ... \"id\" : \"77fccbb8-f33b-42d8-bf21-6d55cdde2068\" , \"name\" : \"MQ_DEVICE\" , ... \"commands\" : [ ... \"name\" : \"testmessage\" , ... \"get\" : { \"path\" : \"/api/v1/device/{deviceId}/testmessage\" , ... \"url\" : \"http://edgex-core-command:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4\" } , \"put\" : { \"path\" : \"/api/v1/device/{deviceId}/testmessage\" , ... \"url\" : \"http://edgex-core-command:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4\" , ... EdgeX Foundry \u304c\u30c7\u30d0\u30a4\u30b9\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306f\u3001\u5185\u90e8\u3067\u306f\u3053\u306e URL \u306b\u5bfe\u3057\u3066 GET \u306a\u308a PUT \u306a\u308a\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u308f\u3051\u3067\u3059\u3002\u305d\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u305d\u308c\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u8a2d\u5b9a\u3057\u305f\u3068\u304a\u308a\u306b\u7ffb\u8a33\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u64cd\u4f5c\u304c\u5b9f\u884c\u3055\u308c\u5fdc\u7b54\u304c\u8fd4\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u3053\u3067\u306f\u5b9f\u969b\u306b\u3001\u78ba\u8a8d\u3067\u304d\u305f URL \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u307e\u3059\u3002\u5916\u90e8\u304b\u3089\u3053\u306e URL \u3092\u76f4\u63a5\u53e9\u304f\u3068\u304d\u306f\u3001\u30db\u30b9\u30c8\u540d\u90e8\u5206\u3092\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u305f\u3046\u3048\u3067\u53e9\u304d\u307e\u3059\u3002\u4eca\u56de\u3067\u3042\u308c\u3070\u3001\u6b21\u306e\u3088\u3046\u306a\u64cd\u4f5c\u3067\u73fe\u5728\u5024\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4 | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579710432121478400 , \"readings\" : [ { \"origin\" : 1579710432109675800 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"test-message\" } ] , \"EncodedEvent\" : null } \u307e\u3060\u4f55\u3082\u5909\u66f4\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u521d\u671f\u5024\uff08mqtt-script.js \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\uff09\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002 \u3067\u306f\u3001\u5909\u66f4\u306e PUT \u3092\u6295\u3052\u307e\u3059\u3002JSON \u3092\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306b\u542b\u3081\u3066 PUT \u3057\u307e\u3059\u3002 1 $ curl -s -X PUT -d '{\"message\":\"modified-message\"}' http://localhost:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4 \u30a8\u30e9\u30fc\u304c\u306a\u3051\u308c\u3070\u3001\u518d\u5ea6 GET \u3059\u308b\u3068\u3001\u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u3068\u3053\u308d\u3067\u3001URL \u306f /api/v1/device/<\u30c7\u30d0\u30a4\u30b9 ID>/command/<\u30b3\u30de\u30f3\u30c9 ID> \u306a\u30d1\u30b9\u3067\u3059\u304c\u3001\u5b9f\u306f\u308f\u3056\u308f\u3056 ID \u3092\u8abf\u3079\u306a\u304f\u3066\u3082\u3001/api/v1/device/name/<\u30c7\u30d0\u30a4\u30b9\u540d>/command/<\u30b3\u30de\u30f3\u30c9\u540d> \u3067\u3082\u6a5f\u80fd\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u304a\u597d\u307f\u306b\u5408\u308f\u305b\u3066\u3069\u3061\u3089\u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u4eca\u5ea6\u306f\u3053\u3061\u3089\u306b GET \u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579710963293832000 , \"readings\" : [ { \"origin\" : 1579710963283338200 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"modified-message\" } ] , \"EncodedEvent\" : null } \u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u306a\u304a\u3001\u3053\u306e\u3088\u3046\u306a GET \u3084 PUT \u306b\u76f8\u5f53\u3059\u308b\u64cd\u4f5c\u306f\u3001GUI \u3067\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002 \u307e\u3068\u3081 \u00b6 \u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u3092\u7528\u610f\u3057\u3001\u305d\u308c\u306b\u5408\u308f\u305b\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3057\u3066\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u3092 EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u3044\u305f\u3046\u3048\u3067\u3001\u5b9f\u969b\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u5b9f\u969b\u306e\u30b7\u30fc\u30f3\u3067\u306f\u3001\u672c\u5f53\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u672c\u5f53\u306e\u4ed5\u69d8\u306b\u5408\u308f\u305b\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u308c\u81ea\u4f53\u306e\u5b9f\u88c5\u3092\u542b\u3081\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u306b\u306a\u308b\u53ef\u80fd\u6027\u3082\u3082\u3061\u308d\u3093\u3042\u308b\u308f\u3051\u3067\u3059\u3002 \u304c\u3001\u4eca\u56de\u78ba\u8a8d\u3057\u305f\u901a\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u3084\u74b0\u5883\u306b\u4f9d\u5b58\u3059\u308b\u90e8\u5206\uff08\u30ea\u30bd\u30fc\u30b9\u3084\u30b3\u30de\u30f3\u30c9\u306e\u540d\u524d\u3084\u6570\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u60c5\u5831\u3084\u30c8\u30d4\u30c3\u30af\u540d\u306a\u3069\uff09\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u3057\u3066\u5225\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u305d\u308c\u81ea\u4f53\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5f93\u3063\u3066\u6de1\u3005\u3068\u52d5\u304f\u3060\u3051\u3067\u3082\u3042\u308a\u307e\u3059\u3002 \u4f8b\u3048\u3070 Raspberry Pi \u306b\u63a5\u7d9a\u3057\u305f\u30bb\u30f3\u30b5\u306e\u5024\u3092\u53d6\u308a\u8fbc\u307f\u305f\u3044\u5834\u5408\u3092\u8003\u3048\u308b\u3068\u3001\u5b9f\u969b\u306e\u30bb\u30f3\u30b5\u5024\u3092 MQTT \u30c8\u30d4\u30c3\u30af\u306b\u6295\u3052\u308b\u90e8\u5206\u306f\u81ea\u88fd\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3067\u3042\u308c\u3070\u305d\u306e\u969b\u306b\u3001\u9006\u306b\u4eca\u56de\u4f7f\u3063\u305f\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u4ed5\u69d8\u3092\u524d\u63d0\u306b\u3057\u305f\u6295\u3052\u65b9\u306b\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305d\u3046\u3059\u308c\u3070\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u305d\u306e\u307e\u307e\u5b9f\u969b\u306b\u6d41\u7528\u3067\u304d\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u4eca\u56de\u306f MQTT \u306e\u4f8b\u3067\u3057\u305f\u304c\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u53c2\u8003\u5b9f\u88c5\u3082\u3001\u74b0\u5883\u4f9d\u5b58\u306e\u90e8\u5206\u304c\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7fa4\u3067\u5916\u5728\u5316\u3067\u304d\u308b\u3088\u3046\u306a\u6c4e\u7528\u6027\u306e\u3042\u308b\u5f62\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306b\u69d8\u3005\u306a\u30c7\u30d0\u30a4\u30b9\u3067\u4f7f\u3044\u307e\u308f\u305b\u305d\u3046\u3067\u3059\u3002 \u306a\u304a\u3001EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u306f\u3001\u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u6271\u3063\u305f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a \u3084\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b\u6301\u3061\u51fa\u305b\u307e\u3059\u3002\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u96c6\u7d04\u3055\u308c\u308b\u6bb5\u968e\u3067\u3001\u3059\u3067\u306b\u30c7\u30d0\u30a4\u30b9\u306e\u5dee\u7570\u306f\u62bd\u8c61\u5316\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3082\u3061\u308d\u3093\u4eca\u56de\u306e MQTT \u3067\u53ce\u96c6\u3057\u305f\u30c7\u30fc\u30bf\u3082\u4ed6\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u60c5\u5831\u3068\u307e\u3063\u305f\u304f\u540c\u3058\u65b9\u6cd5\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u53ef\u80fd\u3067\u3059\u3002","title":"Lab 3 - \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\uff08MQTT\uff09"},{"location":"fuji/lab3-device-service-mqtt/#lab-3-mqtt","text":"\u524d\u306e\u30e9\u30dc\u3067\u5229\u7528\u3057\u305f\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u53d6\u308a\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306a\u3069\u3092\u30c6\u30b9\u30c8\u3059\u308b\u76ee\u7684\u3067\u306f\u305f\u3044\u3078\u3093\u4fbf\u5229\u3067\u3059\u304c\u3001\u73fe\u5b9f\u4e16\u754c\u3068\u306e\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u306f\u3067\u304d\u307e\u305b\u3093\u3002 \u305d\u3053\u3067\u4eca\u56de\u306f\u3001MQTT \u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u306b\u3082\u3064\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u3092\u7528\u610f\u3057\u3001\u4e0b\u56f3\u306e\u3088\u3046\u306b EdgeX Foundry \u304c\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u3068\u5b9f\u969b\u306b\uff08MQTT \u30d6\u30ed\u30fc\u30ab\u3092\u4ecb\u3057\u3066\uff09\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u72b6\u614b\u3092\u69cb\u6210\u3057\u307e\u3059\u3002","title":"Lab 3 - \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8ffd\u52a0\uff08MQTT\uff09"},{"location":"fuji/lab3-device-service-mqtt/#_1","text":"\u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 git clone https://github.com/kurokobo/edgex-lab-handson.git \u3053\u306e\u30e9\u30dc\u3067\u306f\u3001 lab03 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u307e\u3059\u3002 1 cd lab03","title":"\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f"},{"location":"fuji/lab3-device-service-mqtt/#_2","text":"\u307e\u305a\u306f\u3001\u4eca\u56de\u65b0\u3057\u304f EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u304d\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8\u3092\u6574\u7406\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u5b9f\u969b\u306b\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u52d5\u4f5c\u3055\u305b\u3001\u4ed5\u69d8\u901a\u308a\u306b\u52d5\u304f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002","title":"\u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8\u3068\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_3","text":"\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u4ed5\u69d8\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u8003\u3048\u307e\u3059\u3002 \u4e8c\u7a2e\u985e\u306e\u30bb\u30f3\u30b5\u3092\u6301\u3064 randfloat32 randfloat64 \u4e8c\u7a2e\u985e\u306e\u6587\u5b57\u5217\u60c5\u5831\u3092\u6301\u3064 ping message \u30c8\u30d4\u30c3\u30af DataTopic \u306b\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u3092 15 \u79d2\u3054\u3068\u306b\u914d\u4fe1\u3059\u308b {\"name\":\"MQ_DEVICE\",\"cmd\":\"randfloat32\",\"randfloat32\":\"<\u5024>\"} \u306e\u5f62\u5f0f\u3067\u914d\u4fe1\u3059\u308b \u30c8\u30d4\u30c3\u30af CommandTopic \u3067\u30b3\u30de\u30f3\u30c9\u3092\u5f85\u3061\u53d7\u3051\u308b {\"name\":\"MQTT_DEVICE\",\"method\":\"<get \u307e\u305f\u306f set>\",\"cmd\":\"<\u30b3\u30de\u30f3\u30c9\u540d>\"} \u306e\u5f62\u5f0f\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u308b \u30b3\u30de\u30f3\u30c9\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u3001\u30b3\u30de\u30f3\u30c9\u5fdc\u3058\u3066\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3001\u7d50\u679c\u3092\u30c8\u30d4\u30c3\u30af ResponseTopic \u306b\u914d\u4fe1\u3059\u308b \u30b3\u30de\u30f3\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\u304c set \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b message \u3092\u66f8\u304d\u63db\u3048\u308b \u30b3\u30de\u30f3\u30c9\u304c ping \u3060\u3063\u305f\u5834\u5408\u306f\u3001 pong \u3092\u8fd4\u3059 \u30b3\u30de\u30f3\u30c9\u304c message \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b message \u3092\u8fd4\u3059 \u30b3\u30de\u30f3\u30c9\u304c randfloat32 \u307e\u305f\u306f randfloat64 \u3060\u3063\u305f\u5834\u5408\u306f\u3001\u305d\u308c\u305e\u308c\u5bfe\u5fdc\u3059\u308b\u30bb\u30f3\u30b5\u306e\u5024\u3092\u8fd4\u3059 \u7d50\u679c\u306f {\"name\":\"MQ_DEVICE\",\"method\":\"<\u30e1\u30bd\u30c3\u30c9>\",\"cmd\":\"<\u30b3\u30de\u30f3\u30c9\u540d>\",\"<\u30b3\u30de\u30f3\u30c9\u540d>\":\"<\u5024>\"} \u306e\u5f62\u5f0f\u3067\u914d\u4fe1\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u5074\u304c\u5b9a\u671f\u7684\u306b\u30c7\u30fc\u30bf\u3092\u767a\u4fe1\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u3082\u53d7\u3051\u4ed8\u3051\u308b\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u3067\u3059\u3002\u305f\u3060\u3057\u3088\u304f\u898b\u308b\u3068\u3001\u4e8c\u3064\u3042\u308b\u30bb\u30f3\u30b5\u306e\u3046\u3061 randfloat64 \u306f\u3001\u5024\u306e\u5b9a\u671f\u7684\u306a\u81ea\u52d5\u914d\u4fe1\u306f\u3042\u308a\u307e\u305b\u3093\uff08\u3053\u308c\u306f\u4f0f\u7dda\u3067\u3059\uff09\u3002","title":"\u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306e\u4ed5\u69d8"},{"location":"fuji/lab3-device-service-mqtt/#_4","text":"\u4eca\u56de\u306f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u3092\u6a21\u3057\u305f\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u307e\u3059\u3002MQTT \u3092\u6271\u3046\u306b\u306f\u30d6\u30ed\u30fc\u30ab\u304c\u4e0d\u53ef\u6b20\u306a\u306e\u3067\u3001\u307e\u305a\u306f\u3053\u308c\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 1 2 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto 6de5986ebb1b3715179253857952f143fbf19fa77e201980f8573d96558850fd \u7d9a\u3051\u3066\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u306e\u7528\u610f\u3067\u3059\u3002 Node.js \u3067 MQTT \u3092\u6271\u3048\u308b\u30b3\u30f3\u30c6\u30ca dersimn/mqtt-scripts \u3067\u3001\u6b21\u306e\u3088\u3046\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f mqtt-scripts \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 function getRandomFloat ( min , max ) { return Math . random () * ( max - min ) + min ; } const deviceName = \"MQ_DEVICE\" ; let message = \"test-message\" ; // 1. Publish random number every 15 seconds schedule ( '*/15 * * * * *' , () => { let body = { \"name\" : deviceName , \"cmd\" : \"randfloat32\" , \"randfloat32\" : getRandomFloat ( 25 , 29 ). toFixed ( 1 ) }; publish ( 'DataTopic' , JSON . stringify ( body )); }); // 2. Receive the reading request, then return the response // 3. Receive the put request, then change the device value subscribe ( \"CommandTopic\" , ( topic , val ) => { var data = val ; if ( data . method == \"set\" ) { message = data [ data . cmd ] } else { switch ( data . cmd ) { case \"ping\" : data . ping = \"pong\" ; break ; case \"message\" : data . message = message ; break ; case \"randfloat32\" : data . randfloat32 = getRandomFloat ( 25 , 29 ). toFixed ( 1 ); break ; case \"randfloat64\" : data . randfloat64 = getRandomFloat ( 10 , 1 ). toFixed ( 5 ); break ; } } publish ( \"ResponseTopic\" , JSON . stringify ( data )); }); \u3053\u308c\u3092\u8d77\u52d5\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u696d\u3057\u307e\u3059\u3002IP \u30a2\u30c9\u30ec\u30b9\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002 1 2 3 4 5 $ cd mqtt-scripts $ docker run -d --restart = always --name = mqtt-scripts -v \" $( pwd ) :/scripts\" dersimn/mqtt-scripts --url mqtt://<IP \u30a2\u30c9\u30ec\u30b9> --dir /scripts Unable to find image 'dersimn/mqtt-scripts:latest' locally ... 9d52b4956ebbec60dd0f93bdf9750ff915fefd8e8c58d3ce8bc7ba1429693d2b","title":"\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306e\u8d77\u52d5"},{"location":"fuji/lab3-device-service-mqtt/#_5","text":"\u30d6\u30ed\u30fc\u30ab\u306e\u5168\u30c8\u30d4\u30c3\u30af\u3092\u8cfc\u8aad\u3057\u307e\u3059\u300215 \u79d2\u3054\u3068\u306b DataTopic \u306b\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u304c\u5c4a\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.4\" } DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"28.6\" } \u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 CommandTopic \u306b\u30b3\u30de\u30f3\u30c9\u3092\u914d\u4fe1\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"ping\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"randfloat32\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"randfloat64\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"message\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"set\",\"cmd\":\"message\",\"message\":\"modified-message\"}' $ docker run --init -it --rm efrecon/mqtt-client pub -h 192 .168.0.100 -t \"CommandTopic\" -m '{\"name\":\"MQTT_DEVICE\",\"method\":\"get\",\"cmd\":\"message\"}' \u8cfc\u8aad\u3057\u3066\u3044\u308b\u5074\u3067\u306f\u3001\u30b3\u30de\u30f3\u30c9\u304c CommandTopic \u306b\u5c4a\u304d\u3001\u305d\u306e\u30b3\u30de\u30f3\u30c9\u306b\u5fdc\u3058\u305f\u5fdc\u7b54\u304c ResponseTopic \u306b\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001 message \u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u304c\u3001 set \u30e1\u30bd\u30c3\u30c9\u306e\u5b9f\u884c\u524d\u5f8c\u3067\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"ping\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"ping\" , \"ping\" : \"pong\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat32\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.6\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat64\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"randfloat64\" , \"randfloat64\" : \"8.39883\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" , \"message\" : \"test-message\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"set\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"set\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } ... CommandTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" } ResponseTopic { \"name\" : \"MQTT_DEVICE\" , \"method\" : \"get\" , \"cmd\" : \"message\" , \"message\" : \"modified-message\" } \u3053\u3053\u307e\u3067\u3067\u3001\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u72b6\u614b\u304c\u4f5c\u308c\u307e\u3057\u305f\u3002\u3053\u3053\u307e\u3067\u306f EdgeX Foundry \u306f\u307e\u3063\u305f\u304f\u95a2\u4fc2\u306a\u304f\u3001\u305f\u3060\u5358\u306b\u524d\u8ff0\u306e\u4ed5\u69d8\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u8ad6\u7406\u7684\u306b\u4f5c\u3063\u305f\u3060\u3051\u3067\u3059\u3002","title":"\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306e\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_6","text":"\u3055\u3066\u3001\u3053\u3053\u304b\u3089\u304c\u672c\u984c\u3067\u3059\u3002\u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30d0\u30a4\u30b9\u3092 EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u304f\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210"},{"location":"fuji/lab3-device-service-mqtt/#_7","text":"\u73fe\u5b9f\u4e16\u754c\u306b\u5b58\u5728\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u30bb\u30f3\u30b5\u3084\u30b9\u30a4\u30c3\u30c1\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u7570\u306a\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30a4\u30b9\u306b\u6301\u3064\u305f\u3081\u3001\u305d\u308c\u305e\u308c\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u65b9\u6cd5\u3067\u5024\u306e\u53d6\u5f97\u3084\u5236\u5fa1\u547d\u4ee4\u306e\u767a\u884c\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u5b9f\u614b\u3092\u8e0f\u307e\u3048\u3001EdgeX Foundry \u3067\u306f\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3068 EdgeX Foundry \u306e\u9593\u3092\u53d6\u308a\u6301\u3063\u3066\u304f\u308c\u308b\u5b58\u5728\u3068\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u3088\u3070\u308c\u308b\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u304a\u304a\u3080\u306d\u30c7\u30d0\u30a4\u30b9\u306e\u7a2e\u985e\u3054\u3068\u306b\u7528\u610f\u3059\u308b\u3082\u306e\u3068\u601d\u3048\u3070\u3088\u3055\u305d\u3046\u3067\u3001\u3064\u307e\u308a\u3001\u3072\u3068\u3064\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u3072\u3068\u3064\u4ee5\u4e0a\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5236\u5fa1\u3092\u4efb\u305b\u3089\u308c\u308b\u3088\u3046\u3067\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u3002 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u53d6\u5f97\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u5236\u5fa1\u547d\u4ee4\u306e\u767a\u884c\u3092\u884c\u3048\u308b REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u306e\u5236\u5fa1\u547d\u4ee4\u3092\u5b9f\u30c7\u30d0\u30a4\u30b9\u306b\u5408\u308f\u305b\u305f\u547d\u4ee4\u306b\u7ffb\u8a33\u3057\u3066\u5b9f\u884c\u3057\u3001\u5b9f\u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u60c5\u5831\u3092\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5408\u308f\u305b\u305f\u60c5\u5831\u306b\u7ffb\u8a33\u3057\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5c4a\u3051\u308b \u4e8b\u524d\u306b\u5b9a\u3081\u3089\u308c\u305f\u5834\u5408\u306f\u3001\u5b9a\u671f\u7684\u306b\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u7279\u5b9a\u306e\u51e6\u7406\u3092\u884c\u3044\u3001\u7d50\u679c\u3092\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u5c4a\u3051\u308b \u307e\u305f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u306e\u3082\u306e\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3061\u307e\u3059\u3002 MQTT \u3084 Modbus \u306a\u3069\u696d\u754c\u3067\u591a\u304f\u4f7f\u308f\u308c\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5408\u308f\u305b\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3059\u3067\u306b\u53c2\u8003\u5b9f\u88c5\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u8907\u96d1\u3067\u306a\u3044\u69cb\u6210\u306e\u5834\u5408\u306f\u5145\u5206\u306b\u6d41\u7528\u3067\u304d\u308b \u53c2\u8003\u5b9f\u88c5\u306e\u6d41\u7528\u3067\u306f\u4e0d\u8db3\u3059\u308b\u5834\u5408\u306f\u3001\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b SDK \u3092\u5229\u7528\u3057\u3066\u6c17\u8efd\u306b\u81ea\u88fd\u3067\u304d\u308b\uff08C \u8a00\u8a9e\u307e\u305f\u306f Go \u8a00\u8a9e\uff09 \u3059\u3079\u3066\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3053\u306e SDK \u3092\u7528\u3044\u3066\u5171\u901a\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u3082\u3068\u3067\u5b9f\u88c5\u3055\u308c\u308b\u305f\u3081\u3001\u64cd\u4f5c\u65b9\u6cd5\u3084\u8a2d\u5b9a\u65b9\u6cd5\u306f\u81ea\u305a\u3068\u5171\u901a\u5316\u3055\u308c\u3001\u76f8\u4e92\u904b\u7528\u6027\u306f\u9ad8\u307e\u308b EdgeX Foundry \u3092\u53d6\u308a\u5dfb\u304f\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u6210\u719f\u306b\u3088\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u30d9\u30f3\u30c0\u304c\u305d\u306e\u30c7\u30d0\u30a4\u30b9\u7528\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3057\u305f\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u7d44\u307f\u8fbc\u307e\u308c\u305f\u308a\u3001\u7b2c\u4e09\u8005\u306b\u3088\u308a\u958b\u767a\u3055\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5145\u5b9f\u3082\u671f\u5f85\u3067\u304d\u308b EdgeX Foundry \u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u7cfb\u306e\u88fd\u54c1\u306e\u5834\u5408\u3001\u88fd\u54c1\u306e\u767a\u5c55\u306b\u306f\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306e\u6210\u719f\u304c\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002\u3053\u306e\u89b3\u70b9\u3067\u306f\u3001EdgeX Foundry \u306f\u3001\u5546\u7528\u74b0\u5883\u3078\u306e\u5229\u7528\u3092\u8b33\u3063\u305f\u30d0\u30fc\u30b8\u30e7\u30f3 1.0 \u306e\u30ea\u30ea\u30fc\u30b9\u304c 2019 \u5e74\u306e\u51ac\u3068\u3064\u3044\u3053\u306e\u524d\u306a\u306e\u3067\u3001\u307e\u3060\u307e\u3060\u3053\u308c\u304b\u3089\u3067\u3059\u306d\u3002","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u6982\u5ff5"},{"location":"fuji/lab3-device-service-mqtt/#_8","text":"\u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e 3 \u3064\u306e\u8981\u7d20\u3092\u8003\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u306e\u3082\u306e \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u3068\u306e\u9593\u3092\u4ef2\u4ecb\u3059\u308b\u3001C \u8a00\u8a9e\u307e\u305f\u306f Go \u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u4eca\u56de\u306f\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b \u5f8c\u8ff0\u306e\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3093\u3067\u52d5\u4f5c\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08Device Profile\uff09 YAML \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9 \u7ba1\u7406\u5bfe\u8c61\u306e\u30c7\u30d0\u30a4\u30b9\u7a2e\u5225\u304c\u6301\u3064\u30ea\u30bd\u30fc\u30b9\u3084\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u6301\u3064\u5024\u306e\u610f\u5473\u3001\u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u884c\u3048\u308b\u64cd\u4f5c\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\uff08Drvice Service Configuration\uff09 configuration.toml \u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u81ea\u8eab\u306e\u8a2d\u5b9a\u3084\u3001\u9023\u643a\u3059\u308b EdgeX Foundry \u306e\u4ed6\u306e\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u7d10\u3065\u3051\u3066\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u30c7\u30d0\u30a4\u30b9\u3084\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u81ea\u52d5\u5b9f\u884c\u51e6\u7406\u306a\u3069\u3082\u5b9a\u7fa9\u3059\u308b \u305d\u306e\u4ed6\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u69cb\u6210\u8981\u7d20"},{"location":"fuji/lab3-device-service-mqtt/#_9","text":"\u4eca\u56de\u306f\u3001 mqtt \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e mqtt.test.device.profile.yml \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 name : \"Test.Device.MQTT.Profile\" manufacturer : \"Dell\" model : \"MQTT-2\" labels : - \"test\" description : \"Test device profile\" deviceResources : - name : randfloat32 description : \"device random number with Base64 encoding\" properties : value : { type : \"Float32\" , size : \"4\" , readWrite : \"R\" , defaultValue : \"0.00\" , minimum : \"100.00\" , maximum : \"0.00\" , floatEncoding : \"Base64\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : randfloat64 description : \"device random number with e notion\" properties : value : { type : \"Float64\" , size : \"4\" , readWrite : \"R\" , defaultValue : \"0.00\" , minimum : \"100.00\" , maximum : \"0.00\" , floatEncoding : \"eNotation\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : ping description : \"device awake\" properties : value : { type : \"String\" , size : \"0\" , readWrite : \"R\" , defaultValue : \"oops\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } - name : message description : \"device notification message\" properties : value : { type : \"String\" , size : \"0\" , readWrite : \"W\" , scale : \"\" , offset : \"\" , base : \"\" } units : { type : \"String\" , readWrite : \"R\" , defaultValue : \"\" } deviceCommands : - name : testrandfloat32 get : - { index : \"1\" , operation : \"get\" , deviceResource : \"randfloat32\" } - name : testrandfloat64 get : - { index : \"1\" , operation : \"get\" , deviceResource : \"randfloat64\" } - name : testping get : - { index : \"1\" , operation : \"get\" , deviceResource : \"ping\" } - name : testmessage get : - { index : \"1\" , operation : \"get\" , deviceResource : \"message\" } set : - { index : \"1\" , operation : \"set\" , deviceResource : \"message\" } coreCommands : - name : testrandfloat32 get : path : \"/api/v1/device/{deviceId}/testrandfloat32\" responses : - code : \"200\" description : \"get the random float32 value\" expectedValues : [ \"randfloat32\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testrandfloat64 get : path : \"/api/v1/device/{deviceId}/testrandfloat64\" responses : - code : \"200\" description : \"get the random float64 value\" expectedValues : [ \"randfloat64\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testping get : path : \"/api/v1/device/{deviceId}/testping\" responses : - code : \"200\" description : \"ping the device\" expectedValues : [ \"ping\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] - name : testmessage get : path : \"/api/v1/device/{deviceId}/testmessage\" responses : - code : \"200\" description : \"get the message\" expectedValues : [ \"message\" ] - code : \"500\" description : \"internal server error\" expectedValues : [] put : path : \"/api/v1/device/{deviceId}/testmessage\" parameterNames : [ \"message\" ] responses : - code : \"204\" description : \"set the message.\" expectedValues : [] - code : \"500\" description : \"internal server error\" expectedValues : [] \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3068\u4e00\u5bfe\u4e00\u3067\u306f\u306a\u304f\u3001\u4f8b\u3048\u3070\u30c7\u30d0\u30a4\u30b9\u306e\u30e2\u30c7\u30eb\u3054\u3068\u306b\u3072\u3068\u3064\u7528\u610f\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059 \u3002 \u3053\u306e\u4f8b\u3067\u306f\u3001\u5192\u982d\u306e 6 \u884c\u3067\u30c7\u30d0\u30a4\u30b9\u306e\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u52d5\u4f5c\u3055\u305b\u305f\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u306f\u3001Dell \u88fd\u306e MQTT-2 \u3068\u3044\u3046\u30e2\u30c7\u30eb\u3067\u3042\u308b\u3001\u3068\u3044\u3046\u60f3\u5b9a\u3067\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u5f8c\u3001\u5927\u304d\u304f deviceResources\u3001deviceCommands\u3001coreCommands\u3001\u306e\u4e09\u3064\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u7d9a\u3044\u3066\u3044\u307e\u3059\u3002 deviceResources \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u304c\u6301\u3063\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3068\u3001\u305d\u308c\u304c\u6301\u3064\u5024\u306e\u610f\u5473\u3092\u6c7a\u3081\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u30ea\u30bd\u30fc\u30b9 randfloat64 \u304c\u3042\u308a\u3001\u305d\u308c\u306f 0.00 \u304b\u3089 100.00 \u306e\u7bc4\u56f2\u306e Float64 \u578b\u306e\u5024\u3092\u6301\u3064\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001message \u30ea\u30bd\u30fc\u30b9\u306f String \u578b\u306e\u5024\u3092\u6301\u3061\u3001\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u3068\u9055\u3063\u3066\u66f8\u304d\u63db\u3048\u304c\u53ef\u80fd\uff08W\uff09\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 deviceCommands \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\uff08get \u307e\u305f\u306f set\uff09\u3054\u3068\u306b\u53c2\u7167\u307e\u305f\u306f\u64cd\u4f5c\u3055\u308c\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u7d10\u4ed8\u3051\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001testrandfloat64 \u30b3\u30de\u30f3\u30c9\u306e get \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u5148\u306b deviecResources \u3067\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9 randfloat64 \u304b\u3089\u306e\u5024\u306e\u8aad\u307f\u53d6\u308a\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001testmessage \u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001set \u307e\u305f\u306f get \u30e1\u30bd\u30c3\u30c9\u306b\u3088\u308a\u3001\u30ea\u30bd\u30fc\u30b9 message \u306e\u5024\u306e\u53d6\u5f97\u3084\u5909\u66f4\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u3053\u3067\u306f\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3072\u3068\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7d10\u4ed8\u3051\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u4e00\u56de\u306e get \u64cd\u4f5c\u3067\u8907\u6570\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u3092\u540c\u6642\u306b\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3082\u69cb\u6210\u3067\u304d\u307e\u3059\u3002 Edge Xpert \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001\u305d\u306e\u3088\u3046\u306a\u4f8b\u304c\u89e3\u8aac\u3055\u308c \u3066\u3044\u307e\u3059\u3002 coreCommands \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u304c testrandfloat64 \u30b3\u30de\u30f3\u30c9\u306b GET \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u305d\u306e\u547d\u4ee4\u306f\u30d1\u30b9 /api/v1/device/{deviceId}/testrandfloat64 \u306b\u6e21\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u30d1\u30b9\u306f\u3001\u5148\u306e deviceCommands \u3067\u5b9a\u7fa9\u3057\u305f testrandfloat64 \u30b3\u30de\u30f3\u30c9\u3092\u8868\u3059\u3082\u306e\u3067\u3059\u3002\u305d\u3057\u3066\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u7d50\u679c\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u30b3\u30fc\u30c9 200 \u304c\u8fd4\u3063\u3066\u304d\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\u306b\u542b\u307e\u308c\u308b\u5024\u3092 randfloat32 \u306e\u5024\u3068\u3057\u3066\u53d6\u308a\u8fbc\u3080\u3088\u3046\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001testmessage \u30b3\u30de\u30f3\u30c9\u306e\u307f\u3001\u307b\u304b\u306e\u30b3\u30de\u30f3\u30c9\u3068\u7570\u306a\u308a PUT \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u52d5\u4f5c\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002","title":"\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb"},{"location":"fuji/lab3-device-service-mqtt/#_10","text":"\u4eca\u56de\u306f\u3001configuration.toml \u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u74b0\u5883\u4f9d\u5b58\u306e\u56fa\u5b9a\u5024\u3092\u542b\u307f\u307e\u3059\u3002\u81ea\u5206\u306e\u74b0\u5883\u3067\u8a66\u3059\u5834\u5408\u306f\u3001IP \u30a2\u30c9\u30ec\u30b9\u3092\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 $ cat mqtt/configuration.toml # configuration.toml [ Writable ] LogLevel = 'DEBUG' [ Service ] Host = \"edgex-device-mqtt\" Port = 49982 ConnectRetries = 3 Labels = [] OpenMsg = \"device mqtt started\" Timeout = 5000 EnableAsyncReadings = true AsyncBufferSize = 16 [ Registry ] Host = \"edgex-core-consul\" Port = 8500 CheckInterval = \"10s\" FailLimit = 3 FailWaitTime = 10 Type = \"consul\" [ Logging ] EnableRemote = false File = \"./device-mqtt.log\" [ Clients ] [ Clients.Data ] Name = \"edgex-core-data\" Protocol = \"http\" Host = \"edgex-core-data\" Port = 48080 Timeout = 50000 [ Clients.Metadata ] Name = \"edgex-core-metadata\" Protocol = \"http\" Host = \"edgex-core-metadata\" Port = 48081 Timeout = 50000 [ Clients.Logging ] Name = \"edgex-support-logging\" Protocol = \"http\" Host = \"edgex-support-logging\" Port = 48061 [ Device ] DataTransform = true InitCmd = \"\" InitCmdArgs = \"\" MaxCmdOps = 128 MaxCmdValueLen = 256 RemoveCmd = \"\" RemoveCmdArgs = \"\" ProfilesDir = \"/custom-config\" # Pre-define Devices [[ DeviceList ]] Name = \"MQ_DEVICE\" Profile = \"Test.Device.MQTT.Profile\" Description = \"General MQTT device\" Labels = [ \"MQTT\" ] [ DeviceList.Protocols ] [ DeviceList.Protocols.mqtt ] Schema = \"tcp\" Host = \"192.168.0.100\" Port = \"1883\" ClientId = \"CommandPublisher\" User = \"\" Password = \"\" Topic = \"CommandTopic\" [[ DeviceList.AutoEvents ]] Frequency = \"30s\" OnChange = false Resource = \"testrandfloat64\" # Driver configs [ Driver ] IncomingSchema = \"tcp\" IncomingHost = \"192.168.0.100\" IncomingPort = \"1883\" IncomingUser = \"\" IncomingPassword = \"\" IncomingQos = \"0\" IncomingKeepAlive = \"3600\" IncomingClientId = \"IncomingDataSubscriber\" IncomingTopic = \"DataTopic\" ResponseSchema = \"tcp\" ResponseHost = \"192.168.0.100\" ResponsePort = \"1883\" ResponseUser = \"\" ResponsePassword = \"\" ResponseQos = \"0\" ResponseKeepAlive = \"3600\" ResponseClientId = \"CommandResponseSubscriber\" ResponseTopic = \"ResponseTopic\" \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u305f\u308a\u3001\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u308a\u3057\u307e\u3059\u3002 \u524d\u534a\u90e8\u5206\u3067\u306f EdgeX Foundry \u5185\u306e\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u306a\u3069\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u5b9f\u969b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5b9a\u7fa9\u306f [[DeviceList]] \u306e\u90e8\u5206\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb Test.Device.MQTT.Profile \u306b\u7d10\u3065\u3051\u3066\u30c7\u30d0\u30a4\u30b9 MQ_DEVICE \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u5229\u7528\u3059\u308b MQTT \u30d6\u30ed\u30fc\u30ab\u3082\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 [[DeviceList.AutoEvents]] \u306e\u90e8\u5206\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u5074\u304b\u3089\u306f\u81ea\u52d5\u3067\u306f\u914d\u4fe1\u3055\u308c\u306a\u3044\u5024\u3067\u3042\u3063\u305f randfloat64 \u306e\u5024\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3059\u308b\u305f\u3081\u300130 \u79d2\u3054\u3068\u306b testrandfloat64 \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 [Driver] \u306e\u90e8\u5206\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u60c5\u5831\u3092\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b\u8cfc\u8aad\u3059\u308b MQTT \u30d6\u30ed\u30fc\u30ab\u3084\u30c8\u30d4\u30c3\u30af\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u306a\u304a\u3001\u4eca\u56de\u306f\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067\u5b9f\u30c7\u30d0\u30a4\u30b9\u306e\u5b9a\u7fa9\u3082\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30d0\u30a4\u30b9\u306f\u3042\u3068\u304b\u3089\u3082\u8ffd\u52a0\u304c\u53ef\u80fd\u3067\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3042\u304f\u307e\u3067 MQTT \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001\u5229\u7528\u3057\u305f\u3044\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u9055\u3048\u3070\u5f53\u7136\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u66f8\u304f\u3079\u304d\u5185\u5bb9\u3082\u5909\u308f\u308a\u307e\u3059\u3002","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a"},{"location":"fuji/lab3-device-service-mqtt/#edgex-foundry","text":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u305f\u3089\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3080 EdgeX Foundry \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 \u4eca\u56de\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001 edgexfoundry/docker-device-mqtt-go \u30a4\u30e1\u30fc\u30b8\u304c\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3001\u4eca\u56de\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u542b\u307e\u308c\u308b mqtt \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3055\u305f\u3046\u3048\u3067\u3001\u8d77\u52d5\u6642\u306b\u306f\u305d\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3057\u3066 EdgeX Foundry \u306b\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u304c\u767b\u9332\u3055\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 device-mqtt : image : edgexfoundry/docker-device-mqtt-go:1.1.1 ports : - \"49982:49982\" container_name : edgex-device-mqtt hostname : edgex-device-mqtt networks : - edgex-network volumes : - db-data:/data/db - log-data:/edgex/logs - consul-config:/consul/config - consul-data:/consul/data - ./mqtt:/custom-config depends_on : - data - command entrypoint : - /device-mqtt - --registry=consul://edgex-core-consul:8500 - --confdir=/custom-config \u3067\u306f\u3001\u5b9f\u969b\u306b\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u3066 EdgeX Foundry \u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 1 $ docker-compose up -d","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3093\u3060 EdgeX Foundry \u306e\u8d77\u52d5"},{"location":"fuji/lab3-device-service-mqtt/#_11","text":"\u307e\u305a\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3084\u30c7\u30d0\u30a4\u30b9\u304c\u6b63\u5e38\u306b EdgeX Foundry \u306b\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3001\u305d\u306e\u5f8c\u3001\u5024\u306e\u53ce\u96c6\u3084\u30b3\u30de\u30f3\u30c9\u64cd\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_12","text":"\u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067 device-virtual \u306e\u5b58\u5728\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u6cd5 \u3067\u3001\u4eca\u56de\u306f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9 edgex-device-mqtt \u3068\u30c7\u30d0\u30a4\u30b9 MQ_DEVICE \u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3001\u767b\u9332\u306f\u6210\u529f\u3057\u3066\u3044\u307e\u3059\u3002\u30e9\u30af\u306a\u306e\u306f UI \u304b CLI \u3067\u3059\u306d\u3002 \u307e\u305f\u3001\u3053\u308c\u307e\u3067\u7d39\u4ecb\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001EdgeX Foundry \u306f\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u7fa4\u306e\u72b6\u614b\u7ba1\u7406\u306b HashiCorp \u306e Consul \u3092\u5229\u7528\u3057\u3066\u304a\u308a\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u72b6\u614b\u3084\u767b\u9332\u72b6\u614b\u306f\u3001\u3053\u306e Consul \u3092\u901a\u3058\u3066\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 Consul \u306e GUI \u306b\u306f\u3001http://192.168.0.100:8500/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002 Consul \u306e GUI \u3053\u3053\u3067\u3001 [Services] \u30bf\u30d6\u3067 edgex-device-mqtt \u304c\u7dd1\u8272\u3067\u3042\u308b [Key/Value] \u30bf\u30d6\u3067 edgex > devices > 1.0 \u306b edgex-device-mqtt \u304c\u3042\u308b [Key/Value] \u30bf\u30d6\u3067 edgex > devices > 1.0 > edgex-device-mqtt > DeviceList > 0 > Name \u304c MQ_DEVICE \u3067\u3042\u308b \u3042\u305f\u308a\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3001\u767b\u9332\u306f\u3067\u304d\u3066\u3044\u308b\u3068\u8003\u3048\u3066\u3088\u3044\u3067\u3057\u3087\u3046\u3002","title":"\u767b\u9332\u72b6\u614b\u306e\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_13","text":"\u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30bb\u30f3\u30b5 randfloat32 \u306e\u5024\u3092 15 \u79d2\u3054\u3068\u306b\u81ea\u52d5\u7684\u306b MQTT \u30c8\u30d4\u30c3\u30af\u306b\u914d\u4fe1\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306f\u3053\u308c\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u69cb\u6210\u3057\u307e\u3057\u305f\u306e\u3067\u3001EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002 \u3053\u308c\u3082\u3001\u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u5024\u3092\u78ba\u8a8d\u3057\u305f\u65b9\u6cd5 \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3082\u30e9\u30af\u306a\u306e\u306f GUI \u304b CLI \u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u3001API \u3067\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 $ curl -s http://localhost: 48080 /api/v 1 /reading/name/randfloat 32 / 3 | jq [ { \"id\" : \"23fdac76-0870-4b9d-b653-561d8a7c0423\" , \"created\" : 1579707885029 , \"origin\" : 1579707885005379300 , \"modified\" : 1579707885029 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"QdpmZg==\" }, { \"id\" : \"5c086b1d-6b38-48c0-9aef-9b800f9c72ab\" , \"created\" : 1579707870018 , \"origin\" : 1579707870004742000 , \"modified\" : 1579707870018 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"QeGZmg==\" }, { \"id\" : \"de67c865-0406-408d-b238-d33de1fe1032\" , \"created\" : 1579707855022 , \"origin\" : 1579707855011006200 , \"modified\" : 1579707855022 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"randfloat32\" , \"value\" : \"Qd2Zmg==\" } ] \u6642\u523b\u306f\u30a8\u30dd\u30c3\u30af\u30df\u30ea\u79d2\uff08origin \u306f\u30a8\u30dd\u30c3\u30af\u30ca\u30ce\u79d2\uff09\u306a\u306e\u3067\u3001\u5909\u63db\u3059\u308b\u3068 15 \u79d2\u304a\u304d\u3067\u3042\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 $ date -d \"@1579707885.029\" Wed 22 Jan 2020 03 :44:45 PM UTC $ date -d \"@1579707870.018\" Wed 22 Jan 2020 03 :44:30 PM UTC $ date -d \"@1579707855.022\" Wed 22 Jan 2020 03 :44:15 PM UTC","title":"\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u5024\u306e\u53ce\u96c6\u306e\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_14","text":"randfloat64 \u306e\u5024\u306f\u3001\u81ea\u52d5\u3067\u306f\u914d\u4fe1\u3055\u308c\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\uff08configuration.toml\uff09\u306b [[DeviceList.AutoEvents]] \u3092\u5b9a\u7fa9\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u5074\u304b\u3089 30 \u79d2\u3054\u3068\u306b\u81ea\u52d5\u3067\u53ce\u96c6\u3055\u305b\u3066\u3044\u307e\u3057\u305f\u3002 \u3053\u308c\u3082\u30c7\u30fc\u30bf\u306e\u84c4\u7a4d\u3092\u4efb\u610f\u306e\u65b9\u6cd5\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070 CLI \u3067\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002 1 2 3 4 $ edgex-cli reading list MQ_DEVICE -l 10 | grep randfloat64 5df1da1a-91db-41cf-99fa-962e87077395 randfloat64 MQ_DEVICE 1579709342806935600 4 .924730e+00 15 seconds 15 seconds 50 years 7c33bb76-c9e9-4ef8-a410-80227e236d13 randfloat64 MQ_DEVICE 1579709312695223100 3 .734020e+00 45 seconds 45 seconds 50 years 053987f1-5a89-4cc2-a433-03432caa9039 randfloat64 MQ_DEVICE 1579709282611878800 9 .320210e+00 About a minute About a minute 50 years \u3053\u308c\u3082\u5909\u63db\u3059\u308b\u3068 30 \u79d2\u304a\u304d\u3067\u3042\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 $ date -d \"@1579709342.806935600\" Wed Jan 22 16 :09:02 UTC 2020 $ date -d \"@1579709312.695223100\" Wed Jan 22 16 :08:32 UTC 2020 $ date -d \"@1579709282.611878800\" Wed Jan 22 16 :08:02 UTC 2020","title":"\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u5b9f\u884c\u30a4\u30d9\u30f3\u30c8\u306e\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_15","text":"\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u30ea\u30bd\u30fc\u30b9 message \u306e\u5024\u306f EdgeX Foundry \u304b\u3089\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306a\u4ed5\u69d8\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u3082\u305d\u308c\u306b\u5408\u308f\u305b\u3066 PUT \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6319\u52d5\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3057\u305f\u3002 \u3067\u306f\u3001\u3053\u306e\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3057\u305f\u5404\u30b3\u30de\u30f3\u30c9\u306f\u3001\u5185\u90e8\u3067\u306f REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5f85\u3061\u53d7\u3051\u3066\u3066\u304a\u308a\u3001\u305d\u3057\u3066\u3053\u306e URL \u306f\u3001API \u7d4c\u7531\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u3092\u793a\u3059\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7d50\u679c\u306b\u542b\u307e\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE | jq ... \"id\" : \"77fccbb8-f33b-42d8-bf21-6d55cdde2068\" , \"name\" : \"MQ_DEVICE\" , ... \"commands\" : [ ... \"name\" : \"testmessage\" , ... \"get\" : { \"path\" : \"/api/v1/device/{deviceId}/testmessage\" , ... \"url\" : \"http://edgex-core-command:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4\" } , \"put\" : { \"path\" : \"/api/v1/device/{deviceId}/testmessage\" , ... \"url\" : \"http://edgex-core-command:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4\" , ... EdgeX Foundry \u304c\u30c7\u30d0\u30a4\u30b9\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306f\u3001\u5185\u90e8\u3067\u306f\u3053\u306e URL \u306b\u5bfe\u3057\u3066 GET \u306a\u308a PUT \u306a\u308a\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u308f\u3051\u3067\u3059\u3002\u305d\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u305d\u308c\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001\u8a2d\u5b9a\u3057\u305f\u3068\u304a\u308a\u306b\u7ffb\u8a33\u3057\u3066\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u64cd\u4f5c\u304c\u5b9f\u884c\u3055\u308c\u5fdc\u7b54\u304c\u8fd4\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u3053\u3067\u306f\u5b9f\u969b\u306b\u3001\u78ba\u8a8d\u3067\u304d\u305f URL \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u307e\u3059\u3002\u5916\u90e8\u304b\u3089\u3053\u306e URL \u3092\u76f4\u63a5\u53e9\u304f\u3068\u304d\u306f\u3001\u30db\u30b9\u30c8\u540d\u90e8\u5206\u3092\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u305f\u3046\u3048\u3067\u53e9\u304d\u307e\u3059\u3002\u4eca\u56de\u3067\u3042\u308c\u3070\u3001\u6b21\u306e\u3088\u3046\u306a\u64cd\u4f5c\u3067\u73fe\u5728\u5024\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4 | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579710432121478400 , \"readings\" : [ { \"origin\" : 1579710432109675800 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"test-message\" } ] , \"EncodedEvent\" : null } \u307e\u3060\u4f55\u3082\u5909\u66f4\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u521d\u671f\u5024\uff08mqtt-script.js \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\uff09\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002 \u3067\u306f\u3001\u5909\u66f4\u306e PUT \u3092\u6295\u3052\u307e\u3059\u3002JSON \u3092\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306b\u542b\u3081\u3066 PUT \u3057\u307e\u3059\u3002 1 $ curl -s -X PUT -d '{\"message\":\"modified-message\"}' http://localhost:48082/api/v1/device/77fccbb8-f33b-42d8-bf21-6d55cdde2068/command/4daa4148-7c0e-4cfd-81cc-b2b740bb4de4 \u30a8\u30e9\u30fc\u304c\u306a\u3051\u308c\u3070\u3001\u518d\u5ea6 GET \u3059\u308b\u3068\u3001\u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u3068\u3053\u308d\u3067\u3001URL \u306f /api/v1/device/<\u30c7\u30d0\u30a4\u30b9 ID>/command/<\u30b3\u30de\u30f3\u30c9 ID> \u306a\u30d1\u30b9\u3067\u3059\u304c\u3001\u5b9f\u306f\u308f\u3056\u308f\u3056 ID \u3092\u8abf\u3079\u306a\u304f\u3066\u3082\u3001/api/v1/device/name/<\u30c7\u30d0\u30a4\u30b9\u540d>/command/<\u30b3\u30de\u30f3\u30c9\u540d> \u3067\u3082\u6a5f\u80fd\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u304a\u597d\u307f\u306b\u5408\u308f\u305b\u3066\u3069\u3061\u3089\u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u4eca\u5ea6\u306f\u3053\u3061\u3089\u306b GET \u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579710963293832000 , \"readings\" : [ { \"origin\" : 1579710963283338200 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"modified-message\" } ] , \"EncodedEvent\" : null } \u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u306a\u304a\u3001\u3053\u306e\u3088\u3046\u306a GET \u3084 PUT \u306b\u76f8\u5f53\u3059\u308b\u64cd\u4f5c\u306f\u3001GUI \u3067\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002","title":"\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u78ba\u8a8d"},{"location":"fuji/lab3-device-service-mqtt/#_16","text":"\u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\uff08\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\uff09\u3092\u7528\u610f\u3057\u3001\u305d\u308c\u306b\u5408\u308f\u305b\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3057\u3066\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u3092 EdgeX Foundry \u306e\u5236\u5fa1\u4e0b\u306b\u304a\u3044\u305f\u3046\u3048\u3067\u3001\u5b9f\u969b\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u5b9f\u969b\u306e\u30b7\u30fc\u30f3\u3067\u306f\u3001\u672c\u5f53\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u672c\u5f53\u306e\u4ed5\u69d8\u306b\u5408\u308f\u305b\u3066\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u305d\u308c\u81ea\u4f53\u306e\u5b9f\u88c5\u3092\u542b\u3081\u3066\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u306b\u306a\u308b\u53ef\u80fd\u6027\u3082\u3082\u3061\u308d\u3093\u3042\u308b\u308f\u3051\u3067\u3059\u3002 \u304c\u3001\u4eca\u56de\u78ba\u8a8d\u3057\u305f\u901a\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u3084\u74b0\u5883\u306b\u4f9d\u5b58\u3059\u308b\u90e8\u5206\uff08\u30ea\u30bd\u30fc\u30b9\u3084\u30b3\u30de\u30f3\u30c9\u306e\u540d\u524d\u3084\u6570\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u60c5\u5831\u3084\u30c8\u30d4\u30c3\u30af\u540d\u306a\u3069\uff09\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u3057\u3066\u5225\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u88c5\u305d\u308c\u81ea\u4f53\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5f93\u3063\u3066\u6de1\u3005\u3068\u52d5\u304f\u3060\u3051\u3067\u3082\u3042\u308a\u307e\u3059\u3002 \u4f8b\u3048\u3070 Raspberry Pi \u306b\u63a5\u7d9a\u3057\u305f\u30bb\u30f3\u30b5\u306e\u5024\u3092\u53d6\u308a\u8fbc\u307f\u305f\u3044\u5834\u5408\u3092\u8003\u3048\u308b\u3068\u3001\u5b9f\u969b\u306e\u30bb\u30f3\u30b5\u5024\u3092 MQTT \u30c8\u30d4\u30c3\u30af\u306b\u6295\u3052\u308b\u90e8\u5206\u306f\u81ea\u88fd\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3067\u3042\u308c\u3070\u305d\u306e\u969b\u306b\u3001\u9006\u306b\u4eca\u56de\u4f7f\u3063\u305f\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u4ed5\u69d8\u3092\u524d\u63d0\u306b\u3057\u305f\u6295\u3052\u65b9\u306b\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305d\u3046\u3059\u308c\u3070\u3001\u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u305d\u306e\u307e\u307e\u5b9f\u969b\u306b\u6d41\u7528\u3067\u304d\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u4eca\u56de\u306f MQTT \u306e\u4f8b\u3067\u3057\u305f\u304c\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u53c2\u8003\u5b9f\u88c5\u3082\u3001\u74b0\u5883\u4f9d\u5b58\u306e\u90e8\u5206\u304c\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7fa4\u3067\u5916\u5728\u5316\u3067\u304d\u308b\u3088\u3046\u306a\u6c4e\u7528\u6027\u306e\u3042\u308b\u5f62\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306b\u69d8\u3005\u306a\u30c7\u30d0\u30a4\u30b9\u3067\u4f7f\u3044\u307e\u308f\u305b\u305d\u3046\u3067\u3059\u3002 \u306a\u304a\u3001EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u307e\u308c\u305f\u30c7\u30fc\u30bf\u306f\u3001\u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u6271\u3063\u305f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a \u3084\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b\u6301\u3061\u51fa\u305b\u307e\u3059\u3002\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u306b\u96c6\u7d04\u3055\u308c\u308b\u6bb5\u968e\u3067\u3001\u3059\u3067\u306b\u30c7\u30d0\u30a4\u30b9\u306e\u5dee\u7570\u306f\u62bd\u8c61\u5316\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3082\u3061\u308d\u3093\u4eca\u56de\u306e MQTT \u3067\u53ce\u96c6\u3057\u305f\u30c7\u30fc\u30bf\u3082\u4ed6\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u60c5\u5831\u3068\u307e\u3063\u305f\u304f\u540c\u3058\u65b9\u6cd5\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u53ef\u80fd\u3067\u3059\u3002","title":"\u307e\u3068\u3081"},{"location":"fuji/lab4-appservice-export-mqtt/","text":"Lab 4 - \u30c7\u30fc\u30bf\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\uff08MQTT\uff09 \u00b6 \u30c7\u30fc\u30bf\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001Fuji \u30ea\u30ea\u30fc\u30b9\u3067\u306f\u6b21\u306e\u4e8c\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3059\u308b\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3067\u306f\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u3082\u306e\u306e\u3001\u4eca\u5f8c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u5b9f\u969b\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306f\u3059\u3067\u306b\u6a19\u6e96\u306e Docker Compose \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u306f\u9664\u5916\u3055\u308c\u3066\u304a\u308a\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u6a5f\u80fd\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306b\u7d71\u5408\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u305f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u6b20\u70b9\u3068\u3057\u3066\u3001 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30c7\u30fc\u30bf\u3092\u9806\u6b21\u914d\u4fe1\u3059\u308b\u304c\u3001\u3053\u308c\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u308a\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u5074\u306e\u53d7\u4fe1\u304c\u9045\u5ef6\u3059\u308b \u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u305d\u308c\u81ea\u4f53\u306e\u30aa\u30fc\u30d0\u30d8\u30c3\u30c9\u3068\u8907\u96d1\u3055\u304c EdgeX Foundry \u306b\u3068\u3063\u3066\u8ca0\u62c5\u3067\u3042\u308b \u7279\u5b9a\u306e\u30af\u30e9\u30a6\u30c9\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306b\u9650\u5b9a\u3057\u3066\u4f5c\u308a\u3053\u3080\u306e\u3067\u306f\u306a\u304f\u3001SDK \u3092\u63d0\u4f9b\u3057\u3066\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u3068\u3089\u308f\u308c\u306a\u3044\u72b6\u614b\u306b\u3059\u3079\u304d\u3060 \u306a\u3069\u304c\u6319\u3052\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u3044\u3046 SDK \u3068\u305d\u308c\u3092\u4f7f\u3063\u305f\u5b9f\u88c5\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306a\u308f\u3051\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\uff08\u30c7\u30fc\u30bf\u3092 ZeroMQ \u3067\u914d\u308b Core Data\uff09\u306b\u76f4\u63a5\u3064\u306a\u3052\u3089\u308c\u308b\u3053\u3068\u3067\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c\u3092\u6392\u9664\u3059\u308b \u958b\u767a\u8005\u306b\u306f\u3001\u30c7\u30fc\u30bf\u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u3063\u305f\u3089\u76f4\u3061\u306b\u305d\u308c\u306b\u5bfe\u3057\u3066\u4f55\u3089\u304b\u306e\u51e6\u7406\u3092\u884c\u3048\u308b\u624b\u6bb5\u304c\u63d0\u4f9b\u3055\u308c\u308b \u767b\u9332\u4f5c\u696d\u304c\u4e0d\u8981\u3067\u3042\u308b \u306a\u3069\u306e\u70b9\u3067\u3088\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u3044\u307e\u3044\u3061\u6b63\u3057\u304f\u306a\u3044\u6c17\u3082\u3057\u307e\u3059\u304c\u3001\u3056\u3063\u304f\u308a\u307e\u3068\u3081\u308b\u3068\u3001\u4e0b\u56f3\u306e\u4e0a\u304c\u4e0b\u306b\u306a\u3063\u305f\u306e\u3067\u3001 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\uff08\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\uff09\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u3089\u306a\u304f\u306a\u3063\u305f\u3057\u3001\u5024\u3092\u597d\u304d\u306b\u51e6\u7406\u3067\u304d\u308b\u5834\u6240\u3082\u3067\u304d\u305f\u3088\uff01 \u3068\u3044\u3046\u3053\u3068\u304b\u3068\u601d\u3044\u307e\u3059\u3002 \u305d\u3046\u3044\u3046\u308f\u3051\u3067\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u306a\u304f\u306a\u3063\u305f\u4e16\u754c\u3067\u3082\u751f\u304d\u3066\u3044\u3051\u308b\u3088\u3046\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u6271\u3063\u305f\u30a8\u30f3\u30c8\u30ea\u3068\u540c\u69d8\u306b\u3001MQTT \u30c8\u30d4\u30c3\u30af\u3068 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u304d\u308b\u72b6\u614b\u3092\u4f5c\u308a\u307e\u3059\u3002 \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f \u00b6 \u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 $ git clone https://github.com/kurokobo/edgex-lab-handson.git \u4eca\u56de\u306f lab05 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002 1 $ cd lab05 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9 \u00b6 \u4e0a\u56f3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u7bb1\u306e\u4e2d\u306b\u306f\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\uff08Fn \u3067\u8868\u8a18\uff09\u3092\u4e26\u3079\u307e\u3057\u305f\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u4efb\u610f\u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7fa4\u3092\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u5316\u3057\u3066\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002 \u4f8b\u3048\u3070\u7c21\u5358\u306a\u4f8b\u3067\u306f\u3001\u6a19\u6e96\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4e26\u3079\u308b\u3060\u3051\u3067\u3082\u3001 \u30c7\u30d0\u30a4\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u30ea\u30bd\u30fc\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 JSON \u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 MQTT \u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u306a\u3069\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u304c\u69cb\u6210\u3067\u304d\u307e\u3059\u3002\u73fe\u6642\u70b9\u3067\u5229\u7528\u3067\u304d\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306f\u3001SDK \u306e README.md \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 \u69cb\u6210\u306e\u8003\u3048\u65b9 \u00b6 \u6a19\u6e96\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3001app-service-configurable \u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u3001\u3072\u3068\u3064\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u3072\u3068\u3064\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u51e6\u7406\u3059\u308b\u524d\u63d0\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u307e\u305f\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u305d\u306e\u3082\u306e\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3054\u3068\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb configuration.toml \u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002 \u3064\u307e\u308a\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306e\u4f8b\u3067\u3044\u3048\u3070\u3001\u5192\u982d\u306e\u7d75\u306e\u3088\u3046\u306b\u3001 \u6700\u7d42\u7684\u306b MQTT \u30c8\u30d4\u30c3\u30af\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-configurable \u30b3\u30f3\u30c6\u30ca \u6700\u7d42\u7684\u306b REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-configurable \u30b3\u30f3\u30c6\u30ca \u306a\u3069\u3001app-service-configurable \u304c\u3001\u76ee\u7684\u306b\u5fdc\u3058\u3066\u8907\u6570\u8d77\u52d5\u3057\u3066\u3044\u308b\u72b6\u614b\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002 \u306a\u304a\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306e\u30db\u30b9\u30c8\u540d\u3084\u30dd\u30fc\u30c8\u756a\u53f7\u3001MQTT \u3067\u306f\u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u540d\u306a\u3069\u74b0\u5883\u306b\u4f9d\u5b58\u3059\u308b\u60c5\u5831\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u74b0\u5883\u5909\u6570\u3067 Docker Compose \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u6e21\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3067\u306f API \u3092\u53e9\u3044\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u767b\u9332\u3059\u308b\u4f5c\u696d\u304c\u5fc5\u8981\u3067\u3057\u305f\u304c\u3001\u3059\u3079\u3066\u306e\u69cb\u6210\u3092\u3042\u3089\u304b\u3058\u3081\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d \u00b6 \u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30b3\u30f3\u30c6\u30ca\u5185\u306e /res \u306b\u3001\u76ee\u7684\u5225\u306b\u4e8b\u524d\u69cb\u6210\u3055\u308c\u305f configuration.toml \u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5206\u3051\u3066\u914d\u7f6e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u8d77\u52d5\u6642\u306b\u6e21\u3059\u74b0\u5883\u5909\u6570\u3067\u3001\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3059\u308b\u304b\u6307\u5b9a\u3057\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001MQTT \u30c8\u30d4\u30c3\u30af\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u5229\u7528\u3059\u308b configuration.toml \u306f\u4ee5\u4e0b\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 $ cat mqtt-export/configuration.toml ... [ Writable.Pipeline ] ExecutionOrder = \"TransformToJSON, MQTTSend, MarkAsPushed\" [ Writable.Pipeline.Functions.TransformToJSON ] [ Writable.Pipeline.Functions.MarkAsPushed ] [ Writable.Pipeline.Functions.FilterByDeviceName ] [ Writable.Pipeline.Functions.FilterByDeviceName.Parameters ] DeviceNames = \"\" [ Writable.Pipeline.Functions.FilterByValueDescriptor ] [ Writable.Pipeline.Functions.FilterByValueDescriptor.Parameters ] ValueDescriptors = \"\" [ Writable.Pipeline.Functions.MQTTSend ] [ Writable.Pipeline.Functions.MQTTSend.Parameters ] qos = \"0\" key = \"\" autoreconnect = \"false\" retain = \"false\" cert = \"\" persistOnError = \"false\" [ Writable.Pipeline.Functions.MQTTSend.Addressable ] Address = \"localhost\" Port = 1883 Protocol = \"tcp\" Publisher = \"AppServiceConfigurable-mqtt-export\" User = \"\" Password = \"\" Topic = \"edgex-events\" ... ExecutionOrder \u306b\u542b\u307e\u308c\u308b\u95a2\u6570\u304c\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3068\u3057\u3066\u9806\u6b21\u5b9f\u884c\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u4f8b\u3060\u3068\u3001JSON \u306b\u5909\u63db\u3057\u3066\u304b\u3089 MQTT \u30c8\u30d4\u30c3\u30af\u306b\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002 \u5229\u7528\u3059\u308b\u95a2\u6570\u306f\u4e0b\u3067\u5217\u6319\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001ExecutionOrder \u306b\u542b\u307e\u308c\u306a\u3044\u3082\u306e\u306f\u5b9f\u969b\u306b\u306f\u5229\u7528\u3055\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u95a2\u6570\uff08FilterByDeviceName\uff09\u306a\u3069\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u3044\u305f\u3044\u306a\u3089\u81ea\u5206\u3067 ExecutionOrder \u306b\u66f8\u3044\u3066\u306d\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u3002 \u307e\u305f\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u540d\u306b localhost \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u308a\u3001\u30c8\u30d4\u30c3\u30af\u540d\u304c edgex-events \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u5148\u8ff0\u306e\u3068\u304a\u308a\u3001\u3053\u306e\u8fba\u308a\u306f\u74b0\u5883\u5909\u6570\u3067\u66f8\u304d\u63db\u3048\u307e\u3059\u306e\u3067\u3053\u306e\u307e\u307e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u540c\u69d8\u306b\u3001REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u5229\u7528\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ cat http-export/configuration.toml ... [ Writable.StoreAndForward ] Enabled = false RetryInterval = \"5m\" MaxRetryCount = 10 [ Writable.Pipeline ] UseTargetTypeOfByteArray = false ExecutionOrder = \"FilterByDeviceName, TransformToJSON, HTTPPostJSON, MarkAsPushed\" [ Writable.Pipeline.Functions.TransformToJSON ] [ Writable.Pipeline.Functions.MarkAsPushed ] [ Writable.Pipeline.Functions.FilterByDeviceName ] [ Writable.Pipeline.Functions.FilterByDeviceName.Parameters ] DeviceNames = \"\" [ Writable.Pipeline.Functions.FilterByValueDescriptor ] [ Writable.Pipeline.Functions.FilterByValueDescriptor.Parameters ] ValueDescriptors = \"\" [ Writable.Pipeline.Functions.HTTPPostJSON ] [ Writable.Pipeline.Functions.HTTPPostJSON.Parameters ] url = \"http://\" persistOnError = \"false\" ... \u74b0\u5883\u5909\u6570\u306b\u3088\u308b\u67d4\u8edf\u306a\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9 \u00b6 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u307e\u308c\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001\u5b9f\u88c5\u304b\u3089\u63a8\u6e2c\u3059\u308b\u3068\u3001\u304a\u305d\u3089\u304f\u3059\u3079\u3066\u74b0\u5883\u5909\u6570\u3067\u66f8\u304d\u63db\u3048\u304c\u53ef\u80fd\u3067\u3059\u3002\u30bb\u30af\u30b7\u30e7\u30f3\u540d\u306e\u533a\u5207\u308a\u6587\u5b57\u3092 _ \u306b\u7f6e\u63db\u3057\u3066\u3001\u3055\u3089\u306b _<\u30d1\u30e9\u30e1\u30fc\u30bf\u540d> \u3092\u4ed8\u4e0e\u3057\u3066\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u308c\u3070\u3001\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3055\u308c\u308b\u3088\u3046\u3067\u3057\u305f\u3002 \u4f8b\u3048\u3070\u3001ExecutionOrder \u81ea\u4f53\u3082\u3001Writable_Pipeline_ExecutionOrder \u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u3089\u308c\u307e\u3059\u3002\u4f8b\u3048\u3070\u5148\u8ff0\u306e mqtt-export \u306e ExecutionOrder \u306b\u306f FilterByDeviceName \u304c\u542b\u307e\u308c\u305b\u3093\u304c\u3001\u74b0\u5883\u5909\u6570\u3067\u4ee5\u4e0b\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30d5\u30a3\u30eb\u30bf\u3082\u6709\u52b9\u5316\u3067\u304d\u307e\u3059\u3002 \u74b0\u5883\u5909\u6570 Writable_Pipeline_ExecutionOrder FilterByDeviceName, TransformToJSON, MQTTSend, MarkAsPushed \u74b0\u5883\u5909\u6570 Writable_Pipeline_Functions_FilterByDeviceName_Parameters_DeviceNames <\u30c7\u30d0\u30a4\u30b9\u540d> \u4eca\u56de\u306e\u69cb\u6210\u306e\u5b9a\u7fa9 \u00b6 \u3067\u306f\u3001\u4eca\u56de\u7528\u306e\u69cb\u6210\u3092\u4f5c\u308a\u307e\u3059\u3002\u5148\u306e\u901a\u308a\u3001\u74b0\u5883\u4f9d\u5b58\u306e\u5024\u306f\u74b0\u5883\u5909\u6570\u7d4c\u7531\u3067\u4e0e\u3048\u308c\u3070\u3088\u3044\u306e\u3067\u3001\u4eca\u56de\u7de8\u96c6\u3059\u308b\u306e\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u306f\u3001\u3082\u3068\u3082\u3068\u3001\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b\u7528\u306e app-service-rules \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 $ cat docker-composer.yml ... app-service-rules: image: edgexfoundry/docker-app-service-configurable:1.0.0 ports: - \"48096:48096\" container_name: edgex-app-service-configurable-rules hostname: edgex-app-service-configurable-rules networks: edgex-network: aliases: - edgex-app-service-configurable-rules environment: <<: *common-variables edgex_service: http://edgex-app-service-configurable-rules:48096 edgex_profile: rules-engine Service_Host: edgex-app-service-configurable-rules MessageBus_SubscribeHost_Host: edgex-core-data depends_on: - consul - logging - data ... \u4eca\u56de\u306f\u3001\u3053\u308c\u306b\u52a0\u3048\u3066\u3001MQTT \u30c8\u30d4\u30c3\u30af\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-mqtt-export \u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $ cat docker-composer.yml ... app-service-mqtt-export: image: edgexfoundry/docker-app-service-configurable:1.0.0 ports: - \"48097:48097\" container_name: edgex-app-service-configurable-mqtt-export hostname: edgex-app-service-configurable-mqtt-export networks: edgex-network: aliases: - edgex-app-service-configurable-mqtt-export environment: <<: *common-variables edgex_service: http://edgex-app-service-configurable-mqtt-export:48097 edgex_profile: mqtt-export Service_Host: edgex-app-service-configurable-mqtt-export MessageBus_SubscribeHost_Host: edgex-core-data Writable_Pipeline_Functions_MQTTSend_Addressable_Address: 192 .168.0.100 Writable_Pipeline_Functions_MQTTSend_Addressable_Port: 1883 Writable_Pipeline_Functions_MQTTSend_Addressable_Protocol: tcp # Writable_Pipeline_Functions_MQTTSend_Addressable_Publisher: # Writable_Pipeline_Functions_MQTTSend_Addressable_User: # Writable_Pipeline_Functions_MQTTSend_Addressable_Password: Writable_Pipeline_Functions_MQTTSend_Addressable_Topic: edgex-handson-topic # Writable_Pipeline_Functions_MQTTSend_Parameters_Qos: # Writable_Pipeline_Functions_MQTTSend_Parameters_Key: # Writable_Pipeline_Functions_MQTTSend_Parameters_Cert: # Writable_Pipeline_Functions_MQTTSend_Parameters_Autoreconnect: # Writable_Pipeline_Functions_MQTTSend_Parameters_Retain: # Writable_Pipeline_Functions_MQTTSend_Parameters_PersistOnError: volumes: - ./app-service-configurable:/res depends_on: - consul - logging - data ... \u4f7f\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u3044\u305a\u308c\u3082\u307e\u3063\u305f\u304f\u540c\u3058\u3067\u3059\u3002\u30dc\u30ea\u30e5\u30fc\u30e0\u3082\u540c\u3058\u30de\u30a6\u30f3\u30c8\u306e\u3057\u304b\u305f\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092 edgex_profile \u3067\u5236\u5fa1\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u8aad\u307e\u305b\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5fdc\u3058\u3066\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u74b0\u5883\u5909\u6570\u3067\u5165\u308c\u3066\u3044\u307e\u3059\u3002 MQTT \u30d6\u30ed\u30fc\u30ab\u3084 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30db\u30b9\u30c8\u540d\u306a\u3069\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u307b\u304b\u306b\u3082\u3001configuration.toml \u3067\u5909\u66f4\u3057\u305f\u3044\u5024\u304c\u3042\u308c\u3070\u3001\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u308b\u3068\u5909\u3048\u3089\u308c\u307e\u3059\u3002 \u307e\u305f\u3001\u4eca\u56de\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u307e\u3059\u3002 \u8d77\u52d5 \u00b6 \u4e0b\u6e96\u5099\u3068\u3057\u3066\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u3092\u8d77\u52d5\u3057\u3066\u3001\u8cfc\u8aad\u3092\u958b\u59cb\u3057\u307e\u3059\u3002 1 2 3 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v \u3053\u306e\u72b6\u614b\u3067\u3001EdgeX Foundry \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 1 $ docker-compose up -d \u52d5\u4f5c\u78ba\u8a8d \u00b6 \u5fc5\u8981\u306a\u8a2d\u5b9a\u306f\u3059\u3079\u3066\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u4e0e\u3048\u3066\u3044\u305f\u306e\u3067\u3001\u4f55\u3082\u3057\u306a\u3044\u3067\u3082 MQTT \u30c8\u30d4\u30c3\u30af\u3068 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5024\u304c\u5c4a\u304d\u51fa\u3057\u307e\u3059\u3002 1 2 3 4 5 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... edgex-handson-topic { \"id\" : \"a11011bb-30cb-44fa-885c-8929c64e35b1\" , \"device\" : \"Random-UnsignedInteger-Device\" , \"origin\" :1580015685340757500, \"readings\" : [{ \"id\" : \"26f50397-1e8b-4ca0-8db2-eeeee958a643\" , \"origin\" :1580015685326443600, \"device\" : \"Random-UnsignedInteger-Device\" , \"name\" : \"Uint8\" , \"value\" : \"90\" }]} edgex-handson-topic { \"id\" : \"526631fd-a0f7-437d-98a9-4f6eb8a06775\" , \"device\" : \"Random-UnsignedInteger-Device\" , \"origin\" :1580015685369824800, \"readings\" : [{ \"id\" : \"91ef8066-5c31-4377-84e6-a6d517457f62\" , \"origin\" :1580015685356418200, \"device\" : \"Random-UnsignedInteger-Device\" , \"name\" : \"Uint16\" , \"value\" : \"27009\" }]} ... \u7c21\u5358\u3067\u3059\u306d\u3002 \u3053\u308c\u3089\u306e\u5024\u306f\u3001\u5192\u982d\u3067\u7d39\u4ecb\u3057\u305f\u901a\u308a\u3001\u305d\u308c\u305e\u308c\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u304c\u76f4\u63a5\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u3063\u3066\u51e6\u7406\u3057\u305f\u3046\u3048\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d1\u30b9\u304c\u5206\u6563\u3057\u3066\u4e26\u5217\u5316\u3059\u308b\u306e\u3067\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u3044\u305f\u9803\u306b\u5b58\u5728\u3057\u3066\u3044\u305f\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u304c\u56de\u907f\u3055\u308c\u307e\u3059\u3002 \u307e\u3068\u3081 \u00b6 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u306a\u3044\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u624b\u6bb5\u3068\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3057\u3066\u8a66\u3057\u307e\u3057\u305f\u3002 \u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\u78ba\u304b\u306b\u3053\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u307b\u3046\u304c\u7d20\u76f4\u3067\u5727\u5012\u7684\u306b\u4f7f\u3044\u52dd\u624b\u304c\u826f\u3044\u3067\u3059\u3002\u5bb6\u306e\u74b0\u5883\u3082\u3053\u3063\u3061\u306b\u7f6e\u304d\u63db\u3048\u307e\u3057\u305f\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306f\u591a\u304f\u306a\u3044\u3067\u3059\u304c\u3001\u4eca\u5f8c\u3053\u306e\u8fba\u308a\u3082\u5145\u5b9f\u3057\u3066\u304f\u308b\u3053\u3068\u304c\u671f\u5f85\u3067\u304d\u305d\u3046\u3067\u3059\u3002","title":"Lab 4 - \u30c7\u30fc\u30bf\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\uff08MQTT\uff09"},{"location":"fuji/lab4-appservice-export-mqtt/#lab-4-mqtt","text":"\u30c7\u30fc\u30bf\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001Fuji \u30ea\u30ea\u30fc\u30b9\u3067\u306f\u6b21\u306e\u4e8c\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306b\u95a2\u3059\u308b\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3067\u306f\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u3082\u306e\u306e\u3001\u4eca\u5f8c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u5b9f\u969b\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306f\u3059\u3067\u306b\u6a19\u6e96\u306e Docker Compose \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u306f\u9664\u5916\u3055\u308c\u3066\u304a\u308a\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u6a5f\u80fd\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306b\u7d71\u5408\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u305f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306e\u6b20\u70b9\u3068\u3057\u3066\u3001 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30c7\u30fc\u30bf\u3092\u9806\u6b21\u914d\u4fe1\u3059\u308b\u304c\u3001\u3053\u308c\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u308a\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u5074\u306e\u53d7\u4fe1\u304c\u9045\u5ef6\u3059\u308b \u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u305d\u308c\u81ea\u4f53\u306e\u30aa\u30fc\u30d0\u30d8\u30c3\u30c9\u3068\u8907\u96d1\u3055\u304c EdgeX Foundry \u306b\u3068\u3063\u3066\u8ca0\u62c5\u3067\u3042\u308b \u7279\u5b9a\u306e\u30af\u30e9\u30a6\u30c9\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306b\u9650\u5b9a\u3057\u3066\u4f5c\u308a\u3053\u3080\u306e\u3067\u306f\u306a\u304f\u3001SDK \u3092\u63d0\u4f9b\u3057\u3066\u30af\u30e9\u30a6\u30c9\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u3068\u3089\u308f\u308c\u306a\u3044\u72b6\u614b\u306b\u3059\u3079\u304d\u3060 \u306a\u3069\u304c\u6319\u3052\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u3044\u3046 SDK \u3068\u305d\u308c\u3092\u4f7f\u3063\u305f\u5b9f\u88c5\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306a\u308f\u3051\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\uff08\u30c7\u30fc\u30bf\u3092 ZeroMQ \u3067\u914d\u308b Core Data\uff09\u306b\u76f4\u63a5\u3064\u306a\u3052\u3089\u308c\u308b\u3053\u3068\u3067\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u554f\u984c\u3092\u6392\u9664\u3059\u308b \u958b\u767a\u8005\u306b\u306f\u3001\u30c7\u30fc\u30bf\u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u3063\u305f\u3089\u76f4\u3061\u306b\u305d\u308c\u306b\u5bfe\u3057\u3066\u4f55\u3089\u304b\u306e\u51e6\u7406\u3092\u884c\u3048\u308b\u624b\u6bb5\u304c\u63d0\u4f9b\u3055\u308c\u308b \u767b\u9332\u4f5c\u696d\u304c\u4e0d\u8981\u3067\u3042\u308b \u306a\u3069\u306e\u70b9\u3067\u3088\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u3044\u307e\u3044\u3061\u6b63\u3057\u304f\u306a\u3044\u6c17\u3082\u3057\u307e\u3059\u304c\u3001\u3056\u3063\u304f\u308a\u307e\u3068\u3081\u308b\u3068\u3001\u4e0b\u56f3\u306e\u4e0a\u304c\u4e0b\u306b\u306a\u3063\u305f\u306e\u3067\u3001 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\uff08\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\uff09\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u306b\u306a\u3089\u306a\u304f\u306a\u3063\u305f\u3057\u3001\u5024\u3092\u597d\u304d\u306b\u51e6\u7406\u3067\u304d\u308b\u5834\u6240\u3082\u3067\u304d\u305f\u3088\uff01 \u3068\u3044\u3046\u3053\u3068\u304b\u3068\u601d\u3044\u307e\u3059\u3002 \u305d\u3046\u3044\u3046\u308f\u3051\u3067\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u306a\u304f\u306a\u3063\u305f\u4e16\u754c\u3067\u3082\u751f\u304d\u3066\u3044\u3051\u308b\u3088\u3046\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u6271\u3063\u305f\u30a8\u30f3\u30c8\u30ea\u3068\u540c\u69d8\u306b\u3001MQTT \u30c8\u30d4\u30c3\u30af\u3068 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u304d\u308b\u72b6\u614b\u3092\u4f5c\u308a\u307e\u3059\u3002","title":"Lab 4 - \u30c7\u30fc\u30bf\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\uff08MQTT\uff09"},{"location":"fuji/lab4-appservice-export-mqtt/#_1","text":"\u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 $ git clone https://github.com/kurokobo/edgex-lab-handson.git \u4eca\u56de\u306f lab05 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002 1 $ cd lab05","title":"\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f"},{"location":"fuji/lab4-appservice-export-mqtt/#_2","text":"\u4e0a\u56f3\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306e\u7bb1\u306e\u4e2d\u306b\u306f\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\uff08Fn \u3067\u8868\u8a18\uff09\u3092\u4e26\u3079\u307e\u3057\u305f\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u4efb\u610f\u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u7fa4\u3092\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u5316\u3057\u3066\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002 \u4f8b\u3048\u3070\u7c21\u5358\u306a\u4f8b\u3067\u306f\u3001\u6a19\u6e96\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4e26\u3079\u308b\u3060\u3051\u3067\u3082\u3001 \u30c7\u30d0\u30a4\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u30ea\u30bd\u30fc\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 JSON \u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 MQTT \u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u306a\u3069\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u304c\u69cb\u6210\u3067\u304d\u307e\u3059\u3002\u73fe\u6642\u70b9\u3067\u5229\u7528\u3067\u304d\u308b\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306f\u3001SDK \u306e README.md \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9"},{"location":"fuji/lab4-appservice-export-mqtt/#_3","text":"\u6a19\u6e96\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u3001app-service-configurable \u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u3001\u3072\u3068\u3064\u306e\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u3072\u3068\u3064\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u51e6\u7406\u3059\u308b\u524d\u63d0\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u307e\u305f\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u305d\u306e\u3082\u306e\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3054\u3068\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb configuration.toml \u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002 \u3064\u307e\u308a\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306e\u4f8b\u3067\u3044\u3048\u3070\u3001\u5192\u982d\u306e\u7d75\u306e\u3088\u3046\u306b\u3001 \u6700\u7d42\u7684\u306b MQTT \u30c8\u30d4\u30c3\u30af\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-configurable \u30b3\u30f3\u30c6\u30ca \u6700\u7d42\u7684\u306b REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-configurable \u30b3\u30f3\u30c6\u30ca \u306a\u3069\u3001app-service-configurable \u304c\u3001\u76ee\u7684\u306b\u5fdc\u3058\u3066\u8907\u6570\u8d77\u52d5\u3057\u3066\u3044\u308b\u72b6\u614b\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002 \u306a\u304a\u3001\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306e\u30db\u30b9\u30c8\u540d\u3084\u30dd\u30fc\u30c8\u756a\u53f7\u3001MQTT \u3067\u306f\u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u540d\u306a\u3069\u74b0\u5883\u306b\u4f9d\u5b58\u3059\u308b\u60c5\u5831\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u74b0\u5883\u5909\u6570\u3067 Docker Compose \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u6e21\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3067\u306f API \u3092\u53e9\u3044\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u767b\u9332\u3059\u308b\u4f5c\u696d\u304c\u5fc5\u8981\u3067\u3057\u305f\u304c\u3001\u3059\u3079\u3066\u306e\u69cb\u6210\u3092\u3042\u3089\u304b\u3058\u3081\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u3066\u304a\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002","title":"\u69cb\u6210\u306e\u8003\u3048\u65b9"},{"location":"fuji/lab4-appservice-export-mqtt/#_4","text":"\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30b3\u30f3\u30c6\u30ca\u5185\u306e /res \u306b\u3001\u76ee\u7684\u5225\u306b\u4e8b\u524d\u69cb\u6210\u3055\u308c\u305f configuration.toml \u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5206\u3051\u3066\u914d\u7f6e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u8d77\u52d5\u6642\u306b\u6e21\u3059\u74b0\u5883\u5909\u6570\u3067\u3001\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u5229\u7528\u3059\u308b\u304b\u6307\u5b9a\u3057\u307e\u3059\u3002 \u4f8b\u3048\u3070\u3001MQTT \u30c8\u30d4\u30c3\u30af\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u5229\u7528\u3059\u308b configuration.toml \u306f\u4ee5\u4e0b\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 $ cat mqtt-export/configuration.toml ... [ Writable.Pipeline ] ExecutionOrder = \"TransformToJSON, MQTTSend, MarkAsPushed\" [ Writable.Pipeline.Functions.TransformToJSON ] [ Writable.Pipeline.Functions.MarkAsPushed ] [ Writable.Pipeline.Functions.FilterByDeviceName ] [ Writable.Pipeline.Functions.FilterByDeviceName.Parameters ] DeviceNames = \"\" [ Writable.Pipeline.Functions.FilterByValueDescriptor ] [ Writable.Pipeline.Functions.FilterByValueDescriptor.Parameters ] ValueDescriptors = \"\" [ Writable.Pipeline.Functions.MQTTSend ] [ Writable.Pipeline.Functions.MQTTSend.Parameters ] qos = \"0\" key = \"\" autoreconnect = \"false\" retain = \"false\" cert = \"\" persistOnError = \"false\" [ Writable.Pipeline.Functions.MQTTSend.Addressable ] Address = \"localhost\" Port = 1883 Protocol = \"tcp\" Publisher = \"AppServiceConfigurable-mqtt-export\" User = \"\" Password = \"\" Topic = \"edgex-events\" ... ExecutionOrder \u306b\u542b\u307e\u308c\u308b\u95a2\u6570\u304c\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3068\u3057\u3066\u9806\u6b21\u5b9f\u884c\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u4f8b\u3060\u3068\u3001JSON \u306b\u5909\u63db\u3057\u3066\u304b\u3089 MQTT \u30c8\u30d4\u30c3\u30af\u306b\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002 \u5229\u7528\u3059\u308b\u95a2\u6570\u306f\u4e0b\u3067\u5217\u6319\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001ExecutionOrder \u306b\u542b\u307e\u308c\u306a\u3044\u3082\u306e\u306f\u5b9f\u969b\u306b\u306f\u5229\u7528\u3055\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u95a2\u6570\uff08FilterByDeviceName\uff09\u306a\u3069\u3082\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u3044\u305f\u3044\u306a\u3089\u81ea\u5206\u3067 ExecutionOrder \u306b\u66f8\u3044\u3066\u306d\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u3002 \u307e\u305f\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u30db\u30b9\u30c8\u540d\u306b localhost \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u308a\u3001\u30c8\u30d4\u30c3\u30af\u540d\u304c edgex-events \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u5148\u8ff0\u306e\u3068\u304a\u308a\u3001\u3053\u306e\u8fba\u308a\u306f\u74b0\u5883\u5909\u6570\u3067\u66f8\u304d\u63db\u3048\u307e\u3059\u306e\u3067\u3053\u306e\u307e\u307e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u540c\u69d8\u306b\u3001REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u5229\u7528\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ cat http-export/configuration.toml ... [ Writable.StoreAndForward ] Enabled = false RetryInterval = \"5m\" MaxRetryCount = 10 [ Writable.Pipeline ] UseTargetTypeOfByteArray = false ExecutionOrder = \"FilterByDeviceName, TransformToJSON, HTTPPostJSON, MarkAsPushed\" [ Writable.Pipeline.Functions.TransformToJSON ] [ Writable.Pipeline.Functions.MarkAsPushed ] [ Writable.Pipeline.Functions.FilterByDeviceName ] [ Writable.Pipeline.Functions.FilterByDeviceName.Parameters ] DeviceNames = \"\" [ Writable.Pipeline.Functions.FilterByValueDescriptor ] [ Writable.Pipeline.Functions.FilterByValueDescriptor.Parameters ] ValueDescriptors = \"\" [ Writable.Pipeline.Functions.HTTPPostJSON ] [ Writable.Pipeline.Functions.HTTPPostJSON.Parameters ] url = \"http://\" persistOnError = \"false\" ...","title":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d"},{"location":"fuji/lab4-appservice-export-mqtt/#_5","text":"\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u542b\u307e\u308c\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001\u5b9f\u88c5\u304b\u3089\u63a8\u6e2c\u3059\u308b\u3068\u3001\u304a\u305d\u3089\u304f\u3059\u3079\u3066\u74b0\u5883\u5909\u6570\u3067\u66f8\u304d\u63db\u3048\u304c\u53ef\u80fd\u3067\u3059\u3002\u30bb\u30af\u30b7\u30e7\u30f3\u540d\u306e\u533a\u5207\u308a\u6587\u5b57\u3092 _ \u306b\u7f6e\u63db\u3057\u3066\u3001\u3055\u3089\u306b _<\u30d1\u30e9\u30e1\u30fc\u30bf\u540d> \u3092\u4ed8\u4e0e\u3057\u3066\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u308c\u3070\u3001\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3055\u308c\u308b\u3088\u3046\u3067\u3057\u305f\u3002 \u4f8b\u3048\u3070\u3001ExecutionOrder \u81ea\u4f53\u3082\u3001Writable_Pipeline_ExecutionOrder \u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u3089\u308c\u307e\u3059\u3002\u4f8b\u3048\u3070\u5148\u8ff0\u306e mqtt-export \u306e ExecutionOrder \u306b\u306f FilterByDeviceName \u304c\u542b\u307e\u308c\u305b\u3093\u304c\u3001\u74b0\u5883\u5909\u6570\u3067\u4ee5\u4e0b\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30d5\u30a3\u30eb\u30bf\u3082\u6709\u52b9\u5316\u3067\u304d\u307e\u3059\u3002 \u74b0\u5883\u5909\u6570 Writable_Pipeline_ExecutionOrder FilterByDeviceName, TransformToJSON, MQTTSend, MarkAsPushed \u74b0\u5883\u5909\u6570 Writable_Pipeline_Functions_FilterByDeviceName_Parameters_DeviceNames <\u30c7\u30d0\u30a4\u30b9\u540d>","title":"\u74b0\u5883\u5909\u6570\u306b\u3088\u308b\u67d4\u8edf\u306a\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9"},{"location":"fuji/lab4-appservice-export-mqtt/#_6","text":"\u3067\u306f\u3001\u4eca\u56de\u7528\u306e\u69cb\u6210\u3092\u4f5c\u308a\u307e\u3059\u3002\u5148\u306e\u901a\u308a\u3001\u74b0\u5883\u4f9d\u5b58\u306e\u5024\u306f\u74b0\u5883\u5909\u6570\u7d4c\u7531\u3067\u4e0e\u3048\u308c\u3070\u3088\u3044\u306e\u3067\u3001\u4eca\u56de\u7de8\u96c6\u3059\u308b\u306e\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u306f\u3001\u3082\u3068\u3082\u3068\u3001\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b\u7528\u306e app-service-rules \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 $ cat docker-composer.yml ... app-service-rules: image: edgexfoundry/docker-app-service-configurable:1.0.0 ports: - \"48096:48096\" container_name: edgex-app-service-configurable-rules hostname: edgex-app-service-configurable-rules networks: edgex-network: aliases: - edgex-app-service-configurable-rules environment: <<: *common-variables edgex_service: http://edgex-app-service-configurable-rules:48096 edgex_profile: rules-engine Service_Host: edgex-app-service-configurable-rules MessageBus_SubscribeHost_Host: edgex-core-data depends_on: - consul - logging - data ... \u4eca\u56de\u306f\u3001\u3053\u308c\u306b\u52a0\u3048\u3066\u3001MQTT \u30c8\u30d4\u30c3\u30af\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b app-service-mqtt-export \u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 $ cat docker-composer.yml ... app-service-mqtt-export: image: edgexfoundry/docker-app-service-configurable:1.0.0 ports: - \"48097:48097\" container_name: edgex-app-service-configurable-mqtt-export hostname: edgex-app-service-configurable-mqtt-export networks: edgex-network: aliases: - edgex-app-service-configurable-mqtt-export environment: <<: *common-variables edgex_service: http://edgex-app-service-configurable-mqtt-export:48097 edgex_profile: mqtt-export Service_Host: edgex-app-service-configurable-mqtt-export MessageBus_SubscribeHost_Host: edgex-core-data Writable_Pipeline_Functions_MQTTSend_Addressable_Address: 192 .168.0.100 Writable_Pipeline_Functions_MQTTSend_Addressable_Port: 1883 Writable_Pipeline_Functions_MQTTSend_Addressable_Protocol: tcp # Writable_Pipeline_Functions_MQTTSend_Addressable_Publisher: # Writable_Pipeline_Functions_MQTTSend_Addressable_User: # Writable_Pipeline_Functions_MQTTSend_Addressable_Password: Writable_Pipeline_Functions_MQTTSend_Addressable_Topic: edgex-handson-topic # Writable_Pipeline_Functions_MQTTSend_Parameters_Qos: # Writable_Pipeline_Functions_MQTTSend_Parameters_Key: # Writable_Pipeline_Functions_MQTTSend_Parameters_Cert: # Writable_Pipeline_Functions_MQTTSend_Parameters_Autoreconnect: # Writable_Pipeline_Functions_MQTTSend_Parameters_Retain: # Writable_Pipeline_Functions_MQTTSend_Parameters_PersistOnError: volumes: - ./app-service-configurable:/res depends_on: - consul - logging - data ... \u4f7f\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u3044\u305a\u308c\u3082\u307e\u3063\u305f\u304f\u540c\u3058\u3067\u3059\u3002\u30dc\u30ea\u30e5\u30fc\u30e0\u3082\u540c\u3058\u30de\u30a6\u30f3\u30c8\u306e\u3057\u304b\u305f\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092 edgex_profile \u3067\u5236\u5fa1\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u8aad\u307e\u305b\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u5fdc\u3058\u3066\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u74b0\u5883\u5909\u6570\u3067\u5165\u308c\u3066\u3044\u307e\u3059\u3002 MQTT \u30d6\u30ed\u30fc\u30ab\u3084 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30db\u30b9\u30c8\u540d\u306a\u3069\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u307b\u304b\u306b\u3082\u3001configuration.toml \u3067\u5909\u66f4\u3057\u305f\u3044\u5024\u304c\u3042\u308c\u3070\u3001\u74b0\u5883\u5909\u6570\u3068\u3057\u3066\u4e0e\u3048\u308b\u3068\u5909\u3048\u3089\u308c\u307e\u3059\u3002 \u307e\u305f\u3001\u4eca\u56de\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u307e\u3059\u3002","title":"\u4eca\u56de\u306e\u69cb\u6210\u306e\u5b9a\u7fa9"},{"location":"fuji/lab4-appservice-export-mqtt/#_7","text":"\u4e0b\u6e96\u5099\u3068\u3057\u3066\u3001MQTT \u30d6\u30ed\u30fc\u30ab\u3092\u8d77\u52d5\u3057\u3066\u3001\u8cfc\u8aad\u3092\u958b\u59cb\u3057\u307e\u3059\u3002 1 2 3 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v \u3053\u306e\u72b6\u614b\u3067\u3001EdgeX Foundry \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 1 $ docker-compose up -d","title":"\u8d77\u52d5"},{"location":"fuji/lab4-appservice-export-mqtt/#_8","text":"\u5fc5\u8981\u306a\u8a2d\u5b9a\u306f\u3059\u3079\u3066\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u4e0e\u3048\u3066\u3044\u305f\u306e\u3067\u3001\u4f55\u3082\u3057\u306a\u3044\u3067\u3082 MQTT \u30c8\u30d4\u30c3\u30af\u3068 REST \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5024\u304c\u5c4a\u304d\u51fa\u3057\u307e\u3059\u3002 1 2 3 4 5 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v ... edgex-handson-topic { \"id\" : \"a11011bb-30cb-44fa-885c-8929c64e35b1\" , \"device\" : \"Random-UnsignedInteger-Device\" , \"origin\" :1580015685340757500, \"readings\" : [{ \"id\" : \"26f50397-1e8b-4ca0-8db2-eeeee958a643\" , \"origin\" :1580015685326443600, \"device\" : \"Random-UnsignedInteger-Device\" , \"name\" : \"Uint8\" , \"value\" : \"90\" }]} edgex-handson-topic { \"id\" : \"526631fd-a0f7-437d-98a9-4f6eb8a06775\" , \"device\" : \"Random-UnsignedInteger-Device\" , \"origin\" :1580015685369824800, \"readings\" : [{ \"id\" : \"91ef8066-5c31-4377-84e6-a6d517457f62\" , \"origin\" :1580015685356418200, \"device\" : \"Random-UnsignedInteger-Device\" , \"name\" : \"Uint16\" , \"value\" : \"27009\" }]} ... \u7c21\u5358\u3067\u3059\u306d\u3002 \u3053\u308c\u3089\u306e\u5024\u306f\u3001\u5192\u982d\u3067\u7d39\u4ecb\u3057\u305f\u901a\u308a\u3001\u305d\u308c\u305e\u308c\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u304c\u76f4\u63a5\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u5c64\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u3063\u3066\u51e6\u7406\u3057\u305f\u3046\u3048\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d1\u30b9\u304c\u5206\u6563\u3057\u3066\u4e26\u5217\u5316\u3059\u308b\u306e\u3067\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u3044\u305f\u9803\u306b\u5b58\u5728\u3057\u3066\u3044\u305f\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u304c\u56de\u907f\u3055\u308c\u307e\u3059\u3002","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab4-appservice-export-mqtt/#_9","text":"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u306a\u3044\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u624b\u6bb5\u3068\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3057\u3066\u8a66\u3057\u307e\u3057\u305f\u3002 \u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\u78ba\u304b\u306b\u3053\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u307b\u3046\u304c\u7d20\u76f4\u3067\u5727\u5012\u7684\u306b\u4f7f\u3044\u52dd\u624b\u304c\u826f\u3044\u3067\u3059\u3002\u5bb6\u306e\u74b0\u5883\u3082\u3053\u3063\u3061\u306b\u7f6e\u304d\u63db\u3048\u307e\u3057\u305f\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306f\u591a\u304f\u306a\u3044\u3067\u3059\u304c\u3001\u4eca\u5f8c\u3053\u306e\u8fba\u308a\u3082\u5145\u5b9f\u3057\u3066\u304f\u308b\u3053\u3068\u304c\u671f\u5f85\u3067\u304d\u305d\u3046\u3067\u3059\u3002","title":"\u307e\u3068\u3081"},{"location":"fuji/lab5-rulesengine/","text":"Lab 5 - \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u5229\u7528 \u00b6 \u3053\u308c\u307e\u3067\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u306f\u3001\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3084 MQTT \u30c7\u30d0\u30a4\u30b9\u3092\u7528\u3044\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u306e\u53ce\u96c6\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3092\u8a66\u3057\u3066\u304d\u307e\u3057\u305f\u3002 \u4eca\u56de\u306f\u3001\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u52d5\u4f5c\u3001\u3064\u307e\u308a\u3001 \u4f55\u3089\u304b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u304c \u4f55\u3089\u304b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u3089 \u5225\u306e\u30c7\u30d0\u30a4\u30b9\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b \u3088\u3046\u306a\u81ea\u52d5\u5236\u5fa1\u3092\u5b9f\u969b\u306b\u8a66\u3057\u307e\u3059\u3002 \u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea \u3067\u69cb\u6210\u3057\u305f MQTT \u30c7\u30d0\u30a4\u30b9\u3060\u3051\u3092\u5229\u7528\u3057\u3066\u3082\u3059\u3050\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3051\u3060\u3068\u304a\u3082\u3057\u308d\u304f\u306a\u3044\u306e\u3067\u3001\u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u3072\u3068\u3064\u8ffd\u52a0\u3057\u3066\u3001\u305d\u308c\u3092\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001 \u30eb\u30fc\u30eb (1) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 80 \u3092\u8d8a\u3048\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 HIGH \u3092\u9001\u4fe1\u3059\u308b \u30eb\u30fc\u30eb (2) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 20 \u3092\u4e0b\u56de\u3063\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 LOW \u3092\u9001\u4fe1\u3059\u308b \u3088\u3046\u306a\u72b6\u614b\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\u56f3\u793a\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u72b6\u614b\u3067\u3059\u3002 \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f \u00b6 \u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 $ git clone https://github.com/kurokobo/edgex-lab-handson.git \u4eca\u56de\u306f lab05 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002 1 $ cd lab05 REST \u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0 \u00b6 \u307e\u3060\u958b\u767a\u9014\u4e2d\u3067\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u306b\u306f\u81f3\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u304c\u3001device-rest-go \u3068\u540d\u4ed8\u3051\u3089\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002 REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u6982\u8981 \u00b6 \u3053\u308c\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002 REST \u3067 POST \u3057\u3066\u304f\u308b\u30c7\u30d0\u30a4\u30b9\u306b\u5229\u7528\u3059\u308b POST \u3055\u308c\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306e\u4e2d\u8eab\u3092\u5024\u3068\u3057\u3066 EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u3080 \u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u3068\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066 /api/v1/resource/<\u30c7\u30d0\u30a4\u30b9\u540d>/<\u30ea\u30bd\u30fc\u30b9\u540d> \u304c\u4f5c\u6210\u3055\u308c\u3001\u3053\u308c\u306b\u5bfe\u3057\u3066 POST \u3059\u308b\u3053\u3068\u3067\u5024\u3092\u53d6\u308a\u8fbc\u3093\u3067\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d\u3084\u30ea\u30bd\u30fc\u30b9\u540d\u306f\u3001\u524d\u56de\u53d6\u308a\u6271\u3063\u305f MQTT \u30c7\u30d0\u30a4\u30b9\u3068\u540c\u69d8\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002 \u306a\u304a\u3001\u73fe\u6642\u70b9\u3067\u306f\u60c5\u5831\u306e\u3084\u308a\u3068\u308a\u306f\u4e00\u65b9\u5411\u3067\u3042\u308a\u3001\u3064\u307e\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u5074\u304b\u3089 POST \u3055\u308c\u305f\u5024\u3092\u53d6\u308a\u8fbc\u3080\u306e\u307f\u3067\u3001\u9006\u306b\u30c7\u30d0\u30a4\u30b9\u5074\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u767a\u884c\u306f\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002 \u307e\u305f\u3001JSON \u3092\u6295\u3052\u3066\u3082\u3001\u73fe\u6642\u70b9\u306e\u5b9f\u88c5\u3067\u306f\u30d1\u30fc\u30b9\u306f\u3057\u3066\u304f\u308c\u305a\u5358\u306a\u308b\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u3088\u3046\u3067\u3059\u3002 \u4eca\u56de\u8a66\u3059\u8a2d\u8a08 \u00b6 \u4eca\u56de\u306f\u3001 device-rest-go \u306e README.md \u3092\u53c2\u8003\u306b\u3001\u4ee5\u4e0b\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb rest/rest.test.device.profile.yml \u30d5\u30a1\u30a4\u30eb \u30ea\u30bd\u30fc\u30b9 int \u3068 float \u3092\u5b9a\u7fa9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a rest/configuration.toml \u30d5\u30a1\u30a4\u30eb \u4e0a\u8a18\u306e\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u7d10\u3065\u3051\u305f REST_DEVICE \u3092\u5b9a\u7fa9 \u3053\u308c\u306b\u3088\u308a\u3001 /api/v1/resource/REST_DEVICE/int /api/v1/resource/REST_DEVICE/float \u306b\u5024\u3092 POST \u3059\u308c\u3070\u53d6\u308a\u8fbc\u3093\u3067\u3082\u3089\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002 \u3053\u306e REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3081\u3001\u4eca\u56de\u5206\u306e\u74b0\u5883\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u53cd\u6620\u6e08\u307f\u3067\u3059 \u8d77\u52d5 \u00b6 \u3067\u306f\u3001\u4eca\u56de\u5206\u306e\u74b0\u5883\u3092\u307e\u3068\u3081\u3066\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 MQTT \u30c7\u30d0\u30a4\u30b9\u306f\u4eca\u56de\u3082\u4f7f\u3046\u306e\u3067\u3001 \u74b0\u5883\u306b\u5408\u308f\u305b\u3066 mqtt/configuration.toml \u306f\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002 MQTT \u30d6\u30ed\u30fc\u30ab\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u3001EdgeX Foundry \u306e\u9806\u306b\u8d77\u52d5\u3057\u307e\u3059\u3002 1 2 3 4 5 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto $ docker run -d --restart = always --name = mqtt-scripts -v \" $( pwd ) /mqtt-scripts:/scripts\" dersimn/mqtt-scripts --url mqtt://192.168.0.100 --dir /scripts $ docker-compose up -d REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u78ba\u8a8d \u00b6 \u8d77\u52d5\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001\u5b9f\u969b\u306b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b POST \u3057\u3066\u3001\u30c7\u30fc\u30bf\u306e\u53d6\u308a\u8fbc\u307f\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5f85\u3061\u53d7\u3051\u30dd\u30fc\u30c8\u306f 49986 \u3067\u3059\u3002Content-Type \u306f text/plain \u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 12345 http://localhost:49986/api/v1/resource/REST_DEVICE/int edgex-device-rest \u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0\u3067 Pushed event to core data \u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u5024\u306f\u6b63\u5e38\u306b\u53d7\u3051\u4ed8\u3051\u3089\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 $ docker logs --tail 5 edgex-device-rest level = DEBUG ts = 2020 -01-25T07:49:17.0621062Z app = edgex-device-rest source = resthandler.go:82 msg = \"Received POST for Device=REST_DEVICE Resource=int\" level = DEBUG ts = 2020 -01-25T07:49:17.0673842Z app = edgex-device-rest source = resthandler.go:101 msg = \"Content Type is 'text/plain' & Media Type is 'text/plain' and Type is 'Int64'\" level = DEBUG ts = 2020 -01-25T07:49:17.0726606Z app = edgex-device-rest source = resthandler.go:142 msg = \"Incoming reading received: Device=REST_DEVICE Resource=int\" level = DEBUG ts = 2020 -01-25T07:49:17.0766349Z app = edgex-device-rest source = utils.go:75 correlation-id = 946f482c-db1f-44b5-8a76-437c4ca3d3e9 msg = \"SendEvent: EventClient.MarshalEvent encoded event\" level = INFO ts = 2020 -01-25T07:49:17.0899243Z app = edgex-device-rest source = utils.go:93 Content-Type = application/json correlation-id = 946f482c-db1f-44b5-8a76-437c4ca3d3e9 msg = \"SendEvent: Pushed event to core data\" \u5b9f\u969b\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 1 2 3 $ edgex-cli reading list REST_DEVICE -l 10 Reading ID Name Device Origin Value Created Modified Pushed b43f7300-1377-4fdb-a82f-44eb497d9568 int REST_DEVICE 1579938557072646900 12345 3 minutes 3 minutes 50 years \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u5229\u7528 \u00b6 \u304a\u81b3\u7acb\u3066\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u672c\u984c\u306e\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3092\u69cb\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u6982\u8981 \u00b6 \u8a73\u7d30\u306f \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001\u7aef\u7684\u306b\u8a00\u3048\u3070\u3001 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u307e\u305f\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b \u4e8b\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30eb\u30fc\u30eb\u306e\u6761\u4ef6\u3068\u306e\u5408\u81f4\u3092\u78ba\u8a8d\u3059\u308b \u5408\u81f4\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30eb\u30fc\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b \u3088\u3046\u306a\u51e6\u7406\u3092\u3057\u3066\u304f\u308c\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002 \u5b9f\u88c5\u306f\u73fe\u6bb5\u968e\u3067\u306f BRMS \u306e Drools \u30d9\u30fc\u30b9\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u3001Java \u88fd\u3067\u3059\u306d\u3002 \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3078\u30c7\u30fc\u30bf\u3092\u914d\u4fe1\u3059\u308b\u69cb\u6210\u30d1\u30bf\u30f3\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u4ee5\u4e0b\u306e\u4e8c\u3064\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b\u30d1\u30bf\u30f3 \u30c7\u30fc\u30bf\u306f Export Distribution\uff08edgex-export-distro \u30b3\u30f3\u30c6\u30ca\uff09\u304b\u3089\u914d\u4fe1\u3055\u308c\u308b \u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u5168\u4f53\u3067\u7d71\u4e00\u3055\u308c\u3066\u30b7\u30f3\u30d7\u30eb\u306b \u30ec\u30a4\u30c6\u30f3\u30b7\u3084\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306a\u3069\u306e\u9762\u306b\u30c7\u30e1\u30ea\u30c3\u30c8 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306b\u76f4\u7d50\u3055\u305b\u308b\u30d1\u30bf\u30f3 \u30c7\u30fc\u30bf\u306f Core Data\uff08edgex-core-data \u30b3\u30f3\u30c6\u30ca\uff09\u304b\u3089\u914d\u4fe1\u3055\u308c\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30a4\u30d1\u30b9\u3059\u308b\u3053\u3068\u3067\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u3084\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u9762\u3067\u306f\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b \u30c7\u30fc\u30bf\u306e\u6d41\u308c\u306f\u3084\u3084\u8907\u96d1\u306b \u3053\u306e\u69cb\u6210\u30d1\u30bf\u30f3\u306e\u9078\u629e\u3084\u3001\u5177\u4f53\u7684\u306a\u63a5\u7d9a\u5148\u306e\u60c5\u5831\u306f\u3001\u6b21\u3067\u7d39\u4ecb\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002 \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u8a2d\u5b9a \u00b6 \u8a2d\u5b9a\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u3088\u3051\u308c\u3070\u3001\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u306b\u3059\u3079\u3066\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u6562\u3048\u3066\u624b\u3067\u6295\u5165\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u4eca\u56de\u306f\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u89e6\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002rulesengine \u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u7fa4\u304c\u305d\u308c\u3067\u3059\u3002 \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3067\u89e6\u308c\u3089\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3001rulesengine/application.properties \u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 $ cat rulesengine/application.properties ... export.client = false ... export.client.registration.url = http://edgex-export-client:48071/api/v1 export.client.registration.name = EdgeXRulesEngine ... export.zeromq.port = 5563 export.zeromq.host = tcp://edgex-core-data ... export.client \u304c false \u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u76f4\u63a5\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002export.zeromq.host \u306f\u73fe\u6642\u70b9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f tcp://edgex-app-service-configurable-rules \u306b\u306a\u3063\u3066\u304a\u308a\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9 \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3063\u3066 tcp://edgex-core-data \u306b\u3057\u3066\u3044\u307e\u3059\u3002 \u3082\u3046\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3001rulesengine/rule-template.drl \u3067\u3059\u3002\u3053\u308c\u306f\u30eb\u30fc\u30eb\u305d\u306e\u3082\u306e\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002 \u30eb\u30fc\u30eb\u306e\u8a2d\u5b9a \u00b6 \u3067\u306f\u3001\u5b9f\u969b\u306b\u30eb\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u73fe\u72b6\u3001GUI \u3067\u3082 CLI \u3067\u3082\u3067\u304d\u306a\u3044\u306e\u3067\u3001API \u3092\u53e9\u304d\u307e\u3059\u3002\u6a19\u6e96 GUI \u306b\u306f\u8a2d\u5b9a\u753b\u9762\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u30d7\u30eb\u30c0\u30a6\u30f3\u306b\u9805\u76ee\u304c\u51fa\u3066\u3053\u306a\u304f\u3066\u8a2d\u5b9a\u3067\u304d\u305a\u3067\u3057\u305f\u3002 \u30eb\u30fc\u30eb\u306e\u691c\u8a0e \u00b6 \u30eb\u30fc\u30eb\u306f\u4ee5\u4e0b\u3088\u3046\u306a JSON \u3067\u6295\u5165\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"<\u30eb\u30fc\u30eb\u540d>\" , \"condition\" : { \"device\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u540d>\" , \"checks\" : [ { \"parameter\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u540d>\" , \"operand1\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u5024>\" , \"operation\" : \"<\u6bd4\u8f03\u6f14\u7b97\u5b50>\" , \"operand2\" : \"<\u30c8\u30ea\u30ac\u3059\u308b\u95be\u5024>\" } ] }, \"action\" : { \"device\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30c7\u30d0\u30a4\u30b9 ID>\" , \"command\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9 ID>\" , \"body\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u306b PUT \u3055\u308c\u308b\u5185\u5bb9>\" }, \"log\" : \"<\u30c8\u30ea\u30ac\u3055\u308c\u305f\u3068\u304d\u306e\u30ed\u30b0\u51fa\u529b\u6587\u5b57\u5217>\" } \u5168\u4f53\u306e\u69cb\u9020\u306f\u3001condition \u3067\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u3089 action \u3067\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u304c\u30c8\u30ea\u30ac\u3055\u308c\u308b\u3001\u3068\u601d\u3048\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u3002 condition \u3067\u306e\u6307\u5b9a\u5024\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d44\u3093\u3067\u3044\u304d\u307e\u3059\u3002 device \u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u540d\u79f0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002ID \u3067\u306f\u52d5\u304b\u306a\u3044\u306e\u3067\u6ce8\u610f\u3067\u3059 \u4eca\u56de\u3060\u3068\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u5024\u3092\u5143\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3044\u306e\u3067\u3001REST_DEVICE \u3092\u6307\u5b9a\u3057\u307e\u3059 parameter \u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u540d\u306a\u306e\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3057\u305f\u540d\u79f0\u3067\u3042\u308a\u3001\u3059\u306a\u308f\u3061 Reading \u306e\u540d\u524d\u3067\u3082\u3042\u308a\u307e\u3059 \u4eca\u56de\u306e REST_DEVICE \u306f\u30ea\u30bd\u30fc\u30b9 int \u3068 float \u3092\u6301\u3061\u307e\u3059\u304c\u3001\u4eca\u56de\u306f int \u3092\u6307\u5b9a\u3057\u307e\u3059 operand1 \u6bd4\u8f03\u5143\u306b\u306a\u308b\u5024\u3092\u4f5c\u308a\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u306e\u5024\u306f\u5185\u90e8\u3067\u306f\u6587\u5b57\u5217\u5024\u3068\u3057\u3066\u6271\u308f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u6570\u5024\u3067\u3042\u308c\u3070\u9069\u5207\u306a\u578b\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 Drools \u304c Java \u30d9\u30fc\u30b9\u306e\u305f\u3081\u3001\u3053\u3053\u3067\u306f Java \u306e\u6587\u6cd5\u3067\u66f8\u304d\u307e\u3059\u3002\u5024\u306b\u5fdc\u3058\u3066\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306a\u3069\u304c\u4f7f\u3044\u5206\u3051\u3089\u308c\u308b\u3067\u3057\u3087\u3046 Integer.parseInt(value) Float.parseFloat(value) operation \u6bd4\u8f03\u6f14\u7b97\u5b50\u3067\u3059\u3002<\u3001=\u3001> \u306a\u3069\u304c\u8003\u3048\u3089\u308c\u307e\u3059 operand2 \u95be\u5024\u3067\u3059 action \u3067\u306e\u6307\u5b9a\u5024\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d44\u307f\u307e\u3059\u3002 device \u5148\u307b\u3069\u3068\u7570\u306a\u308a\u3001\u3053\u3053\u3067\u306f ID \u3067\u6307\u5b9a\u3057\u307e\u3059 \u4eca\u56de\u306f MQ_DEVICE \u306e ID \u3067\u3059 \u30c7\u30d0\u30a4\u30b9\u306e ID \u306f API \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff08\u65b9\u6cd5\u306f \u904e\u53bb\u306e\u30a8\u30f3\u30c8\u30ea \u3067\uff09 command \u30b3\u30de\u30f3\u30c9\u3082 ID \u3067\u6307\u5b9a\u3057\u307e\u3059 \u4eca\u56de\u306f testmessage \u306e ID \u3067\u3059 \u30b3\u30de\u30f3\u30c9\u306e ID \u3082 API \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff08\u65b9\u6cd5\u306f \u904e\u53bb\u306e\u30a8\u30f3\u30c8\u30ea \u3067\uff09 body \u30b3\u30de\u30f3\u30c9\u306e PUT \u547d\u4ee4\u306e\u30dc\u30c7\u30a3\u3092 JSON \u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u307e\u3059 \u3081\u3063\u3061\u3083\u30a8\u30b9\u30b1\u30fc\u30d7\u304c\u5fc5\u8981\u3067\u3059 \u4f8b\u3048\u3070\u4eca\u56de\u3060\u3068\u3001{\\\\\"message\\\\\":\\\\\"HIGH\\\\\"} \u3084 {\\\\\"message\\\\\":\\\\\"LOW\\\\\"} \u3067\u3059 \u6700\u7d42\u7684\u306b\u3001\u4eca\u56de\u4f5c\u308a\u305f\u3044\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u7fa4\u306f\u3001 \u30eb\u30fc\u30eb (1) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 80 \u3092\u8d8a\u3048\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 HIGH \u3092\u9001\u4fe1\u3059\u308b \u30eb\u30fc\u30eb (2) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 20 \u3092\u4e0b\u56de\u3063\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 LOW \u3092\u9001\u4fe1\u3059\u308b \u3072\u3068\u3064\u3081\u306f\u4ee5\u4e0b\u306e JSON \u3067\u3001 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"rule_int_high\" , \"condition\" : { \"device\" : \"REST_DEVICE\" , \"checks\" : [ { \"parameter\" : \"int\" , \"operand1\" : \"Integer.parseInt(value)\" , \"operation\" : \">\" , \"operand2\" : \"80\" } ] }, \"action\" : { \"device\" : \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"command\" : \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"body\" : \"{\\\\\\\"message\\\\\\\":\\\\\\\"HIGH\\\\\\\"}\" }, \"log\" : \"Action triggered: The value is too high.\" } \u3075\u305f\u3064\u3081\u306f\u4ee5\u4e0b\u306e JSON \u3067\u3042\u3089\u308f\u3055\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"rule_int_low\" , \"condition\" : { \"device\" : \"REST_DEVICE\" , \"checks\" : [ { \"parameter\" : \"int\" , \"operand1\" : \"Integer.parseInt(value)\" , \"operation\" : \"<\" , \"operand2\" : \"20\" } ] }, \"action\" : { \"device\" : \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"command\" : \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"body\" : \"{\\\\\\\"message\\\\\\\":\\\\\\\"LOW\\\\\\\"}\" }, \"log\" : \"Action triggered: The value is too low.\" } \u30eb\u30fc\u30eb\u306e\u6295\u5165 \u00b6 \u3067\u306f\u3001\u30eb\u30fc\u30eb\u3092\u6295\u5165\u3057\u307e\u3059\u3002\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u3067\u3059\u3002 http://localhost:48075/api/v1/rule \u3053\u3053\u306b\u3001\u5148\u306e JSON \u3092 POST \u3057\u307e\u3059\u3002 \u30eb\u30fc\u30eb\u306e\u78ba\u8a8d \u00b6 \u30eb\u30fc\u30eb\u304c\u6295\u5165\u3055\u308c\u308b\u3068\u3001rule-template.drl \u3092\u5143\u306b\u65b0\u3057\u3044 <\u30eb\u30fc\u30eb\u540d>.drl \u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u5229\u7528\u3055\u308c\u307e\u3059\u3002edgex-support-rulesengine \u5185\u306b\u914d\u7f6e\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092 cat \u3057\u3066\u8997\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 $ docker exec edgex-support-rulesengine cat /edgex/edgex-support-rulesengine/rules/rule_int_high.drl package org.edgexfoundry.rules ; global org.edgexfoundry.engine.CommandExecutor executor ; global org.edgexfoundry.support.logging.client.EdgeXLogger logger ; import org.edgexfoundry.domain.core.Event ; import org.edgexfoundry.domain.core.Reading ; import java.util.Map ; rule \"rule_int_high\" when $e :Event ( $rlist : readings && device == \"REST_DEVICE\" ) $r0 :Reading ( name == \"int\" && Integer.parseInt ( value ) > 80 ) from $rlist then executor.fireCommand ( \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"{\\\"message\\\":\\\"HIGH\\\"}\" ) ; logger.info ( \"Action triggered: The value is too high.\" ) ; end $ docker exec edgex-support-rulesengine cat /edgex/edgex-support-rulesengine/rules/rule_int_low.drl package org.edgexfoundry.rules ; global org.edgexfoundry.engine.CommandExecutor executor ; global org.edgexfoundry.support.logging.client.EdgeXLogger logger ; import org.edgexfoundry.domain.core.Event ; import org.edgexfoundry.domain.core.Reading ; import java.util.Map ; rule \"rule_int_low\" when $e :Event ( $rlist : readings && device == \"REST_DEVICE\" ) $r0 :Reading ( name == \"int\" && Integer.parseInt ( value ) < 20 ) from $rlist then executor.fireCommand ( \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"{\\\"message\\\":\\\"LOW\\\"}\" ) ; logger.info ( \"Action triggered: The value is too low.\" ) ; end \u624b\u5143\u306e rule-template.drl \u3068\u898b\u6bd4\u3079\u308b\u3068\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5143\u306b\u5c55\u958b\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3055\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002Drools \u306e drl \u30d5\u30a1\u30a4\u30eb\u306e\u6587\u6cd5\u306b\u3042\u307e\u308a\u8a73\u3057\u304f\u306a\u3044\u3067\u3059\u304c\u3001\u884c\u308f\u308c\u3066\u3044\u308b\u306e\u304c\u5358\u7d14\u306a\u6587\u5b57\u5217\u9023\u7d50\u306a\u306e\u3067\u3042\u308c\u3070\u3001operand \u306b\u6307\u5b9a\u3059\u308b\u5024\u3042\u305f\u308a\u306f\u5de5\u592b\u3059\u308b\u3068\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u8907\u96d1\u306a\u8a08\u7b97\u3082\u3067\u304d\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u8a66\u3057\u3066\u3044\u307e\u305b\u3093\u3057\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u653b\u6483\u3063\u307d\u3044\u3067\u3059\u3051\u3069\u3002 \u306a\u304a\u3001\u73fe\u5728\u306e API \u3067\u306f\u30eb\u30fc\u30eb\u306e\u4e2d\u8eab\u307e\u3067\u306f\u78ba\u8a8d\u3067\u304d\u305a\u3001\u30eb\u30fc\u30eb\u540d\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u308b\u306e\u307f\u306e\u3088\u3046\u3067\u3059\u3002\u60b2\u3057\u3044\u3002 1 2 3 4 5 $ curl -s http://localhost:48075/api/v1/rule | jq [ \"rule_int_high\" , \"rule_int_low\" ] \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u52d5\u4f5c\u78ba\u8a8d \u00b6 \u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \u52d5\u304d\u3092\u8ffd\u3044\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001\u4e0b\u6e96\u5099\u3068\u3057\u3066 edgex-support-rulesengine \u306e\u30ed\u30b0\u3092\u5e38\u6642\u8868\u793a\u3055\u305b\u3066\u3001\u3055\u3089\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u5168\u30c8\u30d4\u30c3\u30af\u3092\u8cfc\u8aad\u3057\u3066\u304a\u304f\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002 1 2 3 4 5 6 $ docker logs -f --tail = 10 edgex-support-rulesengine [ 2020 -01-25 13 :44:15.023 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :44:15.024 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: MQ_DEVICE [ 2020 -01-25 13 :44:17.214 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :44:17.216 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: MQ_DEVICE ... 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v logic/connected 2 DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.0\" } ... \u3067\u306f\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u6c17\u6301\u3061\u306b\u306a\u3063\u3066\u3001\u307e\u305a\u306f\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3057\u306a\u3044\u30c7\u30fc\u30bf\u3092 REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b POST \u3057\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 50 http://localhost:49986/api/v1/resource/REST_DEVICE/int \u5024\u306f\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3057\u3001 1 2 3 $ edgex-cli reading list REST_DEVICE -l 10 Reading ID Name Device Origin Value Created Modified Pushed 66461804 -a894-470f-a099-631ffd4c32cb int REST_DEVICE 1579960045357298000 50 About a minute About a minute 50 years \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306b\u3082 REST_DEVICE \u304b\u3089\u306e\u5024\u306f\u5c4a\u3044\u3066\u3044\u308b\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u4f55\u3082\u30c8\u30ea\u30ac\u3055\u308c\u307e\u305b\u3093\u3002\u6b63\u5e38\u3067\u3059\u3002 1 2 3 4 5 $ docker logs -f --tail = 10 edgex-support-rulesengine ... [ 2020 -01-25 13 :47:25.370 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :47:25.466 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: REST_DEVICE ... \u3064\u3065\u3044\u3066\u3001\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3059\u308b\u5024\u3092\u6295\u3052\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 90 http://192.168.0.100:49986/api/v1/resource/REST_DEVICE/int \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u30ed\u30b0\u3067\u306f\u3001\u6307\u5b9a\u3057\u305f\u30ed\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8a18\u9332\u3055\u308c\u3001 {\"message\":\"HIGH\"} \u304c\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 $ docker logs - f --tail=10 edgex-support-rulesengine ... [ 2020-01-25 13:57:26.805 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020-01-25 13:57:26.853 ] boot - 6 INFO [ main ] --- RuleEngine: Action triggered: The value is too high. [ 2020-01-25 13:57:26.853 ] boot - 6 INFO [ SimpleAsyncTaskExecutor-2 ] --- CommandExecutor: Sending request to: 09dae1fc-e2be-4388-9677-639d2f24c58bfor command: 1c7a50e7-5424-4bce-9b9a-29849510580e with body: {\"message\":\"HIGH\"} [ 2020-01-25 13:57:26.866 ] boot - 6 INFO [ main ] --- RuleEngine: Event triggered 1rules: Event [pushed=0, device=REST_DEVICE, readings=[Reading [pushed=0, name=int, value=90, device=REST_DEVICE]], toString()=BaseObject [id=538aea34-b4ce-4342-88a9-6c08cdac080e, created=0, modified=0, origin=1579960646793054700]] ... MQTT \u30d6\u30ed\u30fc\u30ab\u4e0a\u3067\u306f\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u304c\u884c\u308f\u308c\u305f\u69d8\u5b50\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v CommandTopic { \"cmd\" : \"message\" , \"message\" : \"HIGH\" , \"method\" : \"set\" , \"uuid\" : \"5e2c4946b8dd790001754b8b\" } ResponseTopic { \"cmd\" : \"message\" , \"message\" : \"HIGH\" , \"method\" : \"set\" , \"uuid\" : \"5e2c4946b8dd790001754b8b\" } ... MQTT \u30c7\u30d0\u30a4\u30b9\u306e testmessage \u30b3\u30de\u30f3\u30c9\u306b GET \u3059\u308b\u3068\u3001\u5024\u304c\u72d9\u3044\u901a\u308a\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579960983817888000 , \"readings\" : [ { \"origin\" : 1579960983809258000 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"HIGH\" } ] , \"EncodedEvent\" : null } \u540c\u69d8\u306b\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u6c17\u6301\u3061\u306b\u306a\u3063\u3066\u3075\u305f\u3064\u3081\u306e\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3059\u308b\u5024\u3092\u6295\u3052\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 10 http://192.168.0.100:49986/api/v1/resource/REST_DEVICE/int \u3082\u308d\u3082\u308d\u306e\u51e6\u7406\u304c\u52d5\u304d\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u5074\u306e\u5024\u304c\u5909\u308f\u3063\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579961107845061000 , \"readings\" : [ { \"origin\" : 1579961107837083000 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"LOW\" } ] , \"EncodedEvent\" : null } \u307e\u3068\u3081 \u00b6 \u3042\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u5024\u306e\u5909\u5316\u3092\u30c8\u30ea\u30ac\u306b\u3057\u3066\u3001\u5225\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3067\u304d\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u4eca\u56de\u306f\u3001REST \u30c7\u30d0\u30a4\u30b9\u3092\u4f7f\u3063\u305f\u95a2\u4fc2\u3067\u3001\u5b9f\u8cea\u624b\u52d5\u3067\u30c8\u30ea\u30ac\u3055\u305b\u305f\u306b\u7b49\u3057\u3044\u72b6\u6cc1\u3067\u3057\u305f\u304c\u3001\u672c\u6765\u306f\u30bb\u30f3\u30b5\u306e\u5024\u3092\u30c8\u30ea\u30ac\u306b\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3088\u3046\u306a\u4f7f\u3044\u65b9\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002REST \u30c7\u30d0\u30a4\u30b9\u306e\u4ee3\u308f\u308a\u306b MQTT \u30c7\u30d0\u30a4\u30b9\u3084\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3092 condition \u306b\u6307\u5b9a\u3059\u308c\u3070\u3001\u4f3c\u305f\u3088\u3046\u306a\u72b6\u6cc1\u306e\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3057\u304b\u7a4d\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u4eca\u5f8c\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u304c\u6210\u719f\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u304c\u5145\u5b9f\u3057\u3066\u304f\u308c\u3070\u3001\u3088\u308a\u8907\u96d1\u306a\u51e6\u7406\u3082\u53ef\u80fd\u306b\u306a\u308b\u3053\u3068\u304c\u671f\u5f85\u3067\u304d\u307e\u3059\u3002","title":"Lab 5 - \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u5229\u7528"},{"location":"fuji/lab5-rulesengine/#lab-5-","text":"\u3053\u308c\u307e\u3067\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u306f\u3001\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u3084 MQTT \u30c7\u30d0\u30a4\u30b9\u3092\u7528\u3044\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306e\u60c5\u5831\u306e\u53ce\u96c6\u3084\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3092\u8a66\u3057\u3066\u304d\u307e\u3057\u305f\u3002 \u4eca\u56de\u306f\u3001\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u52d5\u4f5c\u3001\u3064\u307e\u308a\u3001 \u4f55\u3089\u304b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u304c \u4f55\u3089\u304b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u3089 \u5225\u306e\u30c7\u30d0\u30a4\u30b9\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b \u3088\u3046\u306a\u81ea\u52d5\u5236\u5fa1\u3092\u5b9f\u969b\u306b\u8a66\u3057\u307e\u3059\u3002 \u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea \u3067\u69cb\u6210\u3057\u305f MQTT \u30c7\u30d0\u30a4\u30b9\u3060\u3051\u3092\u5229\u7528\u3057\u3066\u3082\u3059\u3050\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3051\u3060\u3068\u304a\u3082\u3057\u308d\u304f\u306a\u3044\u306e\u3067\u3001\u65b0\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u3072\u3068\u3064\u8ffd\u52a0\u3057\u3066\u3001\u305d\u308c\u3092\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001 \u30eb\u30fc\u30eb (1) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 80 \u3092\u8d8a\u3048\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 HIGH \u3092\u9001\u4fe1\u3059\u308b \u30eb\u30fc\u30eb (2) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 20 \u3092\u4e0b\u56de\u3063\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 LOW \u3092\u9001\u4fe1\u3059\u308b \u3088\u3046\u306a\u72b6\u614b\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\u56f3\u793a\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u72b6\u614b\u3067\u3059\u3002","title":"Lab 5 - \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u5229\u7528"},{"location":"fuji/lab5-rulesengine/#_1","text":"\u524d\u306e\u30e9\u30dc\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002 1 $ git clone https://github.com/kurokobo/edgex-lab-handson.git \u4eca\u56de\u306f lab05 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u3059\u3002 1 $ cd lab05","title":"\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f"},{"location":"fuji/lab5-rulesengine/#rest","text":"\u307e\u3060\u958b\u767a\u9014\u4e2d\u3067\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u306b\u306f\u81f3\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u304c\u3001device-rest-go \u3068\u540d\u4ed8\u3051\u3089\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002","title":"REST \u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0"},{"location":"fuji/lab5-rulesengine/#rest_1","text":"\u3053\u308c\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002 REST \u3067 POST \u3057\u3066\u304f\u308b\u30c7\u30d0\u30a4\u30b9\u306b\u5229\u7528\u3059\u308b POST \u3055\u308c\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306e\u4e2d\u8eab\u3092\u5024\u3068\u3057\u3066 EdgeX Foundry \u306b\u53d6\u308a\u8fbc\u3080 \u3053\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u69cb\u6210\u3059\u308b\u3068\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066 /api/v1/resource/<\u30c7\u30d0\u30a4\u30b9\u540d>/<\u30ea\u30bd\u30fc\u30b9\u540d> \u304c\u4f5c\u6210\u3055\u308c\u3001\u3053\u308c\u306b\u5bfe\u3057\u3066 POST \u3059\u308b\u3053\u3068\u3067\u5024\u3092\u53d6\u308a\u8fbc\u3093\u3067\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u540d\u3084\u30ea\u30bd\u30fc\u30b9\u540d\u306f\u3001\u524d\u56de\u53d6\u308a\u6271\u3063\u305f MQTT \u30c7\u30d0\u30a4\u30b9\u3068\u540c\u69d8\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002 \u306a\u304a\u3001\u73fe\u6642\u70b9\u3067\u306f\u60c5\u5831\u306e\u3084\u308a\u3068\u308a\u306f\u4e00\u65b9\u5411\u3067\u3042\u308a\u3001\u3064\u307e\u308a\u3001\u30c7\u30d0\u30a4\u30b9\u5074\u304b\u3089 POST \u3055\u308c\u305f\u5024\u3092\u53d6\u308a\u8fbc\u3080\u306e\u307f\u3067\u3001\u9006\u306b\u30c7\u30d0\u30a4\u30b9\u5074\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u767a\u884c\u306f\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002 \u307e\u305f\u3001JSON \u3092\u6295\u3052\u3066\u3082\u3001\u73fe\u6642\u70b9\u306e\u5b9f\u88c5\u3067\u306f\u30d1\u30fc\u30b9\u306f\u3057\u3066\u304f\u308c\u305a\u5358\u306a\u308b\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u3088\u3046\u3067\u3059\u3002","title":"REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u6982\u8981"},{"location":"fuji/lab5-rulesengine/#_2","text":"\u4eca\u56de\u306f\u3001 device-rest-go \u306e README.md \u3092\u53c2\u8003\u306b\u3001\u4ee5\u4e0b\u306e\u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3068\u30c7\u30d0\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002 \u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb rest/rest.test.device.profile.yml \u30d5\u30a1\u30a4\u30eb \u30ea\u30bd\u30fc\u30b9 int \u3068 float \u3092\u5b9a\u7fa9 \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a rest/configuration.toml \u30d5\u30a1\u30a4\u30eb \u4e0a\u8a18\u306e\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u7d10\u3065\u3051\u305f REST_DEVICE \u3092\u5b9a\u7fa9 \u3053\u308c\u306b\u3088\u308a\u3001 /api/v1/resource/REST_DEVICE/int /api/v1/resource/REST_DEVICE/float \u306b\u5024\u3092 POST \u3059\u308c\u3070\u53d6\u308a\u8fbc\u3093\u3067\u3082\u3089\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002 \u3053\u306e REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u3092\u542b\u3081\u3001\u4eca\u56de\u5206\u306e\u74b0\u5883\u306f\u3001Docker Compose \u30d5\u30a1\u30a4\u30eb\u306b\u53cd\u6620\u6e08\u307f\u3067\u3059","title":"\u4eca\u56de\u8a66\u3059\u8a2d\u8a08"},{"location":"fuji/lab5-rulesengine/#_3","text":"\u3067\u306f\u3001\u4eca\u56de\u5206\u306e\u74b0\u5883\u3092\u307e\u3068\u3081\u3066\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002 MQTT \u30c7\u30d0\u30a4\u30b9\u306f\u4eca\u56de\u3082\u4f7f\u3046\u306e\u3067\u3001 \u74b0\u5883\u306b\u5408\u308f\u305b\u3066 mqtt/configuration.toml \u306f\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002 MQTT \u30d6\u30ed\u30fc\u30ab\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u3001EdgeX Foundry \u306e\u9806\u306b\u8d77\u52d5\u3057\u307e\u3059\u3002 1 2 3 4 5 $ docker run -d --rm --name broker -p 1883 :1883 eclipse-mosquitto $ docker run -d --restart = always --name = mqtt-scripts -v \" $( pwd ) /mqtt-scripts:/scripts\" dersimn/mqtt-scripts --url mqtt://192.168.0.100 --dir /scripts $ docker-compose up -d","title":"\u8d77\u52d5"},{"location":"fuji/lab5-rulesengine/#rest_2","text":"\u8d77\u52d5\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001\u5b9f\u969b\u306b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b POST \u3057\u3066\u3001\u30c7\u30fc\u30bf\u306e\u53d6\u308a\u8fbc\u307f\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5f85\u3061\u53d7\u3051\u30dd\u30fc\u30c8\u306f 49986 \u3067\u3059\u3002Content-Type \u306f text/plain \u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 12345 http://localhost:49986/api/v1/resource/REST_DEVICE/int edgex-device-rest \u30b3\u30f3\u30c6\u30ca\u306e\u30ed\u30b0\u3067 Pushed event to core data \u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u5024\u306f\u6b63\u5e38\u306b\u53d7\u3051\u4ed8\u3051\u3089\u308c\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 $ docker logs --tail 5 edgex-device-rest level = DEBUG ts = 2020 -01-25T07:49:17.0621062Z app = edgex-device-rest source = resthandler.go:82 msg = \"Received POST for Device=REST_DEVICE Resource=int\" level = DEBUG ts = 2020 -01-25T07:49:17.0673842Z app = edgex-device-rest source = resthandler.go:101 msg = \"Content Type is 'text/plain' & Media Type is 'text/plain' and Type is 'Int64'\" level = DEBUG ts = 2020 -01-25T07:49:17.0726606Z app = edgex-device-rest source = resthandler.go:142 msg = \"Incoming reading received: Device=REST_DEVICE Resource=int\" level = DEBUG ts = 2020 -01-25T07:49:17.0766349Z app = edgex-device-rest source = utils.go:75 correlation-id = 946f482c-db1f-44b5-8a76-437c4ca3d3e9 msg = \"SendEvent: EventClient.MarshalEvent encoded event\" level = INFO ts = 2020 -01-25T07:49:17.0899243Z app = edgex-device-rest source = utils.go:93 Content-Type = application/json correlation-id = 946f482c-db1f-44b5-8a76-437c4ca3d3e9 msg = \"SendEvent: Pushed event to core data\" \u5b9f\u969b\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 1 2 3 $ edgex-cli reading list REST_DEVICE -l 10 Reading ID Name Device Origin Value Created Modified Pushed b43f7300-1377-4fdb-a82f-44eb497d9568 int REST_DEVICE 1579938557072646900 12345 3 minutes 3 minutes 50 years","title":"REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306e\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab5-rulesengine/#_4","text":"\u304a\u81b3\u7acb\u3066\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u672c\u984c\u306e\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3092\u69cb\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002","title":"\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u5229\u7528"},{"location":"fuji/lab5-rulesengine/#_5","text":"\u8a73\u7d30\u306f \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001\u7aef\u7684\u306b\u8a00\u3048\u3070\u3001 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u307e\u305f\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b \u4e8b\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30eb\u30fc\u30eb\u306e\u6761\u4ef6\u3068\u306e\u5408\u81f4\u3092\u78ba\u8a8d\u3059\u308b \u5408\u81f4\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30eb\u30fc\u30eb\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b \u3088\u3046\u306a\u51e6\u7406\u3092\u3057\u3066\u304f\u308c\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002 \u5b9f\u88c5\u306f\u73fe\u6bb5\u968e\u3067\u306f BRMS \u306e Drools \u30d9\u30fc\u30b9\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u3001Java \u88fd\u3067\u3059\u306d\u3002 \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3078\u30c7\u30fc\u30bf\u3092\u914d\u4fe1\u3059\u308b\u69cb\u6210\u30d1\u30bf\u30f3\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u4ee5\u4e0b\u306e\u4e8c\u3064\u304c\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u308b\u30d1\u30bf\u30f3 \u30c7\u30fc\u30bf\u306f Export Distribution\uff08edgex-export-distro \u30b3\u30f3\u30c6\u30ca\uff09\u304b\u3089\u914d\u4fe1\u3055\u308c\u308b \u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u5168\u4f53\u3067\u7d71\u4e00\u3055\u308c\u3066\u30b7\u30f3\u30d7\u30eb\u306b \u30ec\u30a4\u30c6\u30f3\u30b7\u3084\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u306e\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306a\u3069\u306e\u9762\u306b\u30c7\u30e1\u30ea\u30c3\u30c8 \u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u306b\u76f4\u7d50\u3055\u305b\u308b\u30d1\u30bf\u30f3 \u30c7\u30fc\u30bf\u306f Core Data\uff08edgex-core-data \u30b3\u30f3\u30c6\u30ca\uff09\u304b\u3089\u914d\u4fe1\u3055\u308c\u308b \u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30b5\u30fc\u30d3\u30b9\u3092\u30d0\u30a4\u30d1\u30b9\u3059\u308b\u3053\u3068\u3067\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u3084\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u9762\u3067\u306f\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b \u30c7\u30fc\u30bf\u306e\u6d41\u308c\u306f\u3084\u3084\u8907\u96d1\u306b \u3053\u306e\u69cb\u6210\u30d1\u30bf\u30f3\u306e\u9078\u629e\u3084\u3001\u5177\u4f53\u7684\u306a\u63a5\u7d9a\u5148\u306e\u60c5\u5831\u306f\u3001\u6b21\u3067\u7d39\u4ecb\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002","title":"\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u6982\u8981"},{"location":"fuji/lab5-rulesengine/#_6","text":"\u8a2d\u5b9a\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u3088\u3051\u308c\u3070\u3001\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u306b\u3059\u3079\u3066\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u6562\u3048\u3066\u624b\u3067\u6295\u5165\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u4eca\u56de\u306f\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u89e6\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002rulesengine \u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u7fa4\u304c\u305d\u308c\u3067\u3059\u3002 \u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3067\u89e6\u308c\u3089\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3001rulesengine/application.properties \u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 $ cat rulesengine/application.properties ... export.client = false ... export.client.registration.url = http://edgex-export-client:48071/api/v1 export.client.registration.name = EdgeXRulesEngine ... export.zeromq.port = 5563 export.zeromq.host = tcp://edgex-core-data ... export.client \u304c false \u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30b3\u30a2\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u76f4\u63a5\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002export.zeromq.host \u306f\u73fe\u6642\u70b9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f tcp://edgex-app-service-configurable-rules \u306b\u306a\u3063\u3066\u304a\u308a\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9 \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u5f93\u3063\u3066 tcp://edgex-core-data \u306b\u3057\u3066\u3044\u307e\u3059\u3002 \u3082\u3046\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3001rulesengine/rule-template.drl \u3067\u3059\u3002\u3053\u308c\u306f\u30eb\u30fc\u30eb\u305d\u306e\u3082\u306e\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002","title":"\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u8a2d\u5b9a"},{"location":"fuji/lab5-rulesengine/#_7","text":"\u3067\u306f\u3001\u5b9f\u969b\u306b\u30eb\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u73fe\u72b6\u3001GUI \u3067\u3082 CLI \u3067\u3082\u3067\u304d\u306a\u3044\u306e\u3067\u3001API \u3092\u53e9\u304d\u307e\u3059\u3002\u6a19\u6e96 GUI \u306b\u306f\u8a2d\u5b9a\u753b\u9762\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u30d7\u30eb\u30c0\u30a6\u30f3\u306b\u9805\u76ee\u304c\u51fa\u3066\u3053\u306a\u304f\u3066\u8a2d\u5b9a\u3067\u304d\u305a\u3067\u3057\u305f\u3002","title":"\u30eb\u30fc\u30eb\u306e\u8a2d\u5b9a"},{"location":"fuji/lab5-rulesengine/#_8","text":"\u30eb\u30fc\u30eb\u306f\u4ee5\u4e0b\u3088\u3046\u306a JSON \u3067\u6295\u5165\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"<\u30eb\u30fc\u30eb\u540d>\" , \"condition\" : { \"device\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u540d>\" , \"checks\" : [ { \"parameter\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u540d>\" , \"operand1\" : \"<\u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u5024>\" , \"operation\" : \"<\u6bd4\u8f03\u6f14\u7b97\u5b50>\" , \"operand2\" : \"<\u30c8\u30ea\u30ac\u3059\u308b\u95be\u5024>\" } ] }, \"action\" : { \"device\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30c7\u30d0\u30a4\u30b9 ID>\" , \"command\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9 ID>\" , \"body\" : \"<\u64cd\u4f5c\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u306b PUT \u3055\u308c\u308b\u5185\u5bb9>\" }, \"log\" : \"<\u30c8\u30ea\u30ac\u3055\u308c\u305f\u3068\u304d\u306e\u30ed\u30b0\u51fa\u529b\u6587\u5b57\u5217>\" } \u5168\u4f53\u306e\u69cb\u9020\u306f\u3001condition \u3067\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u3089 action \u3067\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u304c\u30c8\u30ea\u30ac\u3055\u308c\u308b\u3001\u3068\u601d\u3048\u3070\u3088\u3044\u3067\u3057\u3087\u3046\u3002 condition \u3067\u306e\u6307\u5b9a\u5024\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d44\u3093\u3067\u3044\u304d\u307e\u3059\u3002 device \u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u540d\u79f0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002ID \u3067\u306f\u52d5\u304b\u306a\u3044\u306e\u3067\u6ce8\u610f\u3067\u3059 \u4eca\u56de\u3060\u3068\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u5024\u3092\u5143\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3044\u306e\u3067\u3001REST_DEVICE \u3092\u6307\u5b9a\u3057\u307e\u3059 parameter \u30c8\u30ea\u30ac\u6761\u4ef6\u306b\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u540d\u306a\u306e\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3057\u305f\u540d\u79f0\u3067\u3042\u308a\u3001\u3059\u306a\u308f\u3061 Reading \u306e\u540d\u524d\u3067\u3082\u3042\u308a\u307e\u3059 \u4eca\u56de\u306e REST_DEVICE \u306f\u30ea\u30bd\u30fc\u30b9 int \u3068 float \u3092\u6301\u3061\u307e\u3059\u304c\u3001\u4eca\u56de\u306f int \u3092\u6307\u5b9a\u3057\u307e\u3059 operand1 \u6bd4\u8f03\u5143\u306b\u306a\u308b\u5024\u3092\u4f5c\u308a\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u306e\u5024\u306f\u5185\u90e8\u3067\u306f\u6587\u5b57\u5217\u5024\u3068\u3057\u3066\u6271\u308f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u6570\u5024\u3067\u3042\u308c\u3070\u9069\u5207\u306a\u578b\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 Drools \u304c Java \u30d9\u30fc\u30b9\u306e\u305f\u3081\u3001\u3053\u3053\u3067\u306f Java \u306e\u6587\u6cd5\u3067\u66f8\u304d\u307e\u3059\u3002\u5024\u306b\u5fdc\u3058\u3066\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306a\u3069\u304c\u4f7f\u3044\u5206\u3051\u3089\u308c\u308b\u3067\u3057\u3087\u3046 Integer.parseInt(value) Float.parseFloat(value) operation \u6bd4\u8f03\u6f14\u7b97\u5b50\u3067\u3059\u3002<\u3001=\u3001> \u306a\u3069\u304c\u8003\u3048\u3089\u308c\u307e\u3059 operand2 \u95be\u5024\u3067\u3059 action \u3067\u306e\u6307\u5b9a\u5024\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d44\u307f\u307e\u3059\u3002 device \u5148\u307b\u3069\u3068\u7570\u306a\u308a\u3001\u3053\u3053\u3067\u306f ID \u3067\u6307\u5b9a\u3057\u307e\u3059 \u4eca\u56de\u306f MQ_DEVICE \u306e ID \u3067\u3059 \u30c7\u30d0\u30a4\u30b9\u306e ID \u306f API \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff08\u65b9\u6cd5\u306f \u904e\u53bb\u306e\u30a8\u30f3\u30c8\u30ea \u3067\uff09 command \u30b3\u30de\u30f3\u30c9\u3082 ID \u3067\u6307\u5b9a\u3057\u307e\u3059 \u4eca\u56de\u306f testmessage \u306e ID \u3067\u3059 \u30b3\u30de\u30f3\u30c9\u306e ID \u3082 API \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\uff08\u65b9\u6cd5\u306f \u904e\u53bb\u306e\u30a8\u30f3\u30c8\u30ea \u3067\uff09 body \u30b3\u30de\u30f3\u30c9\u306e PUT \u547d\u4ee4\u306e\u30dc\u30c7\u30a3\u3092 JSON \u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u307e\u3059 \u3081\u3063\u3061\u3083\u30a8\u30b9\u30b1\u30fc\u30d7\u304c\u5fc5\u8981\u3067\u3059 \u4f8b\u3048\u3070\u4eca\u56de\u3060\u3068\u3001{\\\\\"message\\\\\":\\\\\"HIGH\\\\\"} \u3084 {\\\\\"message\\\\\":\\\\\"LOW\\\\\"} \u3067\u3059 \u6700\u7d42\u7684\u306b\u3001\u4eca\u56de\u4f5c\u308a\u305f\u3044\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u7fa4\u306f\u3001 \u30eb\u30fc\u30eb (1) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 80 \u3092\u8d8a\u3048\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 HIGH \u3092\u9001\u4fe1\u3059\u308b \u30eb\u30fc\u30eb (2) REST \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u9001\u3089\u308c\u308b\u5024\u304c 20 \u3092\u4e0b\u56de\u3063\u305f\u3089 MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8 LOW \u3092\u9001\u4fe1\u3059\u308b \u3072\u3068\u3064\u3081\u306f\u4ee5\u4e0b\u306e JSON \u3067\u3001 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"rule_int_high\" , \"condition\" : { \"device\" : \"REST_DEVICE\" , \"checks\" : [ { \"parameter\" : \"int\" , \"operand1\" : \"Integer.parseInt(value)\" , \"operation\" : \">\" , \"operand2\" : \"80\" } ] }, \"action\" : { \"device\" : \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"command\" : \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"body\" : \"{\\\\\\\"message\\\\\\\":\\\\\\\"HIGH\\\\\\\"}\" }, \"log\" : \"Action triggered: The value is too high.\" } \u3075\u305f\u3064\u3081\u306f\u4ee5\u4e0b\u306e JSON \u3067\u3042\u3089\u308f\u3055\u308c\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \"name\" : \"rule_int_low\" , \"condition\" : { \"device\" : \"REST_DEVICE\" , \"checks\" : [ { \"parameter\" : \"int\" , \"operand1\" : \"Integer.parseInt(value)\" , \"operation\" : \"<\" , \"operand2\" : \"20\" } ] }, \"action\" : { \"device\" : \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"command\" : \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"body\" : \"{\\\\\\\"message\\\\\\\":\\\\\\\"LOW\\\\\\\"}\" }, \"log\" : \"Action triggered: The value is too low.\" }","title":"\u30eb\u30fc\u30eb\u306e\u691c\u8a0e"},{"location":"fuji/lab5-rulesengine/#_9","text":"\u3067\u306f\u3001\u30eb\u30fc\u30eb\u3092\u6295\u5165\u3057\u307e\u3059\u3002\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4ee5\u4e0b\u3067\u3059\u3002 http://localhost:48075/api/v1/rule \u3053\u3053\u306b\u3001\u5148\u306e JSON \u3092 POST \u3057\u307e\u3059\u3002","title":"\u30eb\u30fc\u30eb\u306e\u6295\u5165"},{"location":"fuji/lab5-rulesengine/#_10","text":"\u30eb\u30fc\u30eb\u304c\u6295\u5165\u3055\u308c\u308b\u3068\u3001rule-template.drl \u3092\u5143\u306b\u65b0\u3057\u3044 <\u30eb\u30fc\u30eb\u540d>.drl \u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u5229\u7528\u3055\u308c\u307e\u3059\u3002edgex-support-rulesengine \u5185\u306b\u914d\u7f6e\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092 cat \u3057\u3066\u8997\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 $ docker exec edgex-support-rulesengine cat /edgex/edgex-support-rulesengine/rules/rule_int_high.drl package org.edgexfoundry.rules ; global org.edgexfoundry.engine.CommandExecutor executor ; global org.edgexfoundry.support.logging.client.EdgeXLogger logger ; import org.edgexfoundry.domain.core.Event ; import org.edgexfoundry.domain.core.Reading ; import java.util.Map ; rule \"rule_int_high\" when $e :Event ( $rlist : readings && device == \"REST_DEVICE\" ) $r0 :Reading ( name == \"int\" && Integer.parseInt ( value ) > 80 ) from $rlist then executor.fireCommand ( \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"{\\\"message\\\":\\\"HIGH\\\"}\" ) ; logger.info ( \"Action triggered: The value is too high.\" ) ; end $ docker exec edgex-support-rulesengine cat /edgex/edgex-support-rulesengine/rules/rule_int_low.drl package org.edgexfoundry.rules ; global org.edgexfoundry.engine.CommandExecutor executor ; global org.edgexfoundry.support.logging.client.EdgeXLogger logger ; import org.edgexfoundry.domain.core.Event ; import org.edgexfoundry.domain.core.Reading ; import java.util.Map ; rule \"rule_int_low\" when $e :Event ( $rlist : readings && device == \"REST_DEVICE\" ) $r0 :Reading ( name == \"int\" && Integer.parseInt ( value ) < 20 ) from $rlist then executor.fireCommand ( \"09dae1fc-e2be-4388-9677-639d2f24c58b\" , \"1c7a50e7-5424-4bce-9b9a-29849510580e\" , \"{\\\"message\\\":\\\"LOW\\\"}\" ) ; logger.info ( \"Action triggered: The value is too low.\" ) ; end \u624b\u5143\u306e rule-template.drl \u3068\u898b\u6bd4\u3079\u308b\u3068\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5143\u306b\u5c55\u958b\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3055\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002Drools \u306e drl \u30d5\u30a1\u30a4\u30eb\u306e\u6587\u6cd5\u306b\u3042\u307e\u308a\u8a73\u3057\u304f\u306a\u3044\u3067\u3059\u304c\u3001\u884c\u308f\u308c\u3066\u3044\u308b\u306e\u304c\u5358\u7d14\u306a\u6587\u5b57\u5217\u9023\u7d50\u306a\u306e\u3067\u3042\u308c\u3070\u3001operand \u306b\u6307\u5b9a\u3059\u308b\u5024\u3042\u305f\u308a\u306f\u5de5\u592b\u3059\u308b\u3068\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u8907\u96d1\u306a\u8a08\u7b97\u3082\u3067\u304d\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u8a66\u3057\u3066\u3044\u307e\u305b\u3093\u3057\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u653b\u6483\u3063\u307d\u3044\u3067\u3059\u3051\u3069\u3002 \u306a\u304a\u3001\u73fe\u5728\u306e API \u3067\u306f\u30eb\u30fc\u30eb\u306e\u4e2d\u8eab\u307e\u3067\u306f\u78ba\u8a8d\u3067\u304d\u305a\u3001\u30eb\u30fc\u30eb\u540d\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u308b\u306e\u307f\u306e\u3088\u3046\u3067\u3059\u3002\u60b2\u3057\u3044\u3002 1 2 3 4 5 $ curl -s http://localhost:48075/api/v1/rule | jq [ \"rule_int_high\" , \"rule_int_low\" ]","title":"\u30eb\u30fc\u30eb\u306e\u78ba\u8a8d"},{"location":"fuji/lab5-rulesengine/#_11","text":"\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \u52d5\u304d\u3092\u8ffd\u3044\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001\u4e0b\u6e96\u5099\u3068\u3057\u3066 edgex-support-rulesengine \u306e\u30ed\u30b0\u3092\u5e38\u6642\u8868\u793a\u3055\u305b\u3066\u3001\u3055\u3089\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 MQTT \u30d6\u30ed\u30fc\u30ab\u306e\u5168\u30c8\u30d4\u30c3\u30af\u3092\u8cfc\u8aad\u3057\u3066\u304a\u304f\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002 1 2 3 4 5 6 $ docker logs -f --tail = 10 edgex-support-rulesengine [ 2020 -01-25 13 :44:15.023 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :44:15.024 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: MQ_DEVICE [ 2020 -01-25 13 :44:17.214 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :44:17.216 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: MQ_DEVICE ... 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v logic/connected 2 DataTopic { \"name\" : \"MQ_DEVICE\" , \"cmd\" : \"randfloat32\" , \"randfloat32\" : \"27.0\" } ... \u3067\u306f\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u6c17\u6301\u3061\u306b\u306a\u3063\u3066\u3001\u307e\u305a\u306f\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3057\u306a\u3044\u30c7\u30fc\u30bf\u3092 REST \u30c7\u30d0\u30a4\u30b9\u30b5\u30fc\u30d3\u30b9\u306b POST \u3057\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 50 http://localhost:49986/api/v1/resource/REST_DEVICE/int \u5024\u306f\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3057\u3001 1 2 3 $ edgex-cli reading list REST_DEVICE -l 10 Reading ID Name Device Origin Value Created Modified Pushed 66461804 -a894-470f-a099-631ffd4c32cb int REST_DEVICE 1579960045357298000 50 About a minute About a minute 50 years \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306b\u3082 REST_DEVICE \u304b\u3089\u306e\u5024\u306f\u5c4a\u3044\u3066\u3044\u308b\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u4f55\u3082\u30c8\u30ea\u30ac\u3055\u308c\u307e\u305b\u3093\u3002\u6b63\u5e38\u3067\u3059\u3002 1 2 3 4 5 $ docker logs -f --tail = 10 edgex-support-rulesengine ... [ 2020 -01-25 13 :47:25.370 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020 -01-25 13 :47:25.466 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: Event sent to rules engine for device id: REST_DEVICE ... \u3064\u3065\u3044\u3066\u3001\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3059\u308b\u5024\u3092\u6295\u3052\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 90 http://192.168.0.100:49986/api/v1/resource/REST_DEVICE/int \u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u30ed\u30b0\u3067\u306f\u3001\u6307\u5b9a\u3057\u305f\u30ed\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8a18\u9332\u3055\u308c\u3001 {\"message\":\"HIGH\"} \u304c\u6307\u5b9a\u3057\u305f\u30b3\u30de\u30f3\u30c9\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 $ docker logs - f --tail=10 edgex-support-rulesengine ... [ 2020-01-25 13:57:26.805 ] boot - 6 INFO [ main ] --- ZeroMQEventSubscriber: JSON event received [ 2020-01-25 13:57:26.853 ] boot - 6 INFO [ main ] --- RuleEngine: Action triggered: The value is too high. [ 2020-01-25 13:57:26.853 ] boot - 6 INFO [ SimpleAsyncTaskExecutor-2 ] --- CommandExecutor: Sending request to: 09dae1fc-e2be-4388-9677-639d2f24c58bfor command: 1c7a50e7-5424-4bce-9b9a-29849510580e with body: {\"message\":\"HIGH\"} [ 2020-01-25 13:57:26.866 ] boot - 6 INFO [ main ] --- RuleEngine: Event triggered 1rules: Event [pushed=0, device=REST_DEVICE, readings=[Reading [pushed=0, name=int, value=90, device=REST_DEVICE]], toString()=BaseObject [id=538aea34-b4ce-4342-88a9-6c08cdac080e, created=0, modified=0, origin=1579960646793054700]] ... MQTT \u30d6\u30ed\u30fc\u30ab\u4e0a\u3067\u306f\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u306b\u5bfe\u3059\u308b\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u304c\u884c\u308f\u308c\u305f\u69d8\u5b50\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 $ docker run --init --rm -it efrecon/mqtt-client sub -h 192 .168.0.100 -t \"#\" -v CommandTopic { \"cmd\" : \"message\" , \"message\" : \"HIGH\" , \"method\" : \"set\" , \"uuid\" : \"5e2c4946b8dd790001754b8b\" } ResponseTopic { \"cmd\" : \"message\" , \"message\" : \"HIGH\" , \"method\" : \"set\" , \"uuid\" : \"5e2c4946b8dd790001754b8b\" } ... MQTT \u30c7\u30d0\u30a4\u30b9\u306e testmessage \u30b3\u30de\u30f3\u30c9\u306b GET \u3059\u308b\u3068\u3001\u5024\u304c\u72d9\u3044\u901a\u308a\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579960983817888000 , \"readings\" : [ { \"origin\" : 1579960983809258000 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"HIGH\" } ] , \"EncodedEvent\" : null } \u540c\u69d8\u306b\u3001REST \u30c7\u30d0\u30a4\u30b9\u306e\u6c17\u6301\u3061\u306b\u306a\u3063\u3066\u3075\u305f\u3064\u3081\u306e\u30eb\u30fc\u30eb\u306b\u5408\u81f4\u3059\u308b\u5024\u3092\u6295\u3052\u307e\u3059\u3002 1 $ curl -X POST -H \"Content-Type: text/plain\" -d 10 http://192.168.0.100:49986/api/v1/resource/REST_DEVICE/int \u3082\u308d\u3082\u308d\u306e\u51e6\u7406\u304c\u52d5\u304d\u3001MQTT \u30c7\u30d0\u30a4\u30b9\u5074\u306e\u5024\u304c\u5909\u308f\u3063\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ curl -s http://localhost:48082/api/v1/device/name/MQ_DEVICE/command/testmessage | jq { \"device\" : \"MQ_DEVICE\" , \"origin\" : 1579961107845061000 , \"readings\" : [ { \"origin\" : 1579961107837083000 , \"device\" : \"MQ_DEVICE\" , \"name\" : \"message\" , \"value\" : \"LOW\" } ] , \"EncodedEvent\" : null }","title":"\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u306e\u52d5\u4f5c\u78ba\u8a8d"},{"location":"fuji/lab5-rulesengine/#_12","text":"\u3042\u308b\u30c7\u30d0\u30a4\u30b9\u306e\u5024\u306e\u5909\u5316\u3092\u30c8\u30ea\u30ac\u306b\u3057\u3066\u3001\u5225\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u5236\u5fa1\u3067\u304d\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002 \u4eca\u56de\u306f\u3001REST \u30c7\u30d0\u30a4\u30b9\u3092\u4f7f\u3063\u305f\u95a2\u4fc2\u3067\u3001\u5b9f\u8cea\u624b\u52d5\u3067\u30c8\u30ea\u30ac\u3055\u305b\u305f\u306b\u7b49\u3057\u3044\u72b6\u6cc1\u3067\u3057\u305f\u304c\u3001\u672c\u6765\u306f\u30bb\u30f3\u30b5\u306e\u5024\u3092\u30c8\u30ea\u30ac\u306b\u30a2\u30af\u30c1\u30e5\u30a8\u30fc\u30bf\u3092\u52d5\u304b\u3059\u3088\u3046\u306a\u4f7f\u3044\u65b9\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002REST \u30c7\u30d0\u30a4\u30b9\u306e\u4ee3\u308f\u308a\u306b MQTT \u30c7\u30d0\u30a4\u30b9\u3084\u4eee\u60f3\u30c7\u30d0\u30a4\u30b9\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3092 condition \u306b\u6307\u5b9a\u3059\u308c\u3070\u3001\u4f3c\u305f\u3088\u3046\u306a\u72b6\u6cc1\u306e\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002 \u73fe\u6bb5\u968e\u3067\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u30eb\u30fc\u30eb\u30a8\u30f3\u30b8\u30f3\u3057\u304b\u7a4d\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u4eca\u5f8c\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u304c\u6210\u719f\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u304c\u5145\u5b9f\u3057\u3066\u304f\u308c\u3070\u3001\u3088\u308a\u8907\u96d1\u306a\u51e6\u7406\u3082\u53ef\u80fd\u306b\u306a\u308b\u3053\u3068\u304c\u671f\u5f85\u3067\u304d\u307e\u3059\u3002","title":"\u307e\u3068\u3081"},{"location":"geneva/","text":"\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc for Geneva release \u00b6 N/A","title":"N/A"},{"location":"geneva/#for-geneva-release","text":"N/A","title":"\u30cf\u30f3\u30ba\u30aa\u30f3\u30e9\u30dc for Geneva release"}]}